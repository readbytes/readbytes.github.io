<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>JavaScript Data Visualization D3.js Animating Data</title>
<link rel='shortcut icon' href='https://java2s.com/style/favicon.ico'>
<link href="https://fonts.googleapis.com/css2?family=Merriweather&display=swap" rel="stylesheet" />
<link href="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet" />

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/codemirror.min.css" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/theme/material.css"> <!-- Dark theme -->
<script src="https://cdn.jsdelivr.net/npm/typescript@5/lib/typescript.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/codemirror.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/mode/htmlmixed/htmlmixed.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/mode/xml/xml.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/mode/css/css.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/mode/javascript/javascript.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/mode/javascript/typescript.min.js"></script>
<style>
    #floatingLog {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: rgba(20, 20, 20, 0.95);
      color: white;
      font-family: monospace;
      font-size: 14px;
      padding: 16px 20px;
      border-radius: 8px;
      box-shadow: 0 4px 16px rgba(0, 0, 0, 0.4);
      max-width: 80%;
      max-height: 200px;
      overflow-y: auto;
      display: none;
      z-index: 9999;
      pointer-events: none;
      white-space: pre-wrap;
      text-align: center;
    }
</style>
<script>
  const codeMirrorMap = new Map();
  const iframeMap = new Map();
  
 

  let dismissTimer;
  function showFloatingLog(message) {
	const floatingLog = document.getElementById('floatingLog');

    if (floatingLog.style.display !== 'block') {
      floatingLog.textContent = '';
      floatingLog.style.display = 'block'; 
    }

    floatingLog.textContent += message + '\n';
    floatingLog.scrollTop = floatingLog.scrollHeight; 
    clearTimeout(dismissTimer);
    dismissTimer = setTimeout(() => {
      floatingLog.style.display = 'none';
      floatingLog.textContent = '';
    }, 2000);
  }
  window.addEventListener('message', (event) => {
	    if (!iframeMap.has(event.source)) return;

	    if (event.data?.type === 'console-log') {
	      showFloatingLog(event.data.message);
	    }
  });  
  function renderIframe(button,textarea_id, iframe_id) {
      const html = codeMirrorMap.get(textarea_id).getValue();
      const iframe = document.getElementById(iframe_id);
  
      const oldIframe = iframe;
      const newIframe = document.createElement('iframe');
      newIframe.className ="result_iframe";
      
      newIframe.id = iframe_id;
      oldIframe.replaceWith(newIframe);
 

      // Track the iframe in the map
      iframeMap.set(newIframe.contentWindow, button);

      const overrideScript = `
        <script>
          (function() {
            const originalLog = console.log;
            console.log = function(...args) {
              originalLog.apply(console, args);
              window.parent.postMessage({
                type: 'console-log',
                message: args.map(a => {
                  try { return JSON.stringify(a); }
                  catch { return String(a); }
                }).join(' ')
              }, '*');
            };
          })();
        <\/script>
      `;

      const iframeHTML = `
        <!DOCTYPE html>
        <html>
        <body>
          ${overrideScript}
          ${html}
        </body>
        </html>
      `;
 
      const doc = newIframe.contentDocument || newIframe.contentWindow.document;
      doc.open();
      doc.write(iframeHTML);
      doc.close();

      
      setTimeout(() => {
    	  newIframe.style.height = '0px';
    	   let contentHeight = Math.max(doc.body.scrollHeight,doc.documentElement.scrollHeight);
 
    	   if(contentHeight < 150 || contentHeight > 600){
    		   contentHeight = 600;
    	   } 
    	   newIframe.style.height = contentHeight + 'px';
    	}, 50);      
      
  }
  function renderIframeForClientTypescript(textarea_id, iframe_id) {
      let code = codeMirrorMap.get(textarea_id).getValue();
      code = ts.transpile(code);
      const iframe = document.getElementById(iframe_id);
      const doc = iframe.contentDocument || iframe.contentWindow.document;

const html = `
  <!DOCTYPE html>
  <html>
    <head>
      <title>Output</title>
      <style>
        body { font-family: monospace; padding: 1em; background: #f4f4f4; color: #222; }
        pre { white-space: pre-wrap; word-break: break-word; }
        .error { color: red; }
      </style>
    </head>
    <body>
      <pre id="log"></pre>
      <script>
        (function(){
          const logEl = document.getElementById('log');
          const origLog = console.log;
          const origError = console.error;

          console.log = (...args) => {
            logEl.textContent += args.join(' ') + '\\n';
            origLog.apply(console, args);
          };
          console.table = (...args) => {
            logEl.textContent += args.join(' ') + '\\n';
            origLog.apply(console, args);
          };

          console.error = (...args) => {
            logEl.innerHTML +='<span class="error">' + args.join(' ') + '</span>';
            origError.apply(console, args);
          };
          window.addEventListener("error", function (event) {
              console.error("Caught by event listener:", event.message);
          });    
          try {             
              ${code};
          } catch (err) {
            console.error(err.stack || err.message);
          }
        })();
      <\/script>
    </body>
  </html>
`;

      iframe.style.display = "block";
      iframe.srcdoc = html;  
  }

    function renderIframeForClientJavascript(textarea_id, iframe_id) {
        const code = codeMirrorMap.get(textarea_id).getValue();
        const iframe = document.getElementById(iframe_id);
        const doc = iframe.contentDocument || iframe.contentWindow.document;

  const html = `
    <!DOCTYPE html>
    <html>
      <head>
        <title>Output</title>
        <style>
          body { font-family: monospace; padding: 1em; background: #1e1e1e; color: #eee; }
          pre { white-space: pre-wrap; word-break: break-word; }
          .error { color: red; }
        </style>
      </head>
      <body>
        <pre id="log"></pre>
        <script>
          (function(){
            const logEl = document.getElementById('log');
            const origLog = console.log;
            const origError = console.error;

            console.log = (...args) => {
              logEl.textContent += args.join(' ') + '\\n';
              origLog.apply(console, args);
            };
            console.table = (...args) => {
              logEl.textContent += args.join(' ') + '\\n';
              origLog.apply(console, args);
            };

            console.error = (...args) => {
              logEl.innerHTML +='<span class="error">' + args.join(' ') + '</span>';
              origError.apply(console, args);
            };
            window.addEventListener("error", function (event) {
                console.error("Caught by event listener:", event.message);
            });    
            try {
             ${code}; 
            } catch (err) {
              console.error(err.stack || err.message);
            }
          })();
        <\/script>
      </body>
    </html>
  `;
        iframe.style.display = "block";
        iframe.srcdoc = html;  
    }
    function toggleSnippetAndRefresh(id, textarea_id) {
      const box = document.getElementById(id);
      box.classList.toggle("open");
      codeMirrorMap.get(textarea_id).refresh();
    }

  </script>
  <script>
  const mode = localStorage.getItem('mode') || 'light';
  document.documentElement.classList.add(`${mode}-mode`);
  </script>   
<style> 
html {
  scroll-behavior: smooth;
}

body {
  font-family: 'Merriweather', serif;
  margin: 0;
  padding: 2rem 1rem;
  font-size: 15px;
  line-height: 1.5;
  transition: background-color 0.3s, color 0.3s;
}

.container {
  max-width: 700px;
  margin: 0 auto;
  padding: 1rem 2rem;
  box-shadow: 0 0 15px rgba(0,0,0,0.1);
}

h1, h2, h3 {
  font-weight: 600;
  margin-top: 2.5rem;
  margin-bottom: 1rem;
  line-height: 1.2;
}

h1 { font-size: 1.8rem; }
h2 { font-size: 1.4rem; }
h3 { font-size: 1.2rem; }

table {
  width: 100%;
  border-collapse: collapse;
  font-family: sans-serif;
  font-size: 1em;
  margin: 1em 0;
}

th, td {
  padding: 0.6em 1em;
  text-align: left;
  border: 1px solid;
}

tr:nth-child(even) {
  background-color: inherit;
}

tr:hover {
  background-color: inherit;
}

a {
  text-decoration: none;
  transition: color 0.2s;
}

a:hover {
  text-decoration: underline;
}

code {
  color: #d35400;
}

.book-title-chapter {
  font-family: 'Merriweather', serif;
  font-size: 2rem;
  font-weight: bold;
  text-align: center;
  margin-bottom: 2rem;
  border-bottom: 2px solid;
  padding-bottom: 0.5rem;
}

.book-subtitle-chapter {
  text-align: center;
  font-size: 1rem;
  margin-top: -1rem;
  margin-bottom: 2rem;
}

.related-books {
  margin-top: 40px;
}

.related-book-list {
  display: flex;
  flex-wrap: wrap;
  gap: 20px;
}

    .book-cover {
      width: 130px;
      height: 180px;
      font-family: Arial, sans-serif;
      position: relative;
      overflow: hidden;      
      line-height: normal;
      box-shadow: 2px 2px 4px rgba(0,0,0,0.1);
    }
    .book-cover-bottom-stripe {
      position: absolute;
      bottom: 0;
      left: 0;
      height: 5px;
      width: 100%;
    }
    .book-cover-title {
      position: absolute;
      width: 100%;
      text-align: center;
      font-weight: bold;
    }
     
    .book-cover-icon {
      position: absolute;
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      align-items: center;
      justify-content: center; 
    }

    .book-cover-author {
      position: absolute;
      bottom: 10px;
      width: 100%;
      text-align: center;
      font-size: 8px;
      color: #333;
    }

.page-footer {
  margin-top: 4rem;
  padding: 1rem 0;
  text-align: center;
  font-size: 0.85rem;
  border-top: 1px solid;
}

.chapter-navi-section {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding-bottom: 10px;
}

.nav-link {
  color: inherit;
  text-decoration: none;
  opacity: 0.5;
  transition: opacity 0.3s ease, text-decoration 0.3s ease;
}

.nav-link:hover {
  opacity: 0.9;
  text-decoration: underline;
}

.prev { text-align: left; }
.toc-link { text-align: center; }
.next { text-align: right; }

.download-section {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 2rem;
  padding: 2rem 1rem;
  max-width: 600px;
  margin: 3rem auto;
  border-radius: 12px;
  box-shadow: 0 4px 10px rgba(0,0,0,0.05);
}

.download-info h2 {
  margin: 0 0 0.5rem;
  font-size: 1.2rem;
}

.format-label {
  margin: 0 0 0.5rem;
  font-size: 0.95rem;
}

.download-buttons {
  display: flex;
  gap: 1rem;
}

.download-button {
  background-color: #4A90E2;
  color: white;
  padding: 0.5em 1.2em;
  border-radius: 25px;
  font-size: 0.95rem;
  text-decoration: none;
  transition: background-color 0.3s ease;
}

.download-button:hover {
  background-color: #357ABD;
}

.code-block {
  position: relative;
  margin-bottom: 1em;
}

.copy-button {
  background: transparent;
  color: white;
  position: absolute;
  top: 8px;
  right: 8px;
  border: none;
  padding: 4px 8px;
  font-size: 12px;
  border-radius: 4px;
  cursor: pointer;
  z-index: 1;
}

.copy-button:hover {
  background-color: #0056b3;
}

.snippet-container {
  overflow: hidden;
}

.snippet-header {
  padding: 0.75rem 1rem;
  cursor: pointer;
  font-size: 1rem;
    background-color: #eeeeee;
    color:  #111111; 
    border-radius: 8px;
    cursor: pointer;
    box-shadow: 0 4px 6px rgba(0,0,0,0.1);  
}

.snippet-body {
  display: none;
  font-family: monospace;
}

.snippet-container.open .snippet-body {
  display: block;
}

.CodeMirror {
  border: 2px solid #ccc;
  border-radius: 4px;
  resize: vertical;
}

/* === Light Mode === */
html.light-mode {
  background-color: #f8f7f5;
  color: #333;
}

html.light-mode .container {
  background: white;
}

html.light-mode .book-title-chapter {
  color: #2c3e50;
  border-color: #ccc;
}
html.light-mode .book-subtitle-chapter{
  color: #888;
}

html.light-mode .page-footer,
html.light-mode .series-name,
html.light-mode .book-subtitle,
html.light-mode .format-label {
  color: #888;
}

html.light-mode .related-books h2 {
  color: #333;
  border-bottom: 2px solid #eee;
}

html.light-mode .book-title {
  color: #fff;
}

html.light-mode .book-cover {
  border: 1px solid #ccc;
}

html.light-mode th {
  background-color: #f2f2f2;
}

html.light-mode tr:nth-child(even) {
  background-color: #fafafa;
}

html.light-mode tr:hover {
  background-color: #e6f7ff;
}

html.light-mode a,
html.light-mode .page-footer a {
  color: #000;
}

/* === Dark Mode === */
html.dark-mode {
  background-color: #181818;
  color: #e0e0e0;
}

html.dark-mode .container {
  background: #222;
}

html.dark-mode .book-title-chapter {
  color: #ddd;
  border-color: #444;
}

html.dark-mode .snippet-header {
    background-color: #333;
    color:  #ddd; 
}


html.dark-mode .book-subtitle-chapter,
html.dark-mode .page-footer,
html.dark-mode .series-name,
html.dark-mode .book-subtitle,
html.dark-mode .book-footer,
html.dark-mode .format-label {
  color: #aaa;
}

html.dark-mode .related-books h2 {
  color: #ddd;
  border-bottom: 2px solid #333;
}

html.dark-mode .book-title {
  color: #fff;
}

html.dark-mode .book-cover {
  border: 1px solid #555;
}

html.dark-mode th {
  background-color: #333;
  color: #fff;
}

html.dark-mode td {
  border-color: #444;
}

html.dark-mode tr:nth-child(even) {
  background-color: #2a2a2a;
}

html.dark-mode tr:hover {
  background-color: #2c3e50;
}

html.dark-mode a,
html.dark-mode .page-footer a {
  color: #eee;
}

    .dialog-backdrop {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      background: rgba(0,0,0,0.5);
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 10;
    }

    .dialog {
      background: white;
      padding: 20px;
      width: 90vw;
      height: 80vh;
      border-radius: 8px;
      box-shadow: 0 0 20px rgba(0,0,0,0.3);
      display: flex;
      flex-direction: column;
    }
    .dialog-content {
      display: flex;
      flex: 1;
      gap: 20px;
      margin-top: 10px;
    }
    .dialog h2 {
      margin-top: 0;
    }

    .textarea_dialog {
      width: 50%;
      height: 100%;
      resize: none;
      font-family: monospace;
      font-size: 14px;
      padding: 10px;
      box-sizing: border-box;
      border: 1px solid #ccc;
    }

    .iframe_dialog {
      width: 50%;
      height: 100%;
      border: 1px solid #ccc;
    }
    .controls_dialog {
      display: flex;
      justify-content: space-between;
      margin-top: 10px;
    }    
    button { padding: 0.5em 1em; background: green; color: white; border: none; cursor: pointer; }
    button:hover { background: #1e7e34; }
    .result_iframe { width:99%; height:200px; margin-top: 1em;  resize: both;border:1px solid #ccc;}        
</style>
</head>
<body> 
  <div class="container">
    <div class = "chapter-navi-section">
<a href="javascript-data-visualization-d3-js-adding-interactivity.htm" class="nav-button prev">←</a>
<a href='javascript-data-visualization.htm#d3-js-animating-data' class="nav-button toc-link">Index</a>
<a href="javascript-data-visualization-chart-js.htm" class="nav-button next">→</a>
</div>

    <h1 class="book-title-chapter" id = 'top'>D3.js Animating Data</h1>
    <h3 class="book-subtitle-chapter">JavaScript Data Visualization</h3>   
    <!-- <h1 class ="chapter-title"></h1> -->
    <h2 id='transitions-and-tweens-in-d3'>7.1 Transitions and Tweens in D3</h2><p>Animating your data visualizations enhances their appeal and helps users understand changes over time or between states. D3’s powerful transition system makes it easy to animate changes smoothly by interpolating values — a process known as <em>tweening</em>.</p><p>In this section, we’ll cover:</p><ul>
 <li>How to create transitions using <code>.transition()</code> and control their duration with <code>.duration()</code>,</li>
 <li>The concept of tweening — interpolating between starting and ending values,</li>
 <li>Animating attributes and styles,</li>
 <li>A simple example showing bars growing to their height and dots moving to new positions.</li>
</ul><h3 id="creating-transitions">Creating Transitions</h3><p>A <strong>transition</strong> in D3 is a special selection that animates changes in attributes, styles, or other properties over time.</p><p>You create a transition by chaining <code>.transition()</code> onto a selection:</p><div class="code-block"><button class="copy-button" onclick="copyCode(this)">▯</button>
 <pre><code class="language-js">selection.transition()
  .duration(1000)  // animation lasts 1000ms (1 second)
  .attr('height', newHeight)
  .attr('y', newY);</code></pre>
</div><p>This smoothly interpolates the attribute values from their current state to the specified new values.</p><h3 id="tweening-interpolating-between-values">Tweening: Interpolating Between Values</h3><p>Behind the scenes, D3 calculates intermediate values for each frame between the old and new states, a process called <em>tweening</em>.</p><p>For example, when you change the height of a bar from 0 to 100 pixels, D3 automatically computes the heights for frames between 0 and 100, creating smooth growth.</p><p>You can also define <em>custom tween functions</em> for more complex interpolations, but basic attribute and style changes are automatically tweened by D3.</p><h3 id="animating-attributes-and-styles">Animating Attributes and Styles</h3><p>D3 supports animating any SVG attribute or CSS style that can be interpolated numerically. Common animated properties include:</p><ul>
 <li><code>x</code>, <code>y</code>, <code>width</code>, <code>height</code> for SVG shapes,</li>
 <li><code>fill</code>, <code>stroke</code> colors,</li>
 <li><code>opacity</code> for fade effects,</li>
 <li><code>transform</code> for position, rotation, or scaling.</li>
</ul><p>Example of animating color:</p><div class="code-block"><button class="copy-button" onclick="copyCode(this)">▯</button>
 <pre><code class="language-js">selection.transition()
  .duration(800)
  .style('fill', 'orange');</code></pre>
</div><h3 id="example-1-bars-growing-on-enter">Example 1: Bars Growing on Enter</h3><p>Let’s create a simple bar chart where bars grow from height 0 to their data-driven heights when added:</p><div class="code-block"><button class="copy-button" onclick="copyCode(this)">▯</button>
 <pre><code class="language-js">const data = [30, 80, 45, 60, 20];

const svg = d3.select('svg')
  .attr('width', 500)
  .attr('height', 300);

const xScale = d3.scaleBand()
  .domain(data.map((d,i) =&gt; i))
  .range([0, 480])
  .padding(0.2);

const yScale = d3.scaleLinear()
  .domain([0, d3.max(data)])
  .range([250, 0]);

const chart = svg.append('g').attr('transform', 'translate(10,10)');

chart.selectAll('rect')
  .data(data)
  .enter()
  .append('rect')
  .attr('x', (d,i) =&gt; xScale(i))
  .attr('width', xScale.bandwidth())
  .attr('y', yScale(0))         // Start at baseline (height 0)
  .attr('height', 0)            // Initial height 0
  .attr('fill', 'steelblue')
  .transition()
  .duration(1000)
  .attr('y', d =&gt; yScale(d))    // Animate y up to data value
  .attr('height', d =&gt; 250 - yScale(d));  // Animate height growing</code></pre>
</div><div class="snippet-container" id="4ERBF">
 <div id="J8q0G_Dialog" class="dialog-backdrop">
  <div class="dialog">
   <h2>Dialog 1</h2>
   <div class="controls"><button onclick="renderIframe(this,'aeSOc_Textarea','J8q0G_IFrame')">Run</button> <button onclick="closeAll()">Close</button>
   </div>
   <div class="dialog-content"><textarea id="aeSOc_Textarea" class="textarea_dialog" placeholder="Type HTML here...">&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
&lt;head&gt;
  &lt;meta charset="UTF-8" /&gt;
  &lt;title&gt;D3 Animated Bar Chart&lt;/title&gt;
  &lt;script src="https://d3js.org/d3.v7.min.js"&gt;&lt;/script&gt;
  &lt;style&gt;
    body {
      font-family: sans-serif;
      text-align: center;
      padding: 40px;
    }
    svg {
      border: 1px solid #ccc;
      display: block;
      margin: 0 auto;
    }
  &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;

  &lt;h1&gt;Animated D3 Bar Chart&lt;/h1&gt;
  &lt;svg width="500" height="300"&gt;&lt;/svg&gt;

  &lt;script&gt;
    const data = [30, 80, 45, 60, 20];

    const svg = d3.select('svg');
    const chartMargin = { top: 10, right: 10, bottom: 40, left: 10 };
    const chartWidth = +svg.attr('width') - chartMargin.left - chartMargin.right;
    const chartHeight = +svg.attr('height') - chartMargin.top - chartMargin.bottom;

    const xScale = d3.scaleBand()
      .domain(data.map((_, i) =&gt; i))
      .range([0, chartWidth])
      .padding(0.2);

    const yScale = d3.scaleLinear()
      .domain([0, d3.max(data)])
      .range([chartHeight, 0]);

    const chart = svg.append('g')
      .attr('transform', `translate(${chartMargin.left},${chartMargin.top})`);

    chart.selectAll('rect')
      .data(data)
      .enter()
      .append('rect')
      .attr('x', (_, i) =&gt; xScale(i))
      .attr('width', xScale.bandwidth())
      .attr('y', yScale(0))       // Start at bottom
      .attr('height', 0)          // Start with height 0
      .attr('fill', 'steelblue')
      .transition()
      .duration(1000)
      .attr('y', d =&gt; yScale(d))  // Animate upward
      .attr('height', d =&gt; chartHeight - yScale(d));  // Animate growth
  &lt;/script&gt;

&lt;/body&gt;
&lt;/html&gt;</textarea> <iframe id="J8q0G_IFrame" class="iframe_dialog"></iframe>
   </div>
  </div>
 </div>
 <div class="snippet-header" onclick="toggleSnippetAndRefresh('4ERBF','aeSOc')">
  Click to Try it <!--<span onclick="toggleSnippetAndRefresh('4ERBF','aeSOc')">Click
			to Try it</span> --> <!-- <span onclick="openDialog('J8q0G_Dialog')">Dialog</span> -->
 </div>
 <div class="snippet-body"><textarea id="aeSOc">&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
&lt;head&gt;
  &lt;meta charset="UTF-8" /&gt;
  &lt;title&gt;D3 Animated Bar Chart&lt;/title&gt;
  &lt;script src="https://d3js.org/d3.v7.min.js"&gt;&lt;/script&gt;
  &lt;style&gt;
    body {
      font-family: sans-serif;
      text-align: center;
      padding: 40px;
    }
    svg {
      border: 1px solid #ccc;
      display: block;
      margin: 0 auto;
    }
  &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;

  &lt;h1&gt;Animated D3 Bar Chart&lt;/h1&gt;
  &lt;svg width="500" height="300"&gt;&lt;/svg&gt;

  &lt;script&gt;
    const data = [30, 80, 45, 60, 20];

    const svg = d3.select('svg');
    const chartMargin = { top: 10, right: 10, bottom: 40, left: 10 };
    const chartWidth = +svg.attr('width') - chartMargin.left - chartMargin.right;
    const chartHeight = +svg.attr('height') - chartMargin.top - chartMargin.bottom;

    const xScale = d3.scaleBand()
      .domain(data.map((_, i) =&gt; i))
      .range([0, chartWidth])
      .padding(0.2);

    const yScale = d3.scaleLinear()
      .domain([0, d3.max(data)])
      .range([chartHeight, 0]);

    const chart = svg.append('g')
      .attr('transform', `translate(${chartMargin.left},${chartMargin.top})`);

    chart.selectAll('rect')
      .data(data)
      .enter()
      .append('rect')
      .attr('x', (_, i) =&gt; xScale(i))
      .attr('width', xScale.bandwidth())
      .attr('y', yScale(0))       // Start at bottom
      .attr('height', 0)          // Start with height 0
      .attr('fill', 'steelblue')
      .transition()
      .duration(1000)
      .attr('y', d =&gt; yScale(d))  // Animate upward
      .attr('height', d =&gt; chartHeight - yScale(d));  // Animate growth
  &lt;/script&gt;

&lt;/body&gt;
&lt;/html&gt;</textarea> <br> <button onclick="renderIframe(this,'aeSOc','J8q0G')">Run</button>
  <div id="J8q0G_FloatingLog" class="floatingLog" aria-live="polite" role="alert"></div> <iframe id="J8q0G" class="result_iframe" style="display: none;"></iframe>
  <script>
			{
				let editor = CodeMirror.fromTextArea(document
						.getElementById("aeSOc"), {
					mode : "htmlmixed",
					lineNumbers : false,
					tabSize : 2
				});
			    const mode = localStorage.getItem("mode") || "light";  
			    const newTheme = mode === "dark" ? "material" : "default";
			    editor.setOption("theme", newTheme);
			    
				codeMirrorMap.set("aeSOc", editor);

				let editor1 = CodeMirror.fromTextArea(document.getElementById("aeSOc_Textarea"), {
					mode : "htmlmixed",
					lineNumbers : false,
					tabSize : 2
				});
			    editor1.setOption("theme", newTheme);				
				
				codeMirrorMap.set("aeSOc_Textarea", editor1);
			}
		    function openDialog(id) {
		        closeAll();
		        document.getElementById(id).style.display = 'flex';
		        setTimeout(() => {
		        	 codeMirrorMap.get("aeSOc_Textarea").refresh();
		        }, 100); // 100ms 
		      }

		      function closeAll() {
		        document.querySelectorAll('.dialog-backdrop').forEach(el => {
		          el.style.display = 'none';
		        });
		      }			
		</script>
 </div>
</div><h3 id="example-2-moving-dots-to-new-positions">Example 2: Moving Dots to New Positions</h3><p>Transitions can also animate positions. Imagine updating a scatter plot where circles move smoothly to new data points:</p><div class="code-block"><button class="copy-button" onclick="copyCode(this)">▯</button>
 <pre><code class="language-js">const oldData = [
  {x: 30, y: 50},
  {x: 70, y: 90},
  {x: 110, y: 30},
];

const newData = [
  {x: 100, y: 150},
  {x: 200, y: 80},
  {x: 250, y: 130},
];

const svg = d3.select('svg')
  .attr('width', 400)
  .attr('height', 200);

const circles = svg.selectAll('circle')
  .data(oldData)
  .enter()
  .append('circle')
  .attr('cx', d =&gt; d.x)
  .attr('cy', d =&gt; d.y)
  .attr('r', 10)
  .attr('fill', 'teal');

// Later update positions with transition
svg.selectAll('circle')
  .data(newData)
  .transition()
  .duration(1500)
  .attr('cx', d =&gt; d.x)
  .attr('cy', d =&gt; d.y);</code></pre>
</div><p>The circles smoothly move from their old to new <code>(x,y)</code> positions over 1.5 seconds.</p><div class="snippet-container" id="w8OGq">
 <div id="Qd7s5_Dialog" class="dialog-backdrop">
  <div class="dialog">
   <h2>Dialog 1</h2>
   <div class="controls"><button onclick="renderIframe(this,'Ip5w8_Textarea','Qd7s5_IFrame')">Run</button> <button onclick="closeAll()">Close</button>
   </div>
   <div class="dialog-content"><textarea id="Ip5w8_Textarea" class="textarea_dialog" placeholder="Type HTML here...">&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
&lt;head&gt;
  &lt;meta charset="UTF-8" /&gt;
  &lt;title&gt;D3 Circle Transition&lt;/title&gt;
  &lt;script src="https://d3js.org/d3.v7.min.js"&gt;&lt;/script&gt;
  &lt;style&gt;
    body {
      font-family: sans-serif;
      text-align: center;
      padding: 40px;
    }
    svg {
      border: 1px solid #ccc;
      margin-top: 20px;
      display: block;
      margin-left: auto;
      margin-right: auto;
    }
    button {
      margin-top: 20px;
      font-size: 16px;
      padding: 8px 16px;
      cursor: pointer;
    }
  &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;

  &lt;h1&gt;D3 Circle Transition Demo&lt;/h1&gt;
  &lt;svg&gt;&lt;/svg&gt;
  &lt;button id="animateBtn"&gt;Animate to New Data&lt;/button&gt;

  &lt;script&gt;
    const oldData = [
      {x: 30, y: 50},
      {x: 70, y: 90},
      {x: 110, y: 30},
    ];

    const newData = [
      {x: 100, y: 150},
      {x: 200, y: 80},
      {x: 250, y: 130},
    ];

    const svg = d3.select('svg')
      .attr('width', 400)
      .attr('height', 200);

    svg.selectAll('circle')
      .data(oldData)
      .enter()
      .append('circle')
      .attr('cx', d =&gt; d.x)
      .attr('cy', d =&gt; d.y)
      .attr('r', 10)
      .attr('fill', 'teal');

    document.getElementById('animateBtn').addEventListener('click', () =&gt; {
      svg.selectAll('circle')
        .data(newData)
        .transition()
        .duration(1500)
        .attr('cx', d =&gt; d.x)
        .attr('cy', d =&gt; d.y);
    });
  &lt;/script&gt;

&lt;/body&gt;
&lt;/html&gt;</textarea> <iframe id="Qd7s5_IFrame" class="iframe_dialog"></iframe>
   </div>
  </div>
 </div>
 <div class="snippet-header" onclick="toggleSnippetAndRefresh('w8OGq','Ip5w8')">
  Click to Try it <!--<span onclick="toggleSnippetAndRefresh('w8OGq','Ip5w8')">Click
			to Try it</span> --> <!-- <span onclick="openDialog('Qd7s5_Dialog')">Dialog</span> -->
 </div>
 <div class="snippet-body"><textarea id="Ip5w8">&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
&lt;head&gt;
  &lt;meta charset="UTF-8" /&gt;
  &lt;title&gt;D3 Circle Transition&lt;/title&gt;
  &lt;script src="https://d3js.org/d3.v7.min.js"&gt;&lt;/script&gt;
  &lt;style&gt;
    body {
      font-family: sans-serif;
      text-align: center;
      padding: 40px;
    }
    svg {
      border: 1px solid #ccc;
      margin-top: 20px;
      display: block;
      margin-left: auto;
      margin-right: auto;
    }
    button {
      margin-top: 20px;
      font-size: 16px;
      padding: 8px 16px;
      cursor: pointer;
    }
  &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;

  &lt;h1&gt;D3 Circle Transition Demo&lt;/h1&gt;
  &lt;svg&gt;&lt;/svg&gt;
  &lt;button id="animateBtn"&gt;Animate to New Data&lt;/button&gt;

  &lt;script&gt;
    const oldData = [
      {x: 30, y: 50},
      {x: 70, y: 90},
      {x: 110, y: 30},
    ];

    const newData = [
      {x: 100, y: 150},
      {x: 200, y: 80},
      {x: 250, y: 130},
    ];

    const svg = d3.select('svg')
      .attr('width', 400)
      .attr('height', 200);

    svg.selectAll('circle')
      .data(oldData)
      .enter()
      .append('circle')
      .attr('cx', d =&gt; d.x)
      .attr('cy', d =&gt; d.y)
      .attr('r', 10)
      .attr('fill', 'teal');

    document.getElementById('animateBtn').addEventListener('click', () =&gt; {
      svg.selectAll('circle')
        .data(newData)
        .transition()
        .duration(1500)
        .attr('cx', d =&gt; d.x)
        .attr('cy', d =&gt; d.y);
    });
  &lt;/script&gt;

&lt;/body&gt;
&lt;/html&gt;</textarea> <br> <button onclick="renderIframe(this,'Ip5w8','Qd7s5')">Run</button>
  <div id="Qd7s5_FloatingLog" class="floatingLog" aria-live="polite" role="alert"></div> <iframe id="Qd7s5" class="result_iframe" style="display: none;"></iframe>
  <script>
			{
				let editor = CodeMirror.fromTextArea(document
						.getElementById("Ip5w8"), {
					mode : "htmlmixed",
					lineNumbers : false,
					tabSize : 2
				});
			    const mode = localStorage.getItem("mode") || "light";  
			    const newTheme = mode === "dark" ? "material" : "default";
			    editor.setOption("theme", newTheme);
			    
				codeMirrorMap.set("Ip5w8", editor);

				let editor1 = CodeMirror.fromTextArea(document.getElementById("Ip5w8_Textarea"), {
					mode : "htmlmixed",
					lineNumbers : false,
					tabSize : 2
				});
			    editor1.setOption("theme", newTheme);				
				
				codeMirrorMap.set("Ip5w8_Textarea", editor1);
			}
		    function openDialog(id) {
		        closeAll();
		        document.getElementById(id).style.display = 'flex';
		        setTimeout(() => {
		        	 codeMirrorMap.get("Ip5w8_Textarea").refresh();
		        }, 100); // 100ms 
		      }

		      function closeAll() {
		        document.querySelectorAll('.dialog-backdrop').forEach(el => {
		          el.style.display = 'none';
		        });
		      }			
		</script>
 </div>
</div><h3 id="summary">Summary</h3><ul>
 <li>Use <code>.transition()</code> to animate changes in selections.</li>
 <li>Control animation speed with <code>.duration()</code>.</li>
 <li>D3 interpolates attribute and style values between their old and new states — this is tweening.</li>
 <li>Animate bar height, position, color, opacity, and more.</li>
 <li>Transitions add polish and clarity to data updates, helping users track changes visually.</li>
</ul><div class = "chapter-navi-section">
<a href="#top" class="nav-button prev">↑</a>
<a href='javascript-data-visualization.htm#d3-js-animating-data' class="nav-button toc-link">Index</a>
<a href="#bottom" class="nav-button next">↓</a>
</div>
<h2 id='smoothing-and-timing-functions'>7.2 Smoothing and Timing Functions</h2><p>Animations are more engaging and natural when their pacing feels smooth and intentional, rather than mechanical or abrupt. D3 provides a set of <strong>easing functions</strong> that control how the animation progresses over time — essentially, how speed changes during the transition.</p><p>In this section, we’ll learn about:</p><ul>
 <li>What easing functions are and why they matter,</li>
 <li>Common easing functions like <code>easeLinear</code>, <code>easeCubic</code>, <code>easeBounce</code>, and more,</li>
 <li>How to apply easing functions in D3 transitions,</li>
 <li>A comparison example showing different easing effects side-by-side.</li>
</ul><h3 id="what-are-easing-functions">What Are Easing Functions?</h3><p>An easing function defines the rate of change of a parameter over time. Instead of moving at a constant speed, easing can make animations:</p><ul>
 <li>Start slow and speed up (ease-in),</li>
 <li>Start fast and slow down (ease-out),</li>
 <li>Start and end slowly, speeding up in the middle (ease-in-out),</li>
 <li>Bounce or elastic movements.</li>
</ul><p>This makes animations feel more natural and visually pleasing.</p><h3 id="common-d3-easing-functions">Common D3 Easing Functions</h3><p>D3 provides many built-in easing functions in the <code>d3.ease*</code> namespace. Here are a few popular ones:</p><table>
 <thead>
  <tr>
   <th>Easing Function</th>
   <th>Description</th>
  </tr>
 </thead>
 <tbody>
  <tr>
   <td><code>d3.easeLinear</code></td>
   <td>Constant speed, no easing</td>
  </tr>
  <tr>
   <td><code>d3.easeCubicIn</code></td>
   <td>Starts slowly, accelerates</td>
  </tr>
  <tr>
   <td><code>d3.easeCubicOut</code></td>
   <td>Starts fast, decelerates</td>
  </tr>
  <tr>
   <td><code>d3.easeCubicInOut</code></td>
   <td>Slow start and end, fast middle</td>
  </tr>
  <tr>
   <td><code>d3.easeBounce</code></td>
   <td>Bounce effect, like dropping a ball</td>
  </tr>
  <tr>
   <td><code>d3.easeElastic</code></td>
   <td>Elastic effect with overshoot</td>
  </tr>
 </tbody>
</table><h3 id="applying-easing-to-transitions">Applying Easing to Transitions</h3><p>You apply easing to a transition using the <code>.ease()</code> method:</p><div class="code-block"><button class="copy-button" onclick="copyCode(this)">▯</button>
 <pre><code class="language-js">selection.transition()
  .duration(1500)
  .ease(d3.easeCubicInOut)
  .attr('x', 200);</code></pre>
</div><p>This transition will move the element’s <code>x</code> position to 200, accelerating slowly at the start and decelerating slowly at the end.</p><h3 id="example-comparing-different-easing-functions">Example: Comparing Different Easing Functions</h3><p>Below is an example that animates three circles moving horizontally using different easing functions. You’ll observe how the pace of their motion changes.</p><div class="code-block"><button class="copy-button" onclick="copyCode(this)">▯</button>
 <pre><code class="language-html">&lt;svg width="600" height="100"&gt;&lt;/svg&gt;
&lt;script src="https://d3js.org/d3.v7.min.js"&gt;&lt;/script&gt;
&lt;script&gt;
    const svg = d3.select('svg');

    const easingFunctions = [
      { name: 'easeLinear', func: d3.easeLinear },
      { name: 'easeCubicInOut', func: d3.easeCubicInOut },
      { name: 'easeBounce', func: d3.easeBounce },
    ];

    // Create circles
    const circles = svg.selectAll('circle')
      .data(easingFunctions)
      .enter()
      .append('circle')
      .attr('cx', 50)
      .attr('cy', (d, i) =&gt; 30 + i * 30)
      .attr('r', 12)
      .attr('fill', 'steelblue');

    // Create labels
    svg.selectAll('text')
      .data(easingFunctions)
      .enter()
      .append('text')
      .attr('x', 10)
      .attr('y', (d, i) =&gt; 30 + i * 30 + 5)
      .text(d =&gt; d.name) // FIXED HERE
      .attr('font-family', 'sans-serif')
      .attr('font-size', 12)
      .attr('fill', '#333');

    // Animate each circle individually using its own easing function
    function animate() {
      circles.each(function(d) {
        d3.select(this)
          .transition()
          .duration(2000)
          .ease(d.func) // FIXED HERE
          .attr('cx', 550)
          .transition()
          .duration(2000)
          .ease(d.func)
          .attr('cx', 50)
          .on('end', animate);
      });
    }

  animate();
&lt;/script&gt;</code></pre>
</div><div class="snippet-container" id="JhPvB">
 <div id="0j74C_Dialog" class="dialog-backdrop">
  <div class="dialog">
   <h2>Dialog 1</h2>
   <div class="controls"><button onclick="renderIframe(this,'szMus_Textarea','0j74C_IFrame')">Run</button> <button onclick="closeAll()">Close</button>
   </div>
   <div class="dialog-content"><textarea id="szMus_Textarea" class="textarea_dialog" placeholder="Type HTML here...">&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
&lt;head&gt;
  &lt;meta charset="UTF-8" /&gt;
  &lt;title&gt;D3 Easing Demo&lt;/title&gt;
  &lt;script src="https://d3js.org/d3.v7.min.js"&gt;&lt;/script&gt;
  &lt;style&gt;
    body {
      font-family: sans-serif;
      text-align: center;
      padding: 40px;
    }

    svg {
      border: 1px solid #ccc;
      display: block;
      margin: 0 auto;
    }
  &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;

  &lt;h1&gt;D3 Easing Functions Animation&lt;/h1&gt;
  &lt;svg width="600" height="100"&gt;&lt;/svg&gt;

  &lt;script&gt;
    const svg = d3.select('svg');

    const easingFunctions = [
      { name: 'easeLinear', func: d3.easeLinear },
      { name: 'easeCubicInOut', func: d3.easeCubicInOut },
      { name: 'easeBounce', func: d3.easeBounce },
    ];

    // Create circles
    const circles = svg.selectAll('circle')
      .data(easingFunctions)
      .enter()
      .append('circle')
      .attr('cx', 50)
      .attr('cy', (d, i) =&gt; 30 + i * 30)
      .attr('r', 12)
      .attr('fill', 'steelblue');

    // Create labels
    svg.selectAll('text')
      .data(easingFunctions)
      .enter()
      .append('text')
      .attr('x', 10)
      .attr('y', (d, i) =&gt; 30 + i * 30 + 5)
      .text(d =&gt; d.name) // FIXED HERE
      .attr('font-family', 'sans-serif')
      .attr('font-size', 12)
      .attr('fill', '#333');

    // Animate each circle individually using its own easing function
    function animate() {
      circles.each(function(d) {
        d3.select(this)
          .transition()
          .duration(2000)
          .ease(d.func) // FIXED HERE
          .attr('cx', 550)
          .transition()
          .duration(2000)
          .ease(d.func)
          .attr('cx', 50)
          .on('end', animate);
      });
    }

    animate();
  &lt;/script&gt;

&lt;/body&gt;
&lt;/html&gt;</textarea> <iframe id="0j74C_IFrame" class="iframe_dialog"></iframe>
   </div>
  </div>
 </div>
 <div class="snippet-header" onclick="toggleSnippetAndRefresh('JhPvB','szMus')">
  Click to Try it <!--<span onclick="toggleSnippetAndRefresh('JhPvB','szMus')">Click
			to Try it</span> --> <!-- <span onclick="openDialog('0j74C_Dialog')">Dialog</span> -->
 </div>
 <div class="snippet-body"><textarea id="szMus">&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
&lt;head&gt;
  &lt;meta charset="UTF-8" /&gt;
  &lt;title&gt;D3 Easing Demo&lt;/title&gt;
  &lt;script src="https://d3js.org/d3.v7.min.js"&gt;&lt;/script&gt;
  &lt;style&gt;
    body {
      font-family: sans-serif;
      text-align: center;
      padding: 40px;
    }

    svg {
      border: 1px solid #ccc;
      display: block;
      margin: 0 auto;
    }
  &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;

  &lt;h1&gt;D3 Easing Functions Animation&lt;/h1&gt;
  &lt;svg width="600" height="100"&gt;&lt;/svg&gt;

  &lt;script&gt;
    const svg = d3.select('svg');

    const easingFunctions = [
      { name: 'easeLinear', func: d3.easeLinear },
      { name: 'easeCubicInOut', func: d3.easeCubicInOut },
      { name: 'easeBounce', func: d3.easeBounce },
    ];

    // Create circles
    const circles = svg.selectAll('circle')
      .data(easingFunctions)
      .enter()
      .append('circle')
      .attr('cx', 50)
      .attr('cy', (d, i) =&gt; 30 + i * 30)
      .attr('r', 12)
      .attr('fill', 'steelblue');

    // Create labels
    svg.selectAll('text')
      .data(easingFunctions)
      .enter()
      .append('text')
      .attr('x', 10)
      .attr('y', (d, i) =&gt; 30 + i * 30 + 5)
      .text(d =&gt; d.name) // FIXED HERE
      .attr('font-family', 'sans-serif')
      .attr('font-size', 12)
      .attr('fill', '#333');

    // Animate each circle individually using its own easing function
    function animate() {
      circles.each(function(d) {
        d3.select(this)
          .transition()
          .duration(2000)
          .ease(d.func) // FIXED HERE
          .attr('cx', 550)
          .transition()
          .duration(2000)
          .ease(d.func)
          .attr('cx', 50)
          .on('end', animate);
      });
    }

    animate();
  &lt;/script&gt;

&lt;/body&gt;
&lt;/html&gt;</textarea> <br> <button onclick="renderIframe(this,'szMus','0j74C')">Run</button>
  <div id="0j74C_FloatingLog" class="floatingLog" aria-live="polite" role="alert"></div> <iframe id="0j74C" class="result_iframe" style="display: none;"></iframe>
  <script>
			{
				let editor = CodeMirror.fromTextArea(document
						.getElementById("szMus"), {
					mode : "htmlmixed",
					lineNumbers : false,
					tabSize : 2
				});
			    const mode = localStorage.getItem("mode") || "light";  
			    const newTheme = mode === "dark" ? "material" : "default";
			    editor.setOption("theme", newTheme);
			    
				codeMirrorMap.set("szMus", editor);

				let editor1 = CodeMirror.fromTextArea(document.getElementById("szMus_Textarea"), {
					mode : "htmlmixed",
					lineNumbers : false,
					tabSize : 2
				});
			    editor1.setOption("theme", newTheme);				
				
				codeMirrorMap.set("szMus_Textarea", editor1);
			}
		    function openDialog(id) {
		        closeAll();
		        document.getElementById(id).style.display = 'flex';
		        setTimeout(() => {
		        	 codeMirrorMap.get("szMus_Textarea").refresh();
		        }, 100); // 100ms 
		      }

		      function closeAll() {
		        document.querySelectorAll('.dialog-backdrop').forEach(el => {
		          el.style.display = 'none';
		        });
		      }			
		</script>
 </div>
</div><h3 id="what-youll-see">What Youll See</h3><ul>
 <li>The <strong>top circle</strong> moves at a constant speed (<code>easeLinear</code>).</li>
 <li>The <strong>middle circle</strong> starts and ends slowly but moves fastest in the middle (<code>easeCubicInOut</code>).</li>
 <li>The <strong>bottom circle</strong> “bounces” as it reaches the end position (<code>easeBounce</code>).</li>
</ul><p>The looped animation demonstrates how easing functions can completely change the feel of a motion.</p><h3 id="when-to-use-different-easing-styles">When to Use Different Easing Styles</h3><ul>
 <li>Use <strong>linear easing</strong> for simple, uniform movements.</li>
 <li>Use <strong>cubic or quadratic easing</strong> for smooth and natural acceleration/deceleration.</li>
 <li>Use <strong>bounce or elastic easing</strong> for playful or attention-grabbing effects.</li>
 <li>Match easing style to the story your visualization wants to tell.</li>
</ul><h3 id="summary">Summary</h3><ul>
 <li>Easing functions control the pacing of animations.</li>
 <li>D3 offers a rich library of easing options (<code>easeLinear</code>, <code>easeCubicInOut</code>, <code>easeBounce</code>, etc.).</li>
 <li>Apply easing with <code>.ease()</code> inside a transition.</li>
 <li>Experiment with easing to create animations that feel natural, smooth, or dramatic.</li>
 <li>Visual comparisons help in choosing the right easing for your visualization.</li>
</ul><div class = "chapter-navi-section">
<a href="#top" class="nav-button prev">↑</a>
<a href='javascript-data-visualization.htm#d3-js-animating-data' class="nav-button toc-link">Index</a>
<a href="#bottom" class="nav-button next">↓</a>
</div>
<h2 id='animating-between-states'>7.3 Animating Between States</h2><p>One of the most powerful uses of animation in data visualization is smoothly transitioning between different <em>states</em> or <em>views</em> of the data. For example, toggling between monthly and yearly summaries, or morphing a stacked bar chart into a grouped bar chart.</p><p>This section guides you through structuring your code to animate between such states, focusing on:</p><ul>
 <li>Preparing data for different states,</li>
 <li>Interpolating values between states,</li>
 <li>Using D3’s transitions to smoothly morph chart elements,</li>
 <li>Writing clean, readable, and performant code.</li>
</ul><h3 id="understanding-state-transitions">Understanding State Transitions</h3><p>A <em>state</em> here means a particular arrangement or representation of your data in the visualization — for example:</p><ul>
 <li>Monthly sales shown as grouped bars,</li>
 <li>Yearly sales shown as stacked bars,</li>
 <li>Data sorted by one category versus another.</li>
</ul><p>Animating between these states involves changing attributes like position, height, color, or shape over time to help users visually track the transition.</p><h3 id="example-morphing-stacked-bars-to-grouped-bars">Example: Morphing Stacked Bars to Grouped Bars</h3><h4 id="data-setup">Data Setup</h4><p>Imagine sales data split by categories over months:</p><div class="code-block"><button class="copy-button" onclick="copyCode(this)">▯</button>
 <pre><code class="language-js">const data = [
  { month: 'Jan', A: 30, B: 20, C: 50 },
  { month: 'Feb', A: 40, B: 35, C: 25 },
  { month: 'Mar', A: 50, B: 30, C: 20 },
];
const categories = ['A', 'B', 'C'];</code></pre>
</div><p>You want to toggle between:</p><ul>
 <li><strong>Stacked bars</strong>: categories stacked vertically per month,</li>
 <li><strong>Grouped bars</strong>: categories grouped side-by-side per month.</li>
</ul><h4 id="preparing-scales">Preparing Scales</h4><div class="code-block"><button class="copy-button" onclick="copyCode(this)">▯</button>
 <pre><code class="language-js">const x0 = d3.scaleBand()
  .domain(data.map(d =&gt; d.month))
  .rangeRound([0, width])
  .paddingInner(0.1);

const x1 = d3.scaleBand()
  .domain(categories)
  .rangeRound([0, x0.bandwidth()])
  .padding(0.05);

const y = d3.scaleLinear()
  .rangeRound([height, 0])
  .domain([0, d3.max(data, d =&gt; d3.sum(categories, k =&gt; d[k]))]);</code></pre>
</div><h4 id="drawing-bars-in-stacked-mode">Drawing Bars in Stacked Mode</h4><p>Using D3’s <code>stack</code> function to compute stacked positions:</p><div class="code-block"><button class="copy-button" onclick="copyCode(this)">▯</button>
 <pre><code class="language-js">const stack = d3.stack()
  .keys(categories);

const series = stack(data);

svg.selectAll('g.layer')
  .data(series)
  .enter()
  .append('g')
  .attr('class', 'layer')
  .attr('fill', (d, i) =&gt; color(categories[i]))
  .selectAll('rect')
  .data(d =&gt; d)
  .enter()
  .append('rect')
  .attr('x', d =&gt; x0(d.data.month))
  .attr('y', d =&gt; y(d[1]))
  .attr('height', d =&gt; y(d[0]) - y(d[1]))
  .attr('width', x0.bandwidth());</code></pre>
</div><h4 id="transition-to-grouped-bars">Transition to Grouped Bars</h4><p>In grouped mode, each category’s bar sits side-by-side inside each month’s band:</p><div class="code-block"><button class="copy-button" onclick="copyCode(this)">▯</button>
 <pre><code class="language-js">function transitionGrouped() {
  y.domain([0, d3.max(data, d =&gt; d3.max(categories, key =&gt; d[key]))]);

  svg.selectAll('g.layer rect')
    .transition()
    .duration(750)
    .delay((d, i) =&gt; i * 20)
    .attr('x', d =&gt; x0(d.data.month) + x1(d3.select(d3.event.target.parentNode).datum().key))
    .attr('width', x1.bandwidth())
    .transition()
    .attr('y', d =&gt; y(d.data[d3.select(d3.event.target.parentNode).datum().key]))
    .attr('height', d =&gt; height - y(d.data[d3.select(d3.event.target.parentNode).datum().key]));
}</code></pre>
</div><p>Here, bars animate horizontally from full bandwidth (stacked) to smaller grouped widths, while adjusting vertical position and height.</p><h4 id="transition-to-stacked-bars">Transition to Stacked Bars</h4><p>To morph back:</p><div class="code-block"><button class="copy-button" onclick="copyCode(this)">▯</button>
 <pre><code class="language-js">function transitionStacked() {
  y.domain([0, d3.max(data, d =&gt; d3.sum(categories, k =&gt; d[k]))]);

  svg.selectAll('g.layer rect')
    .transition()
    .duration(750)
    .delay((d, i) =&gt; i * 20)
    .attr('x', d =&gt; x0(d.data.month))
    .attr('width', x0.bandwidth())
    .transition()
    .attr('y', d =&gt; y(d[1]))
    .attr('height', d =&gt; y(d[0]) - y(d[1]));
}</code></pre>
</div><p>Bars animate back to stacked vertical positions and widths.</p><div class="snippet-container" id="ZyUFh">
 <div id="GombQ_Dialog" class="dialog-backdrop">
  <div class="dialog">
   <h2>Dialog 1</h2>
   <div class="controls"><button onclick="renderIframe(this,'DbSbX_Textarea','GombQ_IFrame')">Run</button> <button onclick="closeAll()">Close</button>
   </div>
   <div class="dialog-content"><textarea id="DbSbX_Textarea" class="textarea_dialog" placeholder="Type HTML here...">&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
&lt;head&gt;
  &lt;meta charset="UTF-8" /&gt;
  &lt;title&gt;D3 Stacked ↔ Grouped Bar Transition&lt;/title&gt;
  &lt;script src="https://d3js.org/d3.v7.min.js"&gt;&lt;/script&gt;
  &lt;style&gt;
    body {
      font-family: sans-serif;
      text-align: center;
      padding: 40px;
    }
    button {
      margin: 10px;
      padding: 8px 16px;
      font-size: 14px;
      cursor: pointer;
    }
    svg {
      border: 1px solid #ccc;
      display: block;
      margin: 20px auto;
    }
  &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;

  &lt;h1&gt;Stacked ↔ Grouped Bar Chart&lt;/h1&gt;
  &lt;button onclick="transitionGrouped()"&gt;Grouped&lt;/button&gt;
  &lt;button onclick="transitionStacked()"&gt;Stacked&lt;/button&gt;
  &lt;svg width="600" height="400"&gt;&lt;/svg&gt;

  &lt;script&gt;
    const data = [
      { month: 'Jan', A: 30, B: 20, C: 50 },
      { month: 'Feb', A: 40, B: 35, C: 25 },
      { month: 'Mar', A: 50, B: 30, C: 20 },
    ];
    const categories = ['A', 'B', 'C'];

    const svg = d3.select('svg');
    const margin = { top: 20, right: 30, bottom: 40, left: 50 };
    const width = +svg.attr('width') - margin.left - margin.right;
    const height = +svg.attr('height') - margin.top - margin.bottom;

    const chart = svg.append('g')
      .attr('transform', `translate(${margin.left},${margin.top})`);

    const color = d3.scaleOrdinal()
      .domain(categories)
      .range(d3.schemeCategory10);

    const x0 = d3.scaleBand()
      .domain(data.map(d =&gt; d.month))
      .rangeRound([0, width])
      .paddingInner(0.1);

    const x1 = d3.scaleBand()
      .domain(categories)
      .rangeRound([0, x0.bandwidth()])
      .padding(0.05);

    const y = d3.scaleLinear()
      .rangeRound([height, 0])
      .domain([0, d3.max(data, d =&gt; d3.sum(categories, k =&gt; d[k]))]);

    chart.append('g')
      .attr('transform', `translate(0,${height})`)
      .call(d3.axisBottom(x0));

    const yAxis = chart.append('g')
      .call(d3.axisLeft(y));

    const stack = d3.stack().keys(categories);
    const series = stack(data);

    const groups = chart.selectAll('g.layer')
      .data(series)
      .enter()
      .append('g')
      .attr('class', 'layer')
      .attr('fill', d =&gt; color(d.key));

    const rects = groups.selectAll('rect')
      .data(d =&gt; d.map(v =&gt; Object.assign({}, v, { key: d.key })))
      .enter()
      .append('rect')
      .attr('x', d =&gt; x0(d.data.month))
      .attr('y', d =&gt; y(d[1]))
      .attr('height', d =&gt; y(d[0]) - y(d[1]))
      .attr('width', x0.bandwidth());

    function transitionGrouped() {
      y.domain([0, d3.max(data, d =&gt; d3.max(categories, key =&gt; d[key]))]);
      yAxis.transition().duration(750).call(d3.axisLeft(y));

      rects.transition()
        .duration(750)
        .attr('x', d =&gt; x0(d.data.month) + x1(d.key))
        .attr('width', x1.bandwidth())
        .attr('y', d =&gt; y(d.data[d.key]))
        .attr('height', d =&gt; height - y(d.data[d.key]));
    }

    function transitionStacked() {
      y.domain([0, d3.max(data, d =&gt; d3.sum(categories, k =&gt; d[k]))]);
      yAxis.transition().duration(750).call(d3.axisLeft(y));

      rects.transition()
        .duration(750)
        .attr('x', d =&gt; x0(d.data.month))
        .attr('width', x0.bandwidth())
        .attr('y', d =&gt; y(d[1]))
        .attr('height', d =&gt; y(d[0]) - y(d[1]));
    }
  &lt;/script&gt;

&lt;/body&gt;
&lt;/html&gt;</textarea> <iframe id="GombQ_IFrame" class="iframe_dialog"></iframe>
   </div>
  </div>
 </div>
 <div class="snippet-header" onclick="toggleSnippetAndRefresh('ZyUFh','DbSbX')">
  Click to Try it <!--<span onclick="toggleSnippetAndRefresh('ZyUFh','DbSbX')">Click
			to Try it</span> --> <!-- <span onclick="openDialog('GombQ_Dialog')">Dialog</span> -->
 </div>
 <div class="snippet-body"><textarea id="DbSbX">&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
&lt;head&gt;
  &lt;meta charset="UTF-8" /&gt;
  &lt;title&gt;D3 Stacked ↔ Grouped Bar Transition&lt;/title&gt;
  &lt;script src="https://d3js.org/d3.v7.min.js"&gt;&lt;/script&gt;
  &lt;style&gt;
    body {
      font-family: sans-serif;
      text-align: center;
      padding: 40px;
    }
    button {
      margin: 10px;
      padding: 8px 16px;
      font-size: 14px;
      cursor: pointer;
    }
    svg {
      border: 1px solid #ccc;
      display: block;
      margin: 20px auto;
    }
  &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;

  &lt;h1&gt;Stacked ↔ Grouped Bar Chart&lt;/h1&gt;
  &lt;button onclick="transitionGrouped()"&gt;Grouped&lt;/button&gt;
  &lt;button onclick="transitionStacked()"&gt;Stacked&lt;/button&gt;
  &lt;svg width="600" height="400"&gt;&lt;/svg&gt;

  &lt;script&gt;
    const data = [
      { month: 'Jan', A: 30, B: 20, C: 50 },
      { month: 'Feb', A: 40, B: 35, C: 25 },
      { month: 'Mar', A: 50, B: 30, C: 20 },
    ];
    const categories = ['A', 'B', 'C'];

    const svg = d3.select('svg');
    const margin = { top: 20, right: 30, bottom: 40, left: 50 };
    const width = +svg.attr('width') - margin.left - margin.right;
    const height = +svg.attr('height') - margin.top - margin.bottom;

    const chart = svg.append('g')
      .attr('transform', `translate(${margin.left},${margin.top})`);

    const color = d3.scaleOrdinal()
      .domain(categories)
      .range(d3.schemeCategory10);

    const x0 = d3.scaleBand()
      .domain(data.map(d =&gt; d.month))
      .rangeRound([0, width])
      .paddingInner(0.1);

    const x1 = d3.scaleBand()
      .domain(categories)
      .rangeRound([0, x0.bandwidth()])
      .padding(0.05);

    const y = d3.scaleLinear()
      .rangeRound([height, 0])
      .domain([0, d3.max(data, d =&gt; d3.sum(categories, k =&gt; d[k]))]);

    chart.append('g')
      .attr('transform', `translate(0,${height})`)
      .call(d3.axisBottom(x0));

    const yAxis = chart.append('g')
      .call(d3.axisLeft(y));

    const stack = d3.stack().keys(categories);
    const series = stack(data);

    const groups = chart.selectAll('g.layer')
      .data(series)
      .enter()
      .append('g')
      .attr('class', 'layer')
      .attr('fill', d =&gt; color(d.key));

    const rects = groups.selectAll('rect')
      .data(d =&gt; d.map(v =&gt; Object.assign({}, v, { key: d.key })))
      .enter()
      .append('rect')
      .attr('x', d =&gt; x0(d.data.month))
      .attr('y', d =&gt; y(d[1]))
      .attr('height', d =&gt; y(d[0]) - y(d[1]))
      .attr('width', x0.bandwidth());

    function transitionGrouped() {
      y.domain([0, d3.max(data, d =&gt; d3.max(categories, key =&gt; d[key]))]);
      yAxis.transition().duration(750).call(d3.axisLeft(y));

      rects.transition()
        .duration(750)
        .attr('x', d =&gt; x0(d.data.month) + x1(d.key))
        .attr('width', x1.bandwidth())
        .attr('y', d =&gt; y(d.data[d.key]))
        .attr('height', d =&gt; height - y(d.data[d.key]));
    }

    function transitionStacked() {
      y.domain([0, d3.max(data, d =&gt; d3.sum(categories, k =&gt; d[k]))]);
      yAxis.transition().duration(750).call(d3.axisLeft(y));

      rects.transition()
        .duration(750)
        .attr('x', d =&gt; x0(d.data.month))
        .attr('width', x0.bandwidth())
        .attr('y', d =&gt; y(d[1]))
        .attr('height', d =&gt; y(d[0]) - y(d[1]));
    }
  &lt;/script&gt;

&lt;/body&gt;
&lt;/html&gt;</textarea> <br> <button onclick="renderIframe(this,'DbSbX','GombQ')">Run</button>
  <div id="GombQ_FloatingLog" class="floatingLog" aria-live="polite" role="alert"></div> <iframe id="GombQ" class="result_iframe" style="display: none;"></iframe>
  <script>
			{
				let editor = CodeMirror.fromTextArea(document
						.getElementById("DbSbX"), {
					mode : "htmlmixed",
					lineNumbers : false,
					tabSize : 2
				});
			    const mode = localStorage.getItem("mode") || "light";  
			    const newTheme = mode === "dark" ? "material" : "default";
			    editor.setOption("theme", newTheme);
			    
				codeMirrorMap.set("DbSbX", editor);

				let editor1 = CodeMirror.fromTextArea(document.getElementById("DbSbX_Textarea"), {
					mode : "htmlmixed",
					lineNumbers : false,
					tabSize : 2
				});
			    editor1.setOption("theme", newTheme);				
				
				codeMirrorMap.set("DbSbX_Textarea", editor1);
			}
		    function openDialog(id) {
		        closeAll();
		        document.getElementById(id).style.display = 'flex';
		        setTimeout(() => {
		        	 codeMirrorMap.get("DbSbX_Textarea").refresh();
		        }, 100); // 100ms 
		      }

		      function closeAll() {
		        document.querySelectorAll('.dialog-backdrop').forEach(el => {
		          el.style.display = 'none';
		        });
		      }			
		</script>
 </div>
</div><h3 id="key-points-for-smooth-animation">Key Points for Smooth Animation</h3><ul>
 <li><strong>Data binding consistency</strong>: Ensure that your data join uses a consistent key function so D3 can match elements across states.</li>
 <li><strong>Interpolating attributes</strong>: Animate <code>x</code>, <code>y</code>, <code>width</code>, and <code>height</code> attributes smoothly.</li>
 <li><strong>Adjust scales</strong>: Update your scales’ domains to fit new data ranges for each state.</li>
 <li><strong>Use delays</strong>: Staggering transitions can improve visual clarity.</li>
 <li><strong>Separate logic</strong>: Keep your transition functions modular for readability and maintenance.</li>
</ul><h3 id="summary">Summary</h3><ul>
 <li>Animating between states enhances comprehension by visually connecting views.</li>
 <li>Structure code to prepare data and scales for each state.</li>
 <li>Use D3 transitions to smoothly interpolate attributes like position and size.</li>
 <li>Keep data joins consistent and update scales appropriately.</li>
 <li>Write modular transition functions for clarity and performance.</li>
</ul><div class = "chapter-navi-section">
<a href="javascript-data-visualization-d3-js-adding-interactivity.htm" class="nav-button prev">←</a>
<a href='javascript-data-visualization.htm#d3-js-animating-data' class="nav-button toc-link">Index</a>
<a href="javascript-data-visualization-chart-js.htm" class="nav-button next">→</a>
</div>
<section class="download-section">
  <div class="book-cover" style="background-color: #f9f6f1;border: 1px solid #ccc;"> 
    <div class="book-cover-title" style="font-size: 16px;color: #333;top: 20px;">JavaScript Data Visualization</div>
    <div class="book-cover-author">readbytes</div>
    <div class="book-cover-bottom-stripe" style="background-color: #333;"></div>
    <img class="book-cover-icon" style="width: 90px;height: 90px;top: 60px;" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFoAAABaCAYAAAA4qEECAAAC0UlEQVR4Xu3dMWsUURSG4fwr2U6zJI0WKZSAaa0EG7tU2giWimLETrQQQRCxUDsbK3+IYOWCiFU06IQz356ZuffOvXdm4A28ze585OxDsLDZnR3zs1pf+rHavXhKWdpY2/Mf50HKEMgV+4cs/1z8/v6OMiTYm9Zfsz5M42r9VQNdLqArBXSlgK4U0JUCulKLgrb39aW7ObQY6PXl/S3Qrs6e1f3ULQZaMYfS/dTZ2xYDvff6g9tS7ge6YEBXCuhKAV0poCsFdKWArtQk0G9e3Tt9dnLc2+dPD1sboCOzv2Ool8/vujsFBtpJMYfydgoMtFMqWOpuLtnbgC6YvQ3ogtnbgC6YvQ3ogtnbgC6YvQ3ogtnbgC6YvQ3ogtnboqCvHR20xn11/UKF6gNL3Y1JP0dXV68fbG01+3wUtP6yvp4+OXZ3CtUHlrpL7ew/tvRz9KV7zT4LtGmW0O+/fnRr3l86tH4u/Xwhv88+C7QJ6MhdakBH7lIDOnKXGtCRu9SAjtylBnTkLjWgI3e67evnt7fnG6BH7EJqdkCP2IXU7IAesft169DN2wE9YqfAQDt35NgpMNDOHTl2Cgy0c0eOnQID7dxhXwvJ2ykw0M4d9rWQvJ0CA+3cYV8LydspMNDOHfa1C/cfuQ3tFBho5w77mgID/f99oCeGDsnbKXBp6JDUR7PPAm12QO8CvVXzfhe0QoWC6fOhOwUOhX7w4rGbt+vKPgu02QE9YqfAi4Meai7QITU7oEfsQmp2s4S+cfumW/P+XKDvXFm7ebtZQusBeshcoL8c7rt5O6BH7BQYaOeOHDsFBtq5I8dOgYF27sixU2CgnTty7BQYaOeOHDsFBtq5I8dOgRcHPVQXdEhT7Wb536RDAQ30Vs1uNtAUF9CVArpSQFcK6EoBXSmgK9WG5qtQi2RNV803KsuLlDn7RcpgF6qF3Pz8fWOjD1JyrS9g/wOlHj3Oru4PcQAAAABJRU5ErkJggg=="/>
  </div>
  <div class="download-info">
    <h2 id='bottom'>Download This Ebook</h2>
    <p class="format-label">Available formats:</p>
    <div class="download-buttons">
      <a href="javascript-data-visualization.pdf" class="download-button">📄 PDF</a>
      <a href="javascript-data-visualization.epub" class="download-button">📘 EPUB</a>
    </div>
  </div>
</section><div class='related-books'>
<h2>Javascript Web Front Books</h2>
<div class='related-book-list'>
<a href="javascript-canvas-programming.htm">
<div class="book-cover" style="background-color: #f9f6f1;border: 1px solid #ccc;"> 
    <div class="book-cover-title" style="font-size: 16px;color: #333;top: 10px;">JavaScript Canvas Programming</div>
    <div class="book-cover-author">readbytes</div>
    <div class="book-cover-bottom-stripe" style="background-color: #333;"></div>
    <img class="book-cover-icon" style="width: 80px;height: 80px;top: 70px;" src='data:image/png;base64,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'/>
  </div>
</a>


<a href="javascript-dom-programming.htm">
<div class="book-cover" style="background-color: #f9f6f1;border: 1px solid #ccc;"> 
    <div class="book-cover-title" style="font-size: 16px;color: #333;top: 20px;">JavaScript DOM Programming</div>
    <div class="book-cover-author">readbytes</div>
    <div class="book-cover-bottom-stripe" style="background-color: #333;"></div>
    <img class="book-cover-icon" style="width: 90px;height: 90px;top: 60px;" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFoAAABaCAYAAAA4qEECAAADUklEQVR4Xu2dv47TQBDGI0RDczY9rwMlrwEFBweC/t4EXRwaXuI6WiSaOLkCIZ6BCqTgPRFr8zkbnPF4Zuydn/RVuzsz33eSlX/2LRYRm1Xxe1MVOzY19eL6/6NzfqCw/ilEvXc2Mwh7pNiuyks8O1T1snyNfVLgWQ5hjxbcyCHskaJelVd4drCW5Vvsk6JzlkHYo6XXph5Q6hwEfUZASDhLqUOZ+Ri96vTa1ANKHQ+aAKWOB02AUseDJkCp40EToNTxoAlQ6njQBCh1PGgClDrZBs0l7JEi23eGXMIeKTbVxSs8O1Trm4tL7JMCz3IIe7Rsq+IXbh6iUA97nALPDxXWP4W29w5xMVwbG67rOBVR76LNAA9aiKyCbq49L0QbRmgGHXuul8VLXB+F3IPGtdGIm0o21gpay+89Gs01gtbwecDPz08eSQ8hHTT6C55xjwh3q+IZDhO0u148wL0cSAR93cyOfoKCV9wryu528RCHmpuCR/StRvOy7w8OOHUFT+jTDHdV+RwHnpqCB/SVFRLXaGfhQYvhQQvhQQvhQQvhQf8DXyZNXehPnW+fisc45FwUvKFfNXC4uQn9qvD1Y1maG4qB2NP3xiOui1NX5Zv9QNuq+IDrU6Xx8n7vq16WV7guTvxKYH1TvsP1qWLOl7mBmDDny9xATJjzZW4gJsz5MjcQE+Z8mRuICXO+zA3EhDlf5gZiwpwvcwMxYc6XuYGYMOfL3EBMmPNlbiAmzPkyNxAT5nyZG4gJc778Y1Ih/IN/QeKh5ij0q8acv5z9YenL2T045NSF/rIhfiWQ9Q9oxsaDFsKDFsKDFsKDFsKDjqj9ZqFx8dvfRubWb+gcn+Yv/hSHuh9swrcoh9nRT5DaLcpf/KZ7GXAIXB8D6aADGj5btJprBB3Q8nvQGNfGRCvogLjntT+8SubhVVohBzSDDoh6F20GeNBCzCZo7Qeh4vmhwvqnEPWOmzmEPVJk9Vhj3Mgh7JHi4LLApTMuL52zDMIeLb029YBSh+v6G85S6lBmPkavOr029YBSx4MmQKnjQROg1PGgCVDqeNAEKHU8aAKUOh40AUodD5oApU62QXMJe6TI9p0hl7BHitz+XTX3j2DO+gHKkfODhPVPsRnZ+1+tJg8Iaaje6wAAAABJRU5ErkJggg=="/>
  </div>
</a>


<a href="javascript-data-visualization.htm">
<div class="book-cover" style="background-color: #f9f6f1;border: 1px solid #ccc;"> 
    <div class="book-cover-title" style="font-size: 16px;color: #333;top: 20px;">JavaScript Data Visualization</div>
    <div class="book-cover-author">readbytes</div>
    <div class="book-cover-bottom-stripe" style="background-color: #333;"></div>
    <img class="book-cover-icon" style="width: 90px;height: 90px;top: 60px;" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFoAAABaCAYAAAA4qEECAAAC0UlEQVR4Xu3dMWsUURSG4fwr2U6zJI0WKZSAaa0EG7tU2giWimLETrQQQRCxUDsbK3+IYOWCiFU06IQz356ZuffOvXdm4A28ze585OxDsLDZnR3zs1pf+rHavXhKWdpY2/Mf50HKEMgV+4cs/1z8/v6OMiTYm9Zfsz5M42r9VQNdLqArBXSlgK4U0JUCulKLgrb39aW7ObQY6PXl/S3Qrs6e1f3ULQZaMYfS/dTZ2xYDvff6g9tS7ge6YEBXCuhKAV0poCsFdKWArtQk0G9e3Tt9dnLc2+dPD1sboCOzv2Ool8/vujsFBtpJMYfydgoMtFMqWOpuLtnbgC6YvQ3ogtnbgC6YvQ3ogtnbgC6YvQ3ogtnbgC6YvQ3ogtnboqCvHR20xn11/UKF6gNL3Y1JP0dXV68fbG01+3wUtP6yvp4+OXZ3CtUHlrpL7ew/tvRz9KV7zT4LtGmW0O+/fnRr3l86tH4u/Xwhv88+C7QJ6MhdakBH7lIDOnKXGtCRu9SAjtylBnTkLjWgI3e67evnt7fnG6BH7EJqdkCP2IXU7IAesft169DN2wE9YqfAQDt35NgpMNDOHTl2Cgy0c0eOnQID7dxhXwvJ2ykw0M4d9rWQvJ0CA+3cYV8LydspMNDOHfa1C/cfuQ3tFBho5w77mgID/f99oCeGDsnbKXBp6JDUR7PPAm12QO8CvVXzfhe0QoWC6fOhOwUOhX7w4rGbt+vKPgu02QE9YqfAi4Meai7QITU7oEfsQmp2s4S+cfumW/P+XKDvXFm7ebtZQusBeshcoL8c7rt5O6BH7BQYaOeOHDsFBtq5I8dOgYF27sixU2CgnTty7BQYaOeOHDsFBtq5I8dOgRcHPVQXdEhT7Wb536RDAQ30Vs1uNtAUF9CVArpSQFcK6EoBXSmgK9WG5qtQi2RNV803KsuLlDn7RcpgF6qF3Pz8fWOjD1JyrS9g/wOlHj3Oru4PcQAAAABJRU5ErkJggg=="/>
  </div>
</a>


<a href="jquery-in-depth.htm">
<div class="book-cover" style="background-color: #f9f6f1;border: 1px solid #ccc;"> 
    <div class="book-cover-title" style="font-size: 18px;color: #333;top: 20px;">jQuery In-Depth</div>
    <div class="book-cover-author">readbytes</div>
    <div class="book-cover-bottom-stripe" style="background-color: #333;"></div>
    <img class="book-cover-icon" style="width: 90px;height: 90px;top: 65px;" src='data:image/png;base64,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'/>
  </div>
</a>



<a href='javascript.htm'><div class='book-cover' style='background-color: #f9f6f1;color: #111111;border: 1px solid #ccc;display: flex;justify-content: center;align-items: center;text-align: center;'>More Javascript Books</div></a>
</div>
</div>
  </div>
  <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/prism.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
  
  <script>
    function copyCode(button) {
      const code = button.nextElementSibling.innerText;
      navigator.clipboard.writeText(code).then(() => {
        button.textContent = 'Copied!';
        setTimeout(() => { button.textContent = 'Copy'; }, 1500);
      });
    }
  </script>  
<div id="floatingLog" aria-live="polite" role="alert"></div>
<footer class="page-footer">
    <nav>
      <a href="https://readbytes.github.io">Home</a> | 
      Email:<script language="JavaScript" type="text/javascript">
var part1 = 'yinpeng';var part6 = '263';var part2 = Math.pow(2,6);var part3 = String.fromCharCode(part2);var part4 = 'hotmail dot com';var part5 = part1 + String.fromCharCode(part2) + part4;document.write(part1 + part6 + part3 + part4);
</script>
    </nav>
  <p>© 2025 — All rights reserved.</p>    
  </footer>

</body>
</html>