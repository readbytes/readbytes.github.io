<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>JavaScript Data Visualization Cryptocurrency Price Visualizer</title>
<link rel='shortcut icon' href='https://java2s.com/style/favicon.ico'>
<link href="https://fonts.googleapis.com/css2?family=Merriweather&display=swap" rel="stylesheet" />
<link href="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet" />
<script type='text/javascript' async src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML'></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/codemirror.min.css" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/theme/material.css"> <!-- Dark theme -->
<script src="https://cdn.jsdelivr.net/npm/typescript@5/lib/typescript.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/codemirror.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/mode/htmlmixed/htmlmixed.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/mode/xml/xml.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/mode/css/css.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/mode/javascript/javascript.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/mode/javascript/typescript.min.js"></script>
<style>
    #floatingLog {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: rgba(20, 20, 20, 0.95);
      color: white;
      font-family: monospace;
      font-size: 14px;
      padding: 16px 20px;
      border-radius: 8px;
      box-shadow: 0 4px 16px rgba(0, 0, 0, 0.4);
      max-width: 80%;
      max-height: 200px;
      overflow-y: auto;
      display: none;
      z-index: 9999;
      pointer-events: none;
      white-space: pre-wrap;
      text-align: center;
    }
</style>
<script>
  const codeMirrorMap = new Map();
  const iframeMap = new Map();
  
 

  let dismissTimer;
  function showFloatingLog(message) {
	const floatingLog = document.getElementById('floatingLog');

    if (floatingLog.style.display !== 'block') {
      floatingLog.textContent = '';
      floatingLog.style.display = 'block'; 
    }

    floatingLog.textContent += message + '\n';
    floatingLog.scrollTop = floatingLog.scrollHeight; 
    clearTimeout(dismissTimer);
    dismissTimer = setTimeout(() => {
      floatingLog.style.display = 'none';
      floatingLog.textContent = '';
    }, 2000);
  }
  window.addEventListener('message', (event) => {
	    if (!iframeMap.has(event.source)) return;

	    if (event.data?.type === 'console-log') {
	      showFloatingLog(event.data.message);
	    }
  });  
  function renderIframe(button,textarea_id, iframe_id) {
      const html = codeMirrorMap.get(textarea_id).getValue();
      const iframe = document.getElementById(iframe_id);
  
      const oldIframe = iframe;
      const newIframe = document.createElement('iframe');
      newIframe.className ="result_iframe";
      
      newIframe.id = iframe_id;
      oldIframe.replaceWith(newIframe);
 

      // Track the iframe in the map
      iframeMap.set(newIframe.contentWindow, button);

      const overrideScript = `
        <script>
          (function() {
            const originalLog = console.log;
            console.log = function(...args) {
              originalLog.apply(console, args);
              window.parent.postMessage({
                type: 'console-log',
                message: args.map(a => {
                  try { return JSON.stringify(a); }
                  catch { return String(a); }
                }).join(' ')
              }, '*');
            };
          })();
        <\/script>
      `;

      const iframeHTML = `
        <!DOCTYPE html>
        <html>
        <body>
          ${overrideScript}
          ${html}
        </body>
        </html>
      `;
 
      const doc = newIframe.contentDocument || newIframe.contentWindow.document;
      doc.open();
      doc.write(iframeHTML);
      doc.close();

      
      setTimeout(() => {
    	  newIframe.style.height = '0px';
    	   let contentHeight = Math.max(doc.body.scrollHeight,doc.documentElement.scrollHeight);
    	   contentHeight = Math.max(contentHeight,400);
    	   contentHeight = Math.min(contentHeight,800);    	   
    	   newIframe.style.height = contentHeight + 'px';
    	}, 50);      
      
  }
  function renderIframeForClientTypescript(textarea_id, iframe_id) {
      let code = codeMirrorMap.get(textarea_id).getValue();
      code = ts.transpile(code);
      const iframe = document.getElementById(iframe_id);
      const doc = iframe.contentDocument || iframe.contentWindow.document;

const html = `
  <!DOCTYPE html>
  <html>
    <head>
      <title>Output</title>
      <style>
        body { font-family: monospace; padding: 1em; background: #f4f4f4; color: #222; }
        pre { white-space: pre-wrap; word-break: break-word; }
        .error { color: red; }
      </style>
    </head>
    <body>
      <pre id="log"></pre>
      <script>
        (function(){
          const logEl = document.getElementById('log');
          const origLog = console.log;
          const origError = console.error;

          console.log = (...args) => {
            logEl.textContent += args.join(' ') + '\\n';
            origLog.apply(console, args);
          };
          console.table = (...args) => {
            logEl.textContent += args.join(' ') + '\\n';
            origLog.apply(console, args);
          };

          console.error = (...args) => {
            logEl.innerHTML +='<span class="error">' + args.join(' ') + '</span>';
            origError.apply(console, args);
          };
          window.addEventListener("error", function (event) {
              console.error("Caught by event listener:", event.message);
          });    
          try {             
              ${code};
          } catch (err) {
            console.error(err.stack || err.message);
          }
        })();
      <\/script>
    </body>
  </html>
`;

      iframe.style.display = "block";
      iframe.srcdoc = html;  
  }

    function renderIframeForClientJavascript(textarea_id, iframe_id) {
        const code = codeMirrorMap.get(textarea_id).getValue();
        const iframe = document.getElementById(iframe_id);
        const doc = iframe.contentDocument || iframe.contentWindow.document;

  const html = `
    <!DOCTYPE html>
    <html>
      <head>
        <title>Output</title>
        <style>
          body { font-family: monospace; padding: 1em; background: #1e1e1e; color: #eee; }
          pre { white-space: pre-wrap; word-break: break-word; }
          .error { color: red; }
        </style>
      </head>
      <body>
        <pre id="log"></pre>
        <script>
          (function(){
            const logEl = document.getElementById('log');
            const origLog = console.log;
            const origError = console.error;

            console.log = (...args) => {
              logEl.textContent += args.join(' ') + '\\n';
              origLog.apply(console, args);
            };
            console.table = (...args) => {
              logEl.textContent += args.join(' ') + '\\n';
              origLog.apply(console, args);
            };

            console.error = (...args) => {
              logEl.innerHTML +='<span class="error">' + args.join(' ') + '</span>';
              origError.apply(console, args);
            };
            window.addEventListener("error", function (event) {
                console.error("Caught by event listener:", event.message);
            });    
            try {
             ${code}; 
            } catch (err) {
              console.error(err.stack || err.message);
            }
          })();
        <\/script>
      </body>
    </html>
  `;
        iframe.style.display = "block";
        iframe.srcdoc = html;  
    }
    function toggleSnippetAndRefresh(id, textarea_id) {
      const box = document.getElementById(id);
      box.classList.toggle("open");
      codeMirrorMap.get(textarea_id).refresh();
    }

  </script>
  <script>
  const mode = localStorage.getItem('mode') || 'light';
  document.documentElement.classList.add(`${mode}-mode`);
  </script>   
<style> 
html {
  scroll-behavior: smooth;
}

body {
  font-family: 'Merriweather', serif;
  margin: 0;
  padding: 2rem 1rem;
  font-size: 15px;
  line-height: 1.5;
  transition: background-color 0.3s, color 0.3s;
}

.container {
  max-width: 700px;
  margin: 0 auto;
  padding: 1rem 2rem;
  box-shadow: 0 0 15px rgba(0,0,0,0.1);
}

h1, h2, h3 {
  font-weight: 600;
  margin-top: 2.5rem;
  margin-bottom: 1rem;
  line-height: 1.2;
}

h1 { font-size: 1.8rem; }
h2 { font-size: 1.4rem; }
h3 { font-size: 1.2rem; }

table {
  width: 100%;
  border-collapse: collapse;
  font-family: sans-serif;
  font-size: 1em;
  margin: 1em 0;
}

th, td {
  padding: 0.6em 1em;
  text-align: left;
  border: 1px solid;
}

tr:nth-child(even) {
  background-color: inherit;
}

tr:hover {
  background-color: inherit;
}

a {
  text-decoration: none;
  transition: color 0.2s;
}

a:hover {
  text-decoration: underline;
}

code {
  color: #d35400;
}

.book-title-chapter {
  font-family: 'Merriweather', serif;
  font-size: 2rem;
  font-weight: bold;
  text-align: center;
  margin-bottom: 2rem;
  border-bottom: 2px solid;
  padding-bottom: 0.5rem;
}

.book-subtitle-chapter {
  text-align: center;
  font-size: 1rem;
  margin-top: -1rem;
  margin-bottom: 2rem;
}

.related-books {
  margin-top: 40px;
}

.related-book-list {
  display: flex;
  flex-wrap: wrap;
  gap: 20px;
}

    .book-cover {
      width: 130px;
      height: 180px;
      font-family: Arial, sans-serif;
      position: relative;
      overflow: hidden;      
      line-height: normal;
      box-shadow: 2px 2px 4px rgba(0,0,0,0.1);
    }
    .book-cover-bottom-stripe {
      position: absolute;
      bottom: 0;
      left: 0;
      height: 5px;
      width: 100%;
    }
    .book-cover-title {
      position: absolute;
      width: 100%;
      text-align: center;
      font-weight: bold;
    }
     
    .book-cover-icon {
      position: absolute;
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      align-items: center;
      justify-content: center; 
    }

    .book-cover-author {
      position: absolute;
      bottom: 10px;
      width: 100%;
      text-align: center;
      font-size: 8px;
      color: #333;
    }

.page-footer {
  margin-top: 4rem;
  padding: 1rem 0;
  text-align: center;
  font-size: 0.85rem;
  border-top: 1px solid;
}

.chapter-navi-section {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding-bottom: 10px;
}

.nav-link {
  color: inherit;
  text-decoration: none;
  opacity: 0.5;
  transition: opacity 0.3s ease, text-decoration 0.3s ease;
}

.nav-link:hover {
  opacity: 0.9;
  text-decoration: underline;
}

.prev { text-align: left; }
.toc-link { text-align: center; }
.next { text-align: right; }

.download-section {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 2rem;
  padding: 2rem 1rem;
  max-width: 600px;
  margin: 3rem auto;
  border-radius: 12px;
  box-shadow: 0 4px 10px rgba(0,0,0,0.05);
}

.download-info h2 {
  margin: 0 0 0.5rem;
  font-size: 1.2rem;
}

.format-label {
  margin: 0 0 0.5rem;
  font-size: 0.95rem;
}

.download-buttons {
  display: flex;
  gap: 1rem;
}

.download-button {
  background-color: #4A90E2;
  color: white;
  padding: 0.5em 1.2em;
  border-radius: 25px;
  font-size: 0.95rem;
  text-decoration: none;
  transition: background-color 0.3s ease;
}

.download-button:hover {
  background-color: #357ABD;
}

.code-block {
  position: relative;
  margin-bottom: 1em;
}

.copy-button {
  background: transparent;
  color: white;
  position: absolute;
  top: 8px;
  right: 8px;
  border: none;
  padding: 4px 8px;
  font-size: 12px;
  border-radius: 4px;
  cursor: pointer;
  z-index: 1;
}

.copy-button:hover {
  background-color: #0056b3;
}

.snippet-container {
  overflow: hidden;
}

.snippet-header {
  padding: 0.75rem 1rem;
  cursor: pointer;
  font-size: 1rem;
    background-color: #eeeeee;
    color:  #111111; 
    border-radius: 8px;
    cursor: pointer;
    box-shadow: 0 4px 6px rgba(0,0,0,0.1);  
}

.snippet-body {
  display: none;
  font-family: monospace;
}

.snippet-container.open .snippet-body {
  display: block;
}

.CodeMirror {
  border: 2px solid #ccc;
  border-radius: 4px;
  resize: vertical;
}

/* === Light Mode === */
html.light-mode {
  background-color: #f8f7f5;
  color: #333;
}

html.light-mode .container {
  background: white;
}

html.light-mode .book-title-chapter {
  color: #2c3e50;
  border-color: #ccc;
}
html.light-mode .book-subtitle-chapter{
  color: #888;
}

html.light-mode .page-footer,
html.light-mode .series-name,
html.light-mode .book-subtitle,
html.light-mode .format-label {
  color: #888;
}

html.light-mode .related-books h2 {
  color: #333;
  border-bottom: 2px solid #eee;
}

html.light-mode .book-title {
  color: #fff;
}

html.light-mode .book-cover {
  border: 1px solid #ccc;
}

html.light-mode th {
  background-color: #f2f2f2;
}

html.light-mode tr:nth-child(even) {
  background-color: #fafafa;
}

html.light-mode tr:hover {
  background-color: #e6f7ff;
}

html.light-mode a,
html.light-mode .page-footer a {
  color: #000;
}

/* === Dark Mode === */
html.dark-mode {
  background-color: #181818;
  color: #e0e0e0;
}

html.dark-mode .container {
  background: #222;
}

html.dark-mode .book-title-chapter {
  color: #ddd;
  border-color: #444;
}

html.dark-mode .snippet-header {
    background-color: #333;
    color:  #ddd; 
}


html.dark-mode .book-subtitle-chapter,
html.dark-mode .page-footer,
html.dark-mode .series-name,
html.dark-mode .book-subtitle,
html.dark-mode .book-footer,
html.dark-mode .format-label {
  color: #aaa;
}

html.dark-mode .related-books h2 {
  color: #ddd;
  border-bottom: 2px solid #333;
}

html.dark-mode .book-title {
  color: #fff;
}

html.dark-mode .book-cover {
  border: 1px solid #555;
}

html.dark-mode th {
  background-color: #333;
  color: #fff;
}

html.dark-mode td {
  border-color: #444;
}

html.dark-mode tr:nth-child(even) {
  background-color: #2a2a2a;
}

html.dark-mode tr:hover {
  background-color: #2c3e50;
}

html.dark-mode a,
html.dark-mode .page-footer a {
  color: #eee;
}

    .dialog-backdrop {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      background: rgba(0,0,0,0.5);
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 10;
    }

    .dialog {
      background: white;
      padding: 20px;
      width: 90vw;
      height: 80vh;
      border-radius: 8px;
      box-shadow: 0 0 20px rgba(0,0,0,0.3);
      display: flex;
      flex-direction: column;
    }
    .dialog-content {
      display: flex;
      flex: 1;
      gap: 20px;
      margin-top: 10px;
    }
    .dialog h2 {
      margin-top: 0;
    }

    .textarea_dialog {
      width: 50%;
      height: 100%;
      resize: none;
      font-family: monospace;
      font-size: 14px;
      padding: 10px;
      box-sizing: border-box;
      border: 1px solid #ccc;
    }

    .iframe_dialog {
      width: 50%;
      height: 100%;
      border: 1px solid #ccc;
    }
    .controls_dialog {
      display: flex;
      justify-content: space-between;
      margin-top: 10px;
    }    
    button { padding: 0.5em 1em; background: green; color: white; border: none; cursor: pointer; }
    button:hover { background: #1e7e34; }
    .result_iframe { width:99%; height:200px; margin-top: 1em;  resize: both;border:1px solid #ccc;}        
</style>
</head>
<body> 
  <div class="container">
    <div class = "chapter-navi-section">
<a href="javascript-data-visualization-covid-19-trend-tracker.htm" class="nav-button prev">←</a>
<a href='javascript-data-visualization.htm#cryptocurrency-price-visualizer' class="nav-button toc-link">Index</a>
<a href="javascript-data-visualization-performance-and-optimization.htm" class="nav-button next">→</a>
</div>

    <h1 class="book-title-chapter" id = 'top'>Cryptocurrency Price Visualizer</h1>
    <h3 class="book-subtitle-chapter">JavaScript Data Visualization</h3>   
    <!-- <h1 class ="chapter-title"></h1> -->
    <h2 id='data-source-setup'>15.1 Data source setup</h2><h3 id="data-source-setup">Data Source Setup</h3><p>In this chapter, we’ll build a <strong>Cryptocurrency Price Visualizer</strong> that fetches real-time or historical price data and displays it in dynamic charts. The first step is setting up a reliable <strong>data source</strong> and structuring the response in a chart-friendly format.</p><p>We’ll explore:</p><ul>
 <li>Using public APIs like <strong>CoinGecko</strong> or <strong>CoinMarketCap</strong></li>
 <li>Fetching and parsing JSON data in JavaScript</li>
 <li>Cleaning and transforming API responses into time-series format</li>
 <li>Grouping data by date and cryptocurrency symbol</li>
</ul><p>Let’s dive in.</p><h4 id="choosing-a-data-source">Choosing a Data Source</h4><p>Two popular APIs for cryptocurrency data are:</p><ol>
 <li><p><strong><a href="https://www.coingecko.com/en/api">CoinGecko API</a></strong></p>
  <ul>
   <li>Free with no API key required</li>
   <li>Real-time and historical prices</li>
   <li>Supports many currencies</li>
  </ul></li>
 <li><p><strong><a href="https://coinmarketcap.com/api/">CoinMarketCap API</a></strong></p>
  <ul>
   <li>Requires an API key</li>
   <li>Offers broader market data but more restrictions on the free tier</li>
  </ul></li>
</ol><p>For simplicity and open access, we’ll use <strong>CoinGecko</strong> in this example.</p><h4 id="example-fetching-bitcoin-price-history-from-coingecko">Example: Fetching Bitcoin Price History from CoinGecko</h4><p>CoinGecko provides historical data for a coin using this endpoint:</p><div class="code-block"><button class="copy-button" onclick="copyCode(this)">▯</button>
 <pre><code class="language-bash">https://api.coingecko.com/api/v3/coins/{id}/market_chart</code></pre>
</div><p>Example for Bitcoin (past 7 days, daily interval):</p><div class="code-block"><button class="copy-button" onclick="copyCode(this)">▯</button>
 <pre><code class="language-bash">https://api.coingecko.com/api/v3/coins/bitcoin/market_chart?vs_currency=usd&amp;days=7&amp;interval=daily</code></pre>
</div><h5>Query Parameters:</h5><ul>
 <li><code>vs_currency</code>: the currency to compare against (e.g., <code>usd</code>)</li>
 <li><code>days</code>: how many days of history (can be a number like <code>30</code>, or <code>max</code>)</li>
 <li><code>interval</code>: <code>hourly</code> or <code>daily</code></li>
</ul><h4 id="making-the-fetch-request">Making the Fetch Request</h4><p>Here’s how to request the data using JavaScript:</p><div class="code-block"><button class="copy-button" onclick="copyCode(this)">▯</button>
 <pre><code class="language-js">async function fetchBitcoinPrices() {
  const url = "https://api.coingecko.com/api/v3/coins/bitcoin/market_chart?vs_currency=usd&amp;days=7&amp;interval=daily";
  
  const response = await fetch(url);
  const data = await response.json();

  console.log(data);
}</code></pre>
</div><p>The response includes:</p><div class="code-block"><button class="copy-button" onclick="copyCode(this)">▯</button>
 <pre><code class="language-json">{
  "prices": [
    [1625011200000, 34567.89],
    [1625097600000, 35521.35],
    ...
  ],
  "market_caps": [...],
  "total_volumes": [...]
}</code></pre>
</div><p>Each item in <code>prices</code> is a two-element array: <code>[timestamp, price]</code></p><h4 id="parsing-and-structuring-the-data">Parsing and Structuring the Data</h4><p>To use this data in a chart, we need to:</p><ol>
 <li>Convert the <strong>timestamp</strong> into a readable date</li>
 <li>Map the response into an array of objects like <code>{ date, price }</code></li>
</ol><div class="code-block"><button class="copy-button" onclick="copyCode(this)">▯</button>
 <pre><code class="language-js">function formatPriceData(rawPrices) {
  return rawPrices.map(([timestamp, price]) =&gt; {
    const date = new Date(timestamp).toISOString().split("T")[0]; // YYYY-MM-DD
    return { date, price };
  });
}

async function getBitcoinData() {
  const response = await fetch("https://api.coingecko.com/api/v3/coins/bitcoin/market_chart?vs_currency=usd&amp;days=7&amp;interval=daily");
  const json = await response.json();
  const cleanData = formatPriceData(json.prices);

  console.log(cleanData);
}</code></pre>
</div><p><strong>Sample Output:</strong></p><div class="code-block"><button class="copy-button" onclick="copyCode(this)">▯</button>
 <pre><code class="language-js">[
  { date: '2025-06-26', price: 34567.89 },
  { date: '2025-06-27', price: 35521.35 },
  ...
]</code></pre>
</div><p>This format is perfect for a line chart: x-axis as <code>date</code>, y-axis as <code>price</code>.</p><h4 id="supporting-multiple-coins">Supporting Multiple Coins</h4><p>To track multiple cryptocurrencies (e.g., Bitcoin, Ethereum), we can create a function that accepts a coin ID:</p><div class="code-block"><button class="copy-button" onclick="copyCode(this)">▯</button>
 <pre><code class="language-js">async function fetchCoinData(coinId, days = 7) {
  const url = `https://api.coingecko.com/api/v3/coins/${coinId}/market_chart?vs_currency=usd&amp;days=${days}&amp;interval=daily`;
  const response = await fetch(url);
  const json = await response.json();
  return formatPriceData(json.prices);
}</code></pre>
</div><p>Now we can call it for any coin:</p><div class="code-block"><button class="copy-button" onclick="copyCode(this)">▯</button>
 <pre><code class="language-js">const bitcoinData = await fetchCoinData("bitcoin");
const ethereumData = await fetchCoinData("ethereum");</code></pre>
</div><p>To prepare for charting, you can group or compare these datasets based on shared dates.</p><h4 id="structuring-multi-coin-time-series">Structuring Multi-Coin Time Series</h4><p>Suppose you want to compare Bitcoin and Ethereum prices on the same chart. You'll need to <strong>align the dates</strong> and format the data like this:</p><div class="code-block"><button class="copy-button" onclick="copyCode(this)">▯</button>
 <pre><code class="language-js">[
  { date: "2025-06-26", bitcoin: 34567.89, ethereum: 2123.54 },
  { date: "2025-06-27", bitcoin: 35521.35, ethereum: 2204.01 },
  ...
]</code></pre>
</div><p>Here’s how to merge two datasets by date:</p><div class="code-block"><button class="copy-button" onclick="copyCode(this)">▯</button>
 <pre><code class="language-js">function mergeCoinData(bitcoin, ethereum) {
  const merged = bitcoin.map(entry =&gt; {
    const ethEntry = ethereum.find(e =&gt; e.date === entry.date);
    return {
      date: entry.date,
      bitcoin: entry.price,
      ethereum: ethEntry ? ethEntry.price : null
    };
  });

  return merged;
}</code></pre>
</div><p>This allows charting both lines on the same time axis.</p><div class="snippet-container" id="wxpq6">
 <div id="9UxzS_Dialog" class="dialog-backdrop">
  <div class="dialog">
   <h2>Dialog 1</h2>
   <div class="controls"><button onclick="renderIframe(this,'Jz5J5_Textarea','9UxzS_IFrame')">Run</button> <button onclick="closeAll()">Close</button>
   </div>
   <div class="dialog-content"><textarea id="Jz5J5_Textarea" class="textarea_dialog" placeholder="Type HTML here...">&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
&lt;head&gt;
  &lt;meta charset="UTF-8" /&gt;
  &lt;title&gt;Crypto Price Comparison&lt;/title&gt;
  &lt;script src="https://cdn.jsdelivr.net/npm/chart.js"&gt;&lt;/script&gt;
  &lt;style&gt;
    body {
      font-family: Arial, sans-serif;
      background: #f4f6f8;
      padding: 20px;
      text-align: center;
    }
    canvas {
      max-width: 900px;
      margin: 0 auto;
      background: #fff;
      border-radius: 8px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }
    h2 {
      margin-bottom: 30px;
    }
  &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;h2&gt;Bitcoin vs Ethereum (Last 7 Days)&lt;/h2&gt;
  &lt;canvas id="cryptoChart" width="900" height="400"&gt;&lt;/canvas&gt;

  &lt;script&gt;
    async function fetchCoinData(coinId, days = 7) {
      const url = `https://api.coingecko.com/api/v3/coins/${coinId}/market_chart?vs_currency=usd&amp;days=${days}&amp;interval=daily`;
      const response = await fetch(url);
      const json = await response.json();
      return json.prices.map(([timestamp, price]) =&gt; ({
        date: new Date(timestamp).toISOString().split("T")[0],
        price
      }));
    }

    function mergeCoinData(bitcoin, ethereum) {
      return bitcoin.map(entry =&gt; {
        const ethEntry = ethereum.find(e =&gt; e.date === entry.date);
        return {
          date: entry.date,
          bitcoin: entry.price,
          ethereum: ethEntry ? ethEntry.price : null
        };
      });
    }

    async function renderChart() {
      const bitcoinData = await fetchCoinData("bitcoin");
      const ethereumData = await fetchCoinData("ethereum");
      const merged = mergeCoinData(bitcoinData, ethereumData);

      const ctx = document.getElementById('cryptoChart').getContext('2d');
      new Chart(ctx, {
        type: 'line',
        data: {
          labels: merged.map(d =&gt; d.date),
          datasets: [
            {
              label: 'Bitcoin (USD)',
              data: merged.map(d =&gt; d.bitcoin),
              borderColor: '#f39c12',
              backgroundColor: 'rgba(243, 156, 18, 0.2)',
              fill: true,
              tension: 0.3
            },
            {
              label: 'Ethereum (USD)',
              data: merged.map(d =&gt; d.ethereum),
              borderColor: '#3498db',
              backgroundColor: 'rgba(52, 152, 219, 0.2)',
              fill: true,
              tension: 0.3
            }
          ]
        },
        options: {
          responsive: true,
          plugins: {
            title: {
              display: true,
              text: 'Daily Prices (7 Days)',
              font: { size: 18 }
            },
            tooltip: {
              mode: 'index',
              intersect: false
            },
            legend: {
              position: 'top'
            }
          },
          scales: {
            x: {
              title: { display: true, text: 'Date' }
            },
            y: {
              title: { display: true, text: 'USD Price' },
              beginAtZero: false
            }
          }
        }
      });
    }

    renderChart();
  &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;</textarea> <iframe id="9UxzS_IFrame" class="iframe_dialog"></iframe>
   </div>
  </div>
 </div>
 <div class="snippet-header" onclick="toggleSnippetAndRefresh('wxpq6','Jz5J5')">
  Click to Try it <!--<span onclick="toggleSnippetAndRefresh('wxpq6','Jz5J5')">Click
			to Try it</span> --> <!-- <span onclick="openDialog('9UxzS_Dialog')">Dialog</span> -->
 </div>
 <div class="snippet-body"><textarea id="Jz5J5">&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
&lt;head&gt;
  &lt;meta charset="UTF-8" /&gt;
  &lt;title&gt;Crypto Price Comparison&lt;/title&gt;
  &lt;script src="https://cdn.jsdelivr.net/npm/chart.js"&gt;&lt;/script&gt;
  &lt;style&gt;
    body {
      font-family: Arial, sans-serif;
      background: #f4f6f8;
      padding: 20px;
      text-align: center;
    }
    canvas {
      max-width: 900px;
      margin: 0 auto;
      background: #fff;
      border-radius: 8px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }
    h2 {
      margin-bottom: 30px;
    }
  &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;h2&gt;Bitcoin vs Ethereum (Last 7 Days)&lt;/h2&gt;
  &lt;canvas id="cryptoChart" width="900" height="400"&gt;&lt;/canvas&gt;

  &lt;script&gt;
    async function fetchCoinData(coinId, days = 7) {
      const url = `https://api.coingecko.com/api/v3/coins/${coinId}/market_chart?vs_currency=usd&amp;days=${days}&amp;interval=daily`;
      const response = await fetch(url);
      const json = await response.json();
      return json.prices.map(([timestamp, price]) =&gt; ({
        date: new Date(timestamp).toISOString().split("T")[0],
        price
      }));
    }

    function mergeCoinData(bitcoin, ethereum) {
      return bitcoin.map(entry =&gt; {
        const ethEntry = ethereum.find(e =&gt; e.date === entry.date);
        return {
          date: entry.date,
          bitcoin: entry.price,
          ethereum: ethEntry ? ethEntry.price : null
        };
      });
    }

    async function renderChart() {
      const bitcoinData = await fetchCoinData("bitcoin");
      const ethereumData = await fetchCoinData("ethereum");
      const merged = mergeCoinData(bitcoinData, ethereumData);

      const ctx = document.getElementById('cryptoChart').getContext('2d');
      new Chart(ctx, {
        type: 'line',
        data: {
          labels: merged.map(d =&gt; d.date),
          datasets: [
            {
              label: 'Bitcoin (USD)',
              data: merged.map(d =&gt; d.bitcoin),
              borderColor: '#f39c12',
              backgroundColor: 'rgba(243, 156, 18, 0.2)',
              fill: true,
              tension: 0.3
            },
            {
              label: 'Ethereum (USD)',
              data: merged.map(d =&gt; d.ethereum),
              borderColor: '#3498db',
              backgroundColor: 'rgba(52, 152, 219, 0.2)',
              fill: true,
              tension: 0.3
            }
          ]
        },
        options: {
          responsive: true,
          plugins: {
            title: {
              display: true,
              text: 'Daily Prices (7 Days)',
              font: { size: 18 }
            },
            tooltip: {
              mode: 'index',
              intersect: false
            },
            legend: {
              position: 'top'
            }
          },
          scales: {
            x: {
              title: { display: true, text: 'Date' }
            },
            y: {
              title: { display: true, text: 'USD Price' },
              beginAtZero: false
            }
          }
        }
      });
    }

    renderChart();
  &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;</textarea> <br> <button onclick="renderIframe(this,'Jz5J5','9UxzS')">Run</button>
  <div id="9UxzS_FloatingLog" class="floatingLog" aria-live="polite" role="alert"></div> <iframe id="9UxzS" class="result_iframe" style="display: none;"></iframe>
  <script>
			{
				let editor = CodeMirror.fromTextArea(document
						.getElementById("Jz5J5"), {
					mode : "htmlmixed",
					lineNumbers : false,
					tabSize : 2
				});
			    const mode = localStorage.getItem("mode") || "light";  
			    const newTheme = mode === "dark" ? "material" : "default";
			    editor.setOption("theme", newTheme);
			    
				codeMirrorMap.set("Jz5J5", editor);

				let editor1 = CodeMirror.fromTextArea(document.getElementById("Jz5J5_Textarea"), {
					mode : "htmlmixed",
					lineNumbers : false,
					tabSize : 2
				});
			    editor1.setOption("theme", newTheme);				
				
				codeMirrorMap.set("Jz5J5_Textarea", editor1);
			}
		    function openDialog(id) {
		        closeAll();
		        document.getElementById(id).style.display = 'flex';
		        setTimeout(() => {
		        	 codeMirrorMap.get("Jz5J5_Textarea").refresh();
		        }, 100); // 100ms 
		      }

		      function closeAll() {
		        document.querySelectorAll('.dialog-backdrop').forEach(el => {
		          el.style.display = 'none';
		        });
		      }			
		</script>
 </div>
</div><h4 id="summary">Summary</h4><p>In this section, you learned how to:</p><ul>
 <li>Access real-time and historical cryptocurrency prices via the <strong>CoinGecko API</strong></li>
 <li>Use <code>fetch()</code> to retrieve JSON data in JavaScript</li>
 <li>Parse and format timestamped price data for charts</li>
 <li>Structure multi-coin data to support comparison charts</li>
</ul><p>You now have a flexible, chart-friendly dataset ready to visualize cryptocurrency trends.</p><p>➡️ <strong>Next: Chart Selection and Layout</strong> — Turn your structured price data into engaging and responsive visual charts.</p><div class = "chapter-navi-section">
<a href="#top" class="nav-button prev">↑</a>
<a href='javascript-data-visualization.htm#cryptocurrency-price-visualizer' class="nav-button toc-link">Index</a>
<a href="#bottom" class="nav-button next">↓</a>
</div>
<h2 id='chart-selection-and-layout'>15.2 Chart selection and layout</h2><p>Now that we have real-time or historical cryptocurrency data structured and ready, it’s time to transform that data into engaging and insightful charts. Choosing the right chart type for each aspect of the data—and organizing the charts in a user-friendly layout—can dramatically improve readability and insight.</p><p>In this section, we will:</p><ul>
 <li>Select appropriate chart types for different types of crypto data</li>
 <li>Create a responsive multi-panel layout using <strong>Flexbox</strong> or <strong>CSS Grid</strong></li>
 <li>Format chart labels to enhance clarity, including <strong>currency formatting</strong>, <strong>percentage axes</strong>, and <strong>date labels</strong></li>
</ul><h3 id="choosing-the-right-chart-types">Choosing the Right Chart Types</h3><p>Cryptocurrency data is multi-faceted, typically including:</p><ul>
 <li><strong>Prices over time</strong></li>
 <li><strong>Trading volume</strong></li>
 <li><strong>Daily high/low/open/close values</strong></li>
</ul><p>Here’s how to map each data type to an ideal chart type:</p><table>
 <thead>
  <tr>
   <th>Data Type</th>
   <th>Recommended Chart Type</th>
   <th>Description</th>
  </tr>
 </thead>
 <tbody>
  <tr>
   <td>Price history (per coin)</td>
   <td><strong>Line Chart</strong></td>
   <td>Clean way to show value changes over time</td>
  </tr>
  <tr>
   <td>Trading volume</td>
   <td><strong>Area Chart</strong></td>
   <td>Visualizes quantity and momentum</td>
  </tr>
  <tr>
   <td>OHLC/candlestick data</td>
   <td><strong>Candlestick Chart</strong></td>
   <td>Ideal for showing open-high-low-close patterns</td>
  </tr>
  <tr>
   <td>Multiple coins side-by-side</td>
   <td><strong>Grid Layout</strong></td>
   <td>Enables comparison across cryptocurrencies</td>
  </tr>
 </tbody>
</table><p>Let’s walk through how to build this in a structured layout.</p><h3 id="multi-panel-layout-with-css-grid">Multi-Panel Layout with CSS Grid</h3><p>We’ll design a dashboard with three types of charts for each coin, arranged side-by-side.</p><h4 id="layout-goals">Layout Goals:</h4><ul>
 <li>One row per coin (e.g., Bitcoin, Ethereum)</li>
 <li>Columns for line, area, and candlestick charts</li>
 <li>Responsive layout that adapts to screen size</li>
</ul><h4 id="html-structure">HTML Structure</h4><div class="code-block"><button class="copy-button" onclick="copyCode(this)">▯</button>
 <pre><code class="language-html">&lt;div class="dashboard"&gt;
  &lt;div class="coin-panel"&gt;
    &lt;h2&gt;Bitcoin (BTC)&lt;/h2&gt;
    &lt;div class="chart-row"&gt;
      &lt;canvas id="btc-line"&gt;&lt;/canvas&gt;
      &lt;canvas id="btc-area"&gt;&lt;/canvas&gt;
      &lt;canvas id="btc-candle"&gt;&lt;/canvas&gt;
    &lt;/div&gt;
  &lt;/div&gt;

  &lt;div class="coin-panel"&gt;
    &lt;h2&gt;Ethereum (ETH)&lt;/h2&gt;
    &lt;div class="chart-row"&gt;
      &lt;canvas id="eth-line"&gt;&lt;/canvas&gt;
      &lt;canvas id="eth-area"&gt;&lt;/canvas&gt;
      &lt;canvas id="eth-candle"&gt;&lt;/canvas&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;</code></pre>
</div><h4 id="css-grid-flex-layout">CSS Grid/Flex Layout</h4><div class="code-block"><button class="copy-button" onclick="copyCode(this)">▯</button>
 <pre><code class="language-css">.dashboard {
  display: flex;
  flex-direction: column;
  gap: 2rem;
  padding: 1rem;
}

.chart-row {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 1rem;
}

canvas {
  background: #fff;
  border-radius: 8px;
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
}</code></pre>
</div><p>This layout allows each coin to have its own visual panel, with space-efficient charts displayed side by side.</p><h3 id="line-chart-price-over-time">Line Chart: Price Over Time</h3><p>Use <strong>Chart.js</strong> or <strong>D3.js</strong> to render a line chart that shows how the price has changed over time.</p><div class="code-block"><button class="copy-button" onclick="copyCode(this)">▯</button>
 <pre><code class="language-js">new Chart(document.getElementById('btc-line'), {
  type: 'line',
  data: {
    labels: bitcoinData.map(d =&gt; d.date),
    datasets: [{
      label: 'BTC Price (USD)',
      data: bitcoinData.map(d =&gt; d.price),
      borderColor: 'orange',
      fill: false,
      tension: 0.2
    }]
  },
  options: {
    scales: {
      y: {
        ticks: {
          callback: value =&gt; `$${value.toLocaleString()}`
        },
        title: { display: true, text: 'USD' }
      },
      x: {
        title: { display: true, text: 'Date' }
      }
    },
    plugins: {
      title: {
        display: true,
        text: 'Bitcoin Price Over Time'
      }
    }
  }
});</code></pre>
</div><h3 id="area-chart-volume-over-time">Area Chart: Volume Over Time</h3><p>To visualize volume, use an <strong>area chart</strong>. Chart.js allows this by setting <code>fill: true</code>.</p><div class="code-block"><button class="copy-button" onclick="copyCode(this)">▯</button>
 <pre><code class="language-js">new Chart(document.getElementById('btc-area'), {
  type: 'line',
  data: {
    labels: bitcoinVolume.map(d =&gt; d.date),
    datasets: [{
      label: 'Volume (USD)',
      data: bitcoinVolume.map(d =&gt; d.volume),
      borderColor: 'steelblue',
      backgroundColor: 'rgba(70,130,180,0.3)',
      fill: true
    }]
  },
  options: {
    scales: {
      y: {
        ticks: {
          callback: value =&gt; `$${(value / 1e6).toFixed(1)}M`
        },
        title: { display: true, text: 'Volume (in millions)' }
      },
      x: {
        title: { display: true, text: 'Date' }
      }
    },
    plugins: {
      title: {
        display: true,
        text: 'Trading Volume'
      }
    }
  }
});</code></pre>
</div><h3 id="candlestick-chart-ohlc-view">Candlestick Chart: OHLC View</h3><p><strong>Candlestick charts</strong> require specialized libraries like <a href="https://www.chartjs.org/chartjs-chart-financial/">Chart.js Financial Plugin</a> or D3’s OHLC implementation.</p><p>Here’s an example using <strong>Chart.js Financial</strong>:</p><ol>
 <li>Include the plugin:</li>
</ol><div class="code-block"><button class="copy-button" onclick="copyCode(this)">▯</button>
 <pre><code class="language-html">&lt;script src="https://cdn.jsdelivr.net/npm/chartjs-chart-financial"&gt;&lt;/script&gt;</code></pre>
</div><ol start="2">
 <li>Format your data:</li>
</ol><div class="code-block"><button class="copy-button" onclick="copyCode(this)">▯</button>
 <pre><code class="language-js">const btcOHLC = [
  { x: '2025-06-26', o: 34700, h: 35300, l: 34000, c: 35000 },
  { x: '2025-06-27', o: 35000, h: 35500, l: 34200, c: 34800 },
  ...
];</code></pre>
</div><ol start="3">
 <li>Render the chart:</li>
</ol><div class="code-block"><button class="copy-button" onclick="copyCode(this)">▯</button>
 <pre><code class="language-js">new Chart(document.getElementById('btc-candle'), {
  type: 'candlestick',
  data: {
    datasets: [{
      label: 'BTC OHLC',
      data: btcOHLC,
      color: {
        up: '#2ecc71',
        down: '#e74c3c',
        unchanged: '#999'
      }
    }]
  },
  options: {
    plugins: {
      title: {
        display: true,
        text: 'Bitcoin Daily Candlestick'
      }
    },
    scales: {
      x: { title: { display: true, text: 'Date' } },
      y: { title: { display: true, text: 'Price (USD)' } }
    }
  }
});</code></pre>
</div><h3 id="label-formatting-tips">Label Formatting Tips</h3><p>Good formatting makes charts feel more professional and user-friendly.</p><h4 id="currency">Currency</h4><p>Use JavaScript's <code>Intl.NumberFormat</code> or formatting callbacks:</p><div class="code-block"><button class="copy-button" onclick="copyCode(this)">▯</button>
 <pre><code class="language-js">value =&gt; `$${value.toLocaleString()}`</code></pre>
</div><h4 id="percentages">Percentages</h4><p>For price changes or dominance metrics:</p><div class="code-block"><button class="copy-button" onclick="copyCode(this)">▯</button>
 <pre><code class="language-js">value =&gt; `${(value * 100).toFixed(2)}%`</code></pre>
</div><h4 id="dates">Dates</h4><p>Keep x-axis labels short and readable:</p><div class="code-block"><button class="copy-button" onclick="copyCode(this)">▯</button>
 <pre><code class="language-js">new Date(date).toLocaleDateString('en-US', { month: 'short', day: 'numeric' });</code></pre>
</div><div class="snippet-container" id="a4ePO">
 <div id="Bu3Ne_Dialog" class="dialog-backdrop">
  <div class="dialog">
   <h2>Dialog 1</h2>
   <div class="controls"><button onclick="renderIframe(this,'zKK9L_Textarea','Bu3Ne_IFrame')">Run</button> <button onclick="closeAll()">Close</button>
   </div>
   <div class="dialog-content"><textarea id="zKK9L_Textarea" class="textarea_dialog" placeholder="Type HTML here...">&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
&lt;head&gt;
  &lt;meta charset="UTF-8" /&gt;
  &lt;title&gt;Crypto Dashboard&lt;/title&gt;
  &lt;meta name="viewport" content="width=device-width, initial-scale=1" /&gt;
  &lt;script src="https://cdn.jsdelivr.net/npm/chart.js"&gt;&lt;/script&gt;
  &lt;script src="https://cdn.jsdelivr.net/npm/chartjs-chart-financial"&gt;&lt;/script&gt;
  &lt;style&gt;
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: #f9f9f9;
      padding: 20px;
    }

    .dashboard {
      display: flex;
      flex-direction: column;
      gap: 2rem;
    }

    .coin-panel h2 {
      margin-bottom: 1rem;
    }

    .chart-row {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 1rem;
    }

    canvas {
      background: #fff;
      border-radius: 8px;
      padding: 10px;
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
    }
  &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;div class="dashboard"&gt;
    &lt;div class="coin-panel"&gt;
      &lt;h2&gt;Bitcoin (BTC)&lt;/h2&gt;
      &lt;div class="chart-row"&gt;
        &lt;canvas id="btc-line"&gt;&lt;/canvas&gt;
        &lt;canvas id="btc-area"&gt;&lt;/canvas&gt;
        &lt;canvas id="btc-candle"&gt;&lt;/canvas&gt;
      &lt;/div&gt;
    &lt;/div&gt;

    &lt;div class="coin-panel"&gt;
      &lt;h2&gt;Ethereum (ETH)&lt;/h2&gt;
      &lt;div class="chart-row"&gt;
        &lt;canvas id="eth-line"&gt;&lt;/canvas&gt;
        &lt;canvas id="eth-area"&gt;&lt;/canvas&gt;
        &lt;canvas id="eth-candle"&gt;&lt;/canvas&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;

  &lt;script&gt;
    const btcData = [
      { date: '2025-07-10', price: 34700, volume: 250000000 },
      { date: '2025-07-11', price: 35500, volume: 260000000 },
      { date: '2025-07-12', price: 35000, volume: 280000000 },
      { date: '2025-07-13', price: 36500, volume: 270000000 },
      { date: '2025-07-14', price: 36000, volume: 290000000 }
    ];

    const btcOHLC = [
      { x: '2025-07-10', o: 34500, h: 35200, l: 34000, c: 34700 },
      { x: '2025-07-11', o: 34700, h: 35700, l: 34400, c: 35500 },
      { x: '2025-07-12', o: 35500, h: 35600, l: 34800, c: 35000 },
      { x: '2025-07-13', o: 35000, h: 37000, l: 34900, c: 36500 },
      { x: '2025-07-14', o: 36500, h: 36800, l: 35500, c: 36000 }
    ];

    const ethData = [
      { date: '2025-07-10', price: 2200, volume: 150000000 },
      { date: '2025-07-11', price: 2250, volume: 160000000 },
      { date: '2025-07-12', price: 2225, volume: 170000000 },
      { date: '2025-07-13', price: 2300, volume: 165000000 },
      { date: '2025-07-14', price: 2280, volume: 180000000 }
    ];

    const ethOHLC = [
      { x: '2025-07-10', o: 2180, h: 2220, l: 2150, c: 2200 },
      { x: '2025-07-11', o: 2200, h: 2280, l: 2190, c: 2250 },
      { x: '2025-07-12', o: 2250, h: 2260, l: 2200, c: 2225 },
      { x: '2025-07-13', o: 2225, h: 2350, l: 2210, c: 2300 },
      { x: '2025-07-14', o: 2300, h: 2320, l: 2260, c: 2280 }
    ];

    function renderLineChart(id, label, data, color) {
      new Chart(document.getElementById(id), {
        type: 'line',
        data: {
          labels: data.map(d =&gt; d.date),
          datasets: [{
            label,
            data: data.map(d =&gt; d.price),
            borderColor: color,
            fill: false,
            tension: 0.2
          }]
        },
        options: {
          plugins: {
            title: {
              display: true,
              text: `${label} Over Time`
            }
          },
          scales: {
            x: { title: { display: true, text: 'Date' } },
            y: {
              ticks: { callback: val =&gt; `$${val.toLocaleString()}` },
              title: { display: true, text: 'USD' }
            }
          }
        }
      });
    }

    function renderAreaChart(id, label, data, color) {
      new Chart(document.getElementById(id), {
        type: 'line',
        data: {
          labels: data.map(d =&gt; d.date),
          datasets: [{
            label,
            data: data.map(d =&gt; d.volume),
            borderColor: color,
            backgroundColor: `${color}33`,
            fill: true
          }]
        },
        options: {
          plugins: {
            title: {
              display: true,
              text: `${label} Over Time`
            }
          },
          scales: {
            x: { title: { display: true, text: 'Date' } },
            y: {
              ticks: {
                callback: val =&gt; `$${(val / 1e6).toFixed(1)}M`
              },
              title: { display: true, text: 'Volume (in millions)' }
            }
          }
        }
      });
    }

    function renderCandleChart(id, label, data) {
      new Chart(document.getElementById(id), {
        type: 'candlestick',
        data: {
          datasets: [{
            label,
            data,
            color: {
              up: '#2ecc71',
              down: '#e74c3c',
              unchanged: '#999'
            }
          }]
        },
        options: {
          plugins: {
            title: {
              display: true,
              text: `${label} Candlestick`
            }
          },
          scales: {
            x: { title: { display: true, text: 'Date' } },
            y: {
              title: { display: true, text: 'Price (USD)' },
              ticks: { callback: val =&gt; `$${val}` }
            }
          }
        }
      });
    }

    // Render Bitcoin Charts
    renderLineChart('btc-line', 'BTC Price', btcData, 'orange');
    renderAreaChart('btc-area', 'BTC Volume', btcData, 'steelblue');
    renderCandleChart('btc-candle', 'BTC OHLC', btcOHLC);

    // Render Ethereum Charts
    renderLineChart('eth-line', 'ETH Price', ethData, 'purple');
    renderAreaChart('eth-area', 'ETH Volume', ethData, 'teal');
    renderCandleChart('eth-candle', 'ETH OHLC', ethOHLC);
  &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;</textarea> <iframe id="Bu3Ne_IFrame" class="iframe_dialog"></iframe>
   </div>
  </div>
 </div>
 <div class="snippet-header" onclick="toggleSnippetAndRefresh('a4ePO','zKK9L')">
  Click to Try it <!--<span onclick="toggleSnippetAndRefresh('a4ePO','zKK9L')">Click
			to Try it</span> --> <!-- <span onclick="openDialog('Bu3Ne_Dialog')">Dialog</span> -->
 </div>
 <div class="snippet-body"><textarea id="zKK9L">&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
&lt;head&gt;
  &lt;meta charset="UTF-8" /&gt;
  &lt;title&gt;Crypto Dashboard&lt;/title&gt;
  &lt;meta name="viewport" content="width=device-width, initial-scale=1" /&gt;
  &lt;script src="https://cdn.jsdelivr.net/npm/chart.js"&gt;&lt;/script&gt;
  &lt;script src="https://cdn.jsdelivr.net/npm/chartjs-chart-financial"&gt;&lt;/script&gt;
  &lt;style&gt;
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: #f9f9f9;
      padding: 20px;
    }

    .dashboard {
      display: flex;
      flex-direction: column;
      gap: 2rem;
    }

    .coin-panel h2 {
      margin-bottom: 1rem;
    }

    .chart-row {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 1rem;
    }

    canvas {
      background: #fff;
      border-radius: 8px;
      padding: 10px;
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
    }
  &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;div class="dashboard"&gt;
    &lt;div class="coin-panel"&gt;
      &lt;h2&gt;Bitcoin (BTC)&lt;/h2&gt;
      &lt;div class="chart-row"&gt;
        &lt;canvas id="btc-line"&gt;&lt;/canvas&gt;
        &lt;canvas id="btc-area"&gt;&lt;/canvas&gt;
        &lt;canvas id="btc-candle"&gt;&lt;/canvas&gt;
      &lt;/div&gt;
    &lt;/div&gt;

    &lt;div class="coin-panel"&gt;
      &lt;h2&gt;Ethereum (ETH)&lt;/h2&gt;
      &lt;div class="chart-row"&gt;
        &lt;canvas id="eth-line"&gt;&lt;/canvas&gt;
        &lt;canvas id="eth-area"&gt;&lt;/canvas&gt;
        &lt;canvas id="eth-candle"&gt;&lt;/canvas&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;

  &lt;script&gt;
    const btcData = [
      { date: '2025-07-10', price: 34700, volume: 250000000 },
      { date: '2025-07-11', price: 35500, volume: 260000000 },
      { date: '2025-07-12', price: 35000, volume: 280000000 },
      { date: '2025-07-13', price: 36500, volume: 270000000 },
      { date: '2025-07-14', price: 36000, volume: 290000000 }
    ];

    const btcOHLC = [
      { x: '2025-07-10', o: 34500, h: 35200, l: 34000, c: 34700 },
      { x: '2025-07-11', o: 34700, h: 35700, l: 34400, c: 35500 },
      { x: '2025-07-12', o: 35500, h: 35600, l: 34800, c: 35000 },
      { x: '2025-07-13', o: 35000, h: 37000, l: 34900, c: 36500 },
      { x: '2025-07-14', o: 36500, h: 36800, l: 35500, c: 36000 }
    ];

    const ethData = [
      { date: '2025-07-10', price: 2200, volume: 150000000 },
      { date: '2025-07-11', price: 2250, volume: 160000000 },
      { date: '2025-07-12', price: 2225, volume: 170000000 },
      { date: '2025-07-13', price: 2300, volume: 165000000 },
      { date: '2025-07-14', price: 2280, volume: 180000000 }
    ];

    const ethOHLC = [
      { x: '2025-07-10', o: 2180, h: 2220, l: 2150, c: 2200 },
      { x: '2025-07-11', o: 2200, h: 2280, l: 2190, c: 2250 },
      { x: '2025-07-12', o: 2250, h: 2260, l: 2200, c: 2225 },
      { x: '2025-07-13', o: 2225, h: 2350, l: 2210, c: 2300 },
      { x: '2025-07-14', o: 2300, h: 2320, l: 2260, c: 2280 }
    ];

    function renderLineChart(id, label, data, color) {
      new Chart(document.getElementById(id), {
        type: 'line',
        data: {
          labels: data.map(d =&gt; d.date),
          datasets: [{
            label,
            data: data.map(d =&gt; d.price),
            borderColor: color,
            fill: false,
            tension: 0.2
          }]
        },
        options: {
          plugins: {
            title: {
              display: true,
              text: `${label} Over Time`
            }
          },
          scales: {
            x: { title: { display: true, text: 'Date' } },
            y: {
              ticks: { callback: val =&gt; `$${val.toLocaleString()}` },
              title: { display: true, text: 'USD' }
            }
          }
        }
      });
    }

    function renderAreaChart(id, label, data, color) {
      new Chart(document.getElementById(id), {
        type: 'line',
        data: {
          labels: data.map(d =&gt; d.date),
          datasets: [{
            label,
            data: data.map(d =&gt; d.volume),
            borderColor: color,
            backgroundColor: `${color}33`,
            fill: true
          }]
        },
        options: {
          plugins: {
            title: {
              display: true,
              text: `${label} Over Time`
            }
          },
          scales: {
            x: { title: { display: true, text: 'Date' } },
            y: {
              ticks: {
                callback: val =&gt; `$${(val / 1e6).toFixed(1)}M`
              },
              title: { display: true, text: 'Volume (in millions)' }
            }
          }
        }
      });
    }

    function renderCandleChart(id, label, data) {
      new Chart(document.getElementById(id), {
        type: 'candlestick',
        data: {
          datasets: [{
            label,
            data,
            color: {
              up: '#2ecc71',
              down: '#e74c3c',
              unchanged: '#999'
            }
          }]
        },
        options: {
          plugins: {
            title: {
              display: true,
              text: `${label} Candlestick`
            }
          },
          scales: {
            x: { title: { display: true, text: 'Date' } },
            y: {
              title: { display: true, text: 'Price (USD)' },
              ticks: { callback: val =&gt; `$${val}` }
            }
          }
        }
      });
    }

    // Render Bitcoin Charts
    renderLineChart('btc-line', 'BTC Price', btcData, 'orange');
    renderAreaChart('btc-area', 'BTC Volume', btcData, 'steelblue');
    renderCandleChart('btc-candle', 'BTC OHLC', btcOHLC);

    // Render Ethereum Charts
    renderLineChart('eth-line', 'ETH Price', ethData, 'purple');
    renderAreaChart('eth-area', 'ETH Volume', ethData, 'teal');
    renderCandleChart('eth-candle', 'ETH OHLC', ethOHLC);
  &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;</textarea> <br> <button onclick="renderIframe(this,'zKK9L','Bu3Ne')">Run</button>
  <div id="Bu3Ne_FloatingLog" class="floatingLog" aria-live="polite" role="alert"></div> <iframe id="Bu3Ne" class="result_iframe" style="display: none;"></iframe>
  <script>
			{
				let editor = CodeMirror.fromTextArea(document
						.getElementById("zKK9L"), {
					mode : "htmlmixed",
					lineNumbers : false,
					tabSize : 2
				});
			    const mode = localStorage.getItem("mode") || "light";  
			    const newTheme = mode === "dark" ? "material" : "default";
			    editor.setOption("theme", newTheme);
			    
				codeMirrorMap.set("zKK9L", editor);

				let editor1 = CodeMirror.fromTextArea(document.getElementById("zKK9L_Textarea"), {
					mode : "htmlmixed",
					lineNumbers : false,
					tabSize : 2
				});
			    editor1.setOption("theme", newTheme);				
				
				codeMirrorMap.set("zKK9L_Textarea", editor1);
			}
		    function openDialog(id) {
		        closeAll();
		        document.getElementById(id).style.display = 'flex';
		        setTimeout(() => {
		        	 codeMirrorMap.get("zKK9L_Textarea").refresh();
		        }, 100); // 100ms 
		      }

		      function closeAll() {
		        document.querySelectorAll('.dialog-backdrop').forEach(el => {
		          el.style.display = 'none';
		        });
		      }			
		</script>
 </div>
</div><h3 id="summary">Summary</h3><p>In this section, you:</p><ul>
 <li><p>Chose the best chart type for each cryptocurrency metric:</p>
  <ul>
   <li>Line charts for prices</li>
   <li>Area charts for volume</li>
   <li>Candlestick charts for OHLC data</li>
  </ul></li>
 <li><p>Created a multi-panel dashboard using <strong>CSS Grid</strong> or <strong>Flexbox</strong></p></li>
 <li><p>Enhanced readability with formatted labels and values</p></li>
</ul><p>This setup gives users an interactive, comparative view of multiple cryptocurrencies and metrics.</p><div class = "chapter-navi-section">
<a href="#top" class="nav-button prev">↑</a>
<a href='javascript-data-visualization.htm#cryptocurrency-price-visualizer' class="nav-button toc-link">Index</a>
<a href="#bottom" class="nav-button next">↓</a>
</div>
<h2 id='interactivity-and-polish'>15.3 Interactivity and polish</h2><p>Your cryptocurrency visualizer is shaping up nicely! Now, let’s add the interactive features and polish that turn static charts into engaging, user-friendly tools. In this section, we'll:</p><ul>
 <li>Implement <strong>tooltips</strong> showing detailed info on hover</li>
 <li>Add <strong>dropdowns</strong> for selecting coins, time ranges, and currencies</li>
 <li>Enhance the experience with <strong>smooth transitions</strong>, <strong>dark mode theming</strong>, and <strong>responsive resizing</strong></li>
 <li>Suggest finishing touches like <strong>sparklines</strong> and <strong>status indicators</strong></li>
</ul><h3 id="implementing-tooltips">Implementing Tooltips</h3><p>Tooltips help users explore exact data values by hovering over chart points.</p><p>If you're using <strong>Chart.js</strong>, tooltips come built-in and are easy to customize.</p><h3 id="example-customizing-tooltips-to-show-date-price-and-volume">Example: Customizing Tooltips to Show Date, Price, and Volume</h3><div class="code-block"><button class="copy-button" onclick="copyCode(this)">▯</button>
 <pre><code class="language-js">const chart = new Chart(ctx, {
  type: 'line',
  data: { /* your data */ },
  options: {
    plugins: {
      tooltip: {
        enabled: true,
        mode: 'nearest',
        intersect: false,
        callbacks: {
          title: context =&gt; `Date: ${context[0].label}`,
          label: context =&gt; {
            const datasetLabel = context.dataset.label || '';
            const value = context.parsed.y;
            return `${datasetLabel}: $${value.toLocaleString()}`;
          },
          afterLabel: context =&gt; {
            // Assuming volume is stored in a parallel dataset or external data map
            const index = context.dataIndex;
            const volume = volumeData[index]; // e.g. volumeData aligned with labels
            return `Volume: ${volume.toLocaleString()}`;
          }
        }
      }
    }
  }
});</code></pre>
</div><p><strong>Note:</strong> To display volume or any extra info, make sure that data arrays (prices, volumes) are aligned by index.</p><h3 id="adding-dropdown-filters">Adding Dropdown Filters</h3><h4 id="select-cryptocurrency">Select Cryptocurrency</h4><div class="code-block"><button class="copy-button" onclick="copyCode(this)">▯</button>
 <pre><code class="language-html">&lt;select id="coinSelect"&gt;
  &lt;option value="bitcoin"&gt;Bitcoin (BTC)&lt;/option&gt;
  &lt;option value="ethereum"&gt;Ethereum (ETH)&lt;/option&gt;
  &lt;option value="litecoin"&gt;Litecoin (LTC)&lt;/option&gt;
&lt;/select&gt;</code></pre>
</div><h4 id="select-time-range">Select Time Range</h4><div class="code-block"><button class="copy-button" onclick="copyCode(this)">▯</button>
 <pre><code class="language-html">&lt;select id="rangeSelect"&gt;
  &lt;option value="7"&gt;Last 7 Days&lt;/option&gt;
  &lt;option value="30"&gt;Last 30 Days&lt;/option&gt;
  &lt;option value="90"&gt;Last 90 Days&lt;/option&gt;
  &lt;option value="max"&gt;Max&lt;/option&gt;
&lt;/select&gt;</code></pre>
</div><h4 id="select-currency-usd-eur">Select Currency (USD/EUR)</h4><div class="code-block"><button class="copy-button" onclick="copyCode(this)">▯</button>
 <pre><code class="language-html">&lt;select id="currencySelect"&gt;
  &lt;option value="usd"&gt;USD&lt;/option&gt;
  &lt;option value="eur"&gt;EUR&lt;/option&gt;
&lt;/select&gt;</code></pre>
</div><h4 id="wiring-up-dropdowns-to-update-charts">Wiring Up Dropdowns to Update Charts</h4><div class="code-block"><button class="copy-button" onclick="copyCode(this)">▯</button>
 <pre><code class="language-js">const coinSelect = document.getElementById('coinSelect');
const rangeSelect = document.getElementById('rangeSelect');
const currencySelect = document.getElementById('currencySelect');

async function updateChart() {
  const coin = coinSelect.value;
  const days = rangeSelect.value;
  const currency = currencySelect.value;

  const url = `https://api.coingecko.com/api/v3/coins/${coin}/market_chart?vs_currency=${currency}&amp;days=${days}&amp;interval=daily`;
  const response = await fetch(url);
  const json = await response.json();

  const formattedData = formatPriceData(json.prices);

  // Update chart labels and data
  chart.data.labels = formattedData.map(d =&gt; d.date);
  chart.data.datasets[0].data = formattedData.map(d =&gt; d.price);
  chart.data.datasets[0].label = `${coin.toUpperCase()} Price (${currency.toUpperCase()})`;
  chart.update();
}

coinSelect.addEventListener('change', updateChart);
rangeSelect.addEventListener('change', updateChart);
currencySelect.addEventListener('change', updateChart);

// Initial load
updateChart();</code></pre>
</div><h3 id="adding-polish-transitions-and-theming">Adding Polish: Transitions and Theming</h3><h4 id="smooth-transitions">Smooth Transitions</h4><p>Chart.js animates updates by default, but you can customize easing and duration:</p><div class="code-block"><button class="copy-button" onclick="copyCode(this)">▯</button>
 <pre><code class="language-js">options: {
  animation: {
    duration: 800,
    easing: 'easeOutQuart'
  }
}</code></pre>
</div><h4 id="dark-mode-theme">Dark Mode Theme</h4><p>Crypto apps often have dark-themed UIs. You can toggle CSS variables or classes for dark mode.</p><h4 id="css-example">CSS Example:</h4><div class="code-block"><button class="copy-button" onclick="copyCode(this)">▯</button>
 <pre><code class="language-css">:root {
  --background-color: #fff;
  --text-color: #222;
  --chart-grid-color: #eee;
}

.dark-mode {
  --background-color: #121212;
  --text-color: #eee;
  --chart-grid-color: #444;
}

body {
  background-color: var(--background-color);
  color: var(--text-color);
}

canvas {
  background-color: var(--background-color);
}</code></pre>
</div><h4 id="chart-js-dark-mode-example">Chart.js Dark Mode Example:</h4><div class="code-block"><button class="copy-button" onclick="copyCode(this)">▯</button>
 <pre><code class="language-js">options: {
  scales: {
    x: {
      grid: {
        color: getComputedStyle(document.body).getPropertyValue('--chart-grid-color')
      },
      ticks: {
        color: getComputedStyle(document.body).getPropertyValue('--text-color')
      }
    },
    y: {
      grid: {
        color: getComputedStyle(document.body).getPropertyValue('--chart-grid-color')
      },
      ticks: {
        color: getComputedStyle(document.body).getPropertyValue('--text-color')
      }
    }
  },
  plugins: {
    legend: {
      labels: {
        color: getComputedStyle(document.body).getPropertyValue('--text-color')
      }
    }
  }
}</code></pre>
</div><p>You can toggle the <code>.dark-mode</code> class on the <code>&lt;body&gt;</code> with a button or system preference detection.</p><h3 id="responsive-resizing">Responsive Resizing</h3><p>Make sure your chart canvas resizes with the window:</p><div class="code-block"><button class="copy-button" onclick="copyCode(this)">▯</button>
 <pre><code class="language-css">canvas {
  width: 100% !important;
  height: auto !important;
  max-height: 400px;
}</code></pre>
</div><p>In Chart.js, enable responsiveness:</p><div class="code-block"><button class="copy-button" onclick="copyCode(this)">▯</button>
 <pre><code class="language-js">options: {
  responsive: true,
  maintainAspectRatio: false
}</code></pre>
</div><p>Wrap the canvas in a container with a fixed height to control layout:</p><div class="code-block"><button class="copy-button" onclick="copyCode(this)">▯</button>
 <pre><code class="language-css">.chart-container {
  position: relative;
  height: 400px;
  width: 100%;
}</code></pre>
</div><h3 id="finishing-touches">Finishing Touches</h3><h4 id="sparklines">Sparklines</h4><p>Miniature line charts showing trends in a compact space—for example, in a table listing multiple coins.</p><div class="code-block"><button class="copy-button" onclick="copyCode(this)">▯</button>
 <pre><code class="language-html">&lt;canvas class="sparkline" width="150" height="50"&gt;&lt;/canvas&gt;</code></pre>
</div><p>Create a simple line chart without axes or legends to serve as a sparkline:</p><div class="code-block"><button class="copy-button" onclick="copyCode(this)">▯</button>
 <pre><code class="language-js">new Chart(sparklineCtx, {
  type: 'line',
  data: {
    labels: dates,
    datasets: [{
      data: prices,
      borderColor: 'cyan',
      fill: false,
      tension: 0.3,
      pointRadius: 0
    }]
  },
  options: {
    plugins: { legend: false },
    scales: {
      x: { display: false },
      y: { display: false }
    },
    responsive: false,
    animation: false
  }
});</code></pre>
</div><div class="snippet-container" id="zzLLZ">
 <div id="jCbBB_Dialog" class="dialog-backdrop">
  <div class="dialog">
   <h2>Dialog 1</h2>
   <div class="controls"><button onclick="renderIframe(this,'DiMva_Textarea','jCbBB_IFrame')">Run</button> <button onclick="closeAll()">Close</button>
   </div>
   <div class="dialog-content"><textarea id="DiMva_Textarea" class="textarea_dialog" placeholder="Type HTML here...">&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
&lt;head&gt;
  &lt;meta charset="UTF-8" /&gt;
  &lt;title&gt;Interactive Crypto Chart&lt;/title&gt;
  &lt;meta name="viewport" content="width=device-width, initial-scale=1" /&gt;
  &lt;script src="https://cdn.jsdelivr.net/npm/chart.js"&gt;&lt;/script&gt;
  &lt;style&gt;
    :root {
      --background-color: #ffffff;
      --text-color: #222;
      --chart-grid-color: #eee;
    }

    body.dark-mode {
      --background-color: #121212;
      --text-color: #eee;
      --chart-grid-color: #444;
    }

    body {
      font-family: Arial, sans-serif;
      background-color: var(--background-color);
      color: var(--text-color);
      padding: 20px;
      text-align: center;
    }

    .controls {
      margin-bottom: 20px;
    }

    select {
      padding: 6px;
      margin: 0 10px;
    }

    button {
      padding: 6px 12px;
      margin-left: 10px;
    }

    .chart-container {
      position: relative;
      height: 400px;
      width: 100%;
      max-width: 900px;
      margin: auto;
    }

    canvas {
      background-color: var(--background-color);
    }
  &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;h2&gt;Crypto Price Tracker&lt;/h2&gt;

  &lt;div class="controls"&gt;
    &lt;label&gt;Coin:
      &lt;select id="coinSelect"&gt;
        &lt;option value="bitcoin"&gt;Bitcoin (BTC)&lt;/option&gt;
        &lt;option value="ethereum"&gt;Ethereum (ETH)&lt;/option&gt;
        &lt;option value="litecoin"&gt;Litecoin (LTC)&lt;/option&gt;
      &lt;/select&gt;
    &lt;/label&gt;

    &lt;label&gt;Range:
      &lt;select id="rangeSelect"&gt;
        &lt;option value="7"&gt;Last 7 Days&lt;/option&gt;
        &lt;option value="30"&gt;Last 30 Days&lt;/option&gt;
        &lt;option value="90"&gt;Last 90 Days&lt;/option&gt;
        &lt;option value="max"&gt;Max&lt;/option&gt;
      &lt;/select&gt;
    &lt;/label&gt;

    &lt;label&gt;Currency:
      &lt;select id="currencySelect"&gt;
        &lt;option value="usd"&gt;USD&lt;/option&gt;
        &lt;option value="eur"&gt;EUR&lt;/option&gt;
      &lt;/select&gt;
    &lt;/label&gt;

    &lt;button onclick="toggleDarkMode()"&gt;Toggle Dark Mode&lt;/button&gt;
  &lt;/div&gt;

  &lt;div class="chart-container"&gt;
    &lt;canvas id="cryptoChart"&gt;&lt;/canvas&gt;
  &lt;/div&gt;

  &lt;script&gt;
    let volumeData = [];

    function formatPriceData(rawPrices) {
      return rawPrices.map(([timestamp, price]) =&gt; {
        const date = new Date(timestamp).toISOString().split("T")[0];
        return { date, price };
      });
    }

    function formatVolumeData(rawVolumes) {
      return rawVolumes.map(([timestamp, volume]) =&gt; volume);
    }

    const ctx = document.getElementById('cryptoChart').getContext('2d');
    const chart = new Chart(ctx, {
      type: 'line',
      data: {
        labels: [],
        datasets: [{
          label: '',
          data: [],
          borderColor: 'teal',
          backgroundColor: 'rgba(0,128,128,0.2)',
          fill: true,
          tension: 0.3
        }]
      },
      options: {
        responsive: true,
        maintainAspectRatio: false,
        animation: {
          duration: 800,
          easing: 'easeOutQuart'
        },
        plugins: {
          tooltip: {
            enabled: true,
            mode: 'nearest',
            intersect: false,
            callbacks: {
              title: context =&gt; `Date: ${context[0].label}`,
              label: context =&gt; {
                const label = context.dataset.label || '';
                const value = context.parsed.y;
                return `${label}: $${value.toLocaleString()}`;
              },
              afterLabel: context =&gt; {
                const index = context.dataIndex;
                const volume = volumeData[index];
                return `Volume: ${volume.toLocaleString()}`;
              }
            }
          },
          legend: {
            labels: {
              color: getComputedStyle(document.body).getPropertyValue('--text-color')
            }
          },
          title: {
            display: true,
            text: 'Crypto Price Over Time'
          }
        },
        scales: {
          x: {
            title: { display: true, text: 'Date' },
            grid: { color: getComputedStyle(document.body).getPropertyValue('--chart-grid-color') },
            ticks: { color: getComputedStyle(document.body).getPropertyValue('--text-color') }
          },
          y: {
            title: { display: true, text: 'Price' },
            grid: { color: getComputedStyle(document.body).getPropertyValue('--chart-grid-color') },
            ticks: { color: getComputedStyle(document.body).getPropertyValue('--text-color') }
          }
        }
      }
    });

    async function updateChart() {
      const coin = document.getElementById('coinSelect').value;
      const days = document.getElementById('rangeSelect').value;
      const currency = document.getElementById('currencySelect').value;

      const url = `https://api.coingecko.com/api/v3/coins/${coin}/market_chart?vs_currency=${currency}&amp;days=${days}&amp;interval=daily`;
      const response = await fetch(url);
      const json = await response.json();

      const formattedData = formatPriceData(json.prices);
      volumeData = formatVolumeData(json.total_volumes);

      chart.data.labels = formattedData.map(d =&gt; d.date);
      chart.data.datasets[0].data = formattedData.map(d =&gt; d.price);
      chart.data.datasets[0].label = `${coin.toUpperCase()} (${currency.toUpperCase()})`;
      chart.update();
    }

    document.getElementById('coinSelect').addEventListener('change', updateChart);
    document.getElementById('rangeSelect').addEventListener('change', updateChart);
    document.getElementById('currencySelect').addEventListener('change', updateChart);

    function toggleDarkMode() {
      document.body.classList.toggle('dark-mode');
      chart.options.scales.x.grid.color = getComputedStyle(document.body).getPropertyValue('--chart-grid-color');
      chart.options.scales.x.ticks.color = getComputedStyle(document.body).getPropertyValue('--text-color');
      chart.options.scales.y.grid.color = getComputedStyle(document.body).getPropertyValue('--chart-grid-color');
      chart.options.scales.y.ticks.color = getComputedStyle(document.body).getPropertyValue('--text-color');
      chart.options.plugins.legend.labels.color = getComputedStyle(document.body).getPropertyValue('--text-color');
      chart.update();
    }

    updateChart(); // Initial load
  &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;</textarea> <iframe id="jCbBB_IFrame" class="iframe_dialog"></iframe>
   </div>
  </div>
 </div>
 <div class="snippet-header" onclick="toggleSnippetAndRefresh('zzLLZ','DiMva')">
  Click to Try it <!--<span onclick="toggleSnippetAndRefresh('zzLLZ','DiMva')">Click
			to Try it</span> --> <!-- <span onclick="openDialog('jCbBB_Dialog')">Dialog</span> -->
 </div>
 <div class="snippet-body"><textarea id="DiMva">&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
&lt;head&gt;
  &lt;meta charset="UTF-8" /&gt;
  &lt;title&gt;Interactive Crypto Chart&lt;/title&gt;
  &lt;meta name="viewport" content="width=device-width, initial-scale=1" /&gt;
  &lt;script src="https://cdn.jsdelivr.net/npm/chart.js"&gt;&lt;/script&gt;
  &lt;style&gt;
    :root {
      --background-color: #ffffff;
      --text-color: #222;
      --chart-grid-color: #eee;
    }

    body.dark-mode {
      --background-color: #121212;
      --text-color: #eee;
      --chart-grid-color: #444;
    }

    body {
      font-family: Arial, sans-serif;
      background-color: var(--background-color);
      color: var(--text-color);
      padding: 20px;
      text-align: center;
    }

    .controls {
      margin-bottom: 20px;
    }

    select {
      padding: 6px;
      margin: 0 10px;
    }

    button {
      padding: 6px 12px;
      margin-left: 10px;
    }

    .chart-container {
      position: relative;
      height: 400px;
      width: 100%;
      max-width: 900px;
      margin: auto;
    }

    canvas {
      background-color: var(--background-color);
    }
  &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;h2&gt;Crypto Price Tracker&lt;/h2&gt;

  &lt;div class="controls"&gt;
    &lt;label&gt;Coin:
      &lt;select id="coinSelect"&gt;
        &lt;option value="bitcoin"&gt;Bitcoin (BTC)&lt;/option&gt;
        &lt;option value="ethereum"&gt;Ethereum (ETH)&lt;/option&gt;
        &lt;option value="litecoin"&gt;Litecoin (LTC)&lt;/option&gt;
      &lt;/select&gt;
    &lt;/label&gt;

    &lt;label&gt;Range:
      &lt;select id="rangeSelect"&gt;
        &lt;option value="7"&gt;Last 7 Days&lt;/option&gt;
        &lt;option value="30"&gt;Last 30 Days&lt;/option&gt;
        &lt;option value="90"&gt;Last 90 Days&lt;/option&gt;
        &lt;option value="max"&gt;Max&lt;/option&gt;
      &lt;/select&gt;
    &lt;/label&gt;

    &lt;label&gt;Currency:
      &lt;select id="currencySelect"&gt;
        &lt;option value="usd"&gt;USD&lt;/option&gt;
        &lt;option value="eur"&gt;EUR&lt;/option&gt;
      &lt;/select&gt;
    &lt;/label&gt;

    &lt;button onclick="toggleDarkMode()"&gt;Toggle Dark Mode&lt;/button&gt;
  &lt;/div&gt;

  &lt;div class="chart-container"&gt;
    &lt;canvas id="cryptoChart"&gt;&lt;/canvas&gt;
  &lt;/div&gt;

  &lt;script&gt;
    let volumeData = [];

    function formatPriceData(rawPrices) {
      return rawPrices.map(([timestamp, price]) =&gt; {
        const date = new Date(timestamp).toISOString().split("T")[0];
        return { date, price };
      });
    }

    function formatVolumeData(rawVolumes) {
      return rawVolumes.map(([timestamp, volume]) =&gt; volume);
    }

    const ctx = document.getElementById('cryptoChart').getContext('2d');
    const chart = new Chart(ctx, {
      type: 'line',
      data: {
        labels: [],
        datasets: [{
          label: '',
          data: [],
          borderColor: 'teal',
          backgroundColor: 'rgba(0,128,128,0.2)',
          fill: true,
          tension: 0.3
        }]
      },
      options: {
        responsive: true,
        maintainAspectRatio: false,
        animation: {
          duration: 800,
          easing: 'easeOutQuart'
        },
        plugins: {
          tooltip: {
            enabled: true,
            mode: 'nearest',
            intersect: false,
            callbacks: {
              title: context =&gt; `Date: ${context[0].label}`,
              label: context =&gt; {
                const label = context.dataset.label || '';
                const value = context.parsed.y;
                return `${label}: $${value.toLocaleString()}`;
              },
              afterLabel: context =&gt; {
                const index = context.dataIndex;
                const volume = volumeData[index];
                return `Volume: ${volume.toLocaleString()}`;
              }
            }
          },
          legend: {
            labels: {
              color: getComputedStyle(document.body).getPropertyValue('--text-color')
            }
          },
          title: {
            display: true,
            text: 'Crypto Price Over Time'
          }
        },
        scales: {
          x: {
            title: { display: true, text: 'Date' },
            grid: { color: getComputedStyle(document.body).getPropertyValue('--chart-grid-color') },
            ticks: { color: getComputedStyle(document.body).getPropertyValue('--text-color') }
          },
          y: {
            title: { display: true, text: 'Price' },
            grid: { color: getComputedStyle(document.body).getPropertyValue('--chart-grid-color') },
            ticks: { color: getComputedStyle(document.body).getPropertyValue('--text-color') }
          }
        }
      }
    });

    async function updateChart() {
      const coin = document.getElementById('coinSelect').value;
      const days = document.getElementById('rangeSelect').value;
      const currency = document.getElementById('currencySelect').value;

      const url = `https://api.coingecko.com/api/v3/coins/${coin}/market_chart?vs_currency=${currency}&amp;days=${days}&amp;interval=daily`;
      const response = await fetch(url);
      const json = await response.json();

      const formattedData = formatPriceData(json.prices);
      volumeData = formatVolumeData(json.total_volumes);

      chart.data.labels = formattedData.map(d =&gt; d.date);
      chart.data.datasets[0].data = formattedData.map(d =&gt; d.price);
      chart.data.datasets[0].label = `${coin.toUpperCase()} (${currency.toUpperCase()})`;
      chart.update();
    }

    document.getElementById('coinSelect').addEventListener('change', updateChart);
    document.getElementById('rangeSelect').addEventListener('change', updateChart);
    document.getElementById('currencySelect').addEventListener('change', updateChart);

    function toggleDarkMode() {
      document.body.classList.toggle('dark-mode');
      chart.options.scales.x.grid.color = getComputedStyle(document.body).getPropertyValue('--chart-grid-color');
      chart.options.scales.x.ticks.color = getComputedStyle(document.body).getPropertyValue('--text-color');
      chart.options.scales.y.grid.color = getComputedStyle(document.body).getPropertyValue('--chart-grid-color');
      chart.options.scales.y.ticks.color = getComputedStyle(document.body).getPropertyValue('--text-color');
      chart.options.plugins.legend.labels.color = getComputedStyle(document.body).getPropertyValue('--text-color');
      chart.update();
    }

    updateChart(); // Initial load
  &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;</textarea> <br> <button onclick="renderIframe(this,'DiMva','jCbBB')">Run</button>
  <div id="jCbBB_FloatingLog" class="floatingLog" aria-live="polite" role="alert"></div> <iframe id="jCbBB" class="result_iframe" style="display: none;"></iframe>
  <script>
			{
				let editor = CodeMirror.fromTextArea(document
						.getElementById("DiMva"), {
					mode : "htmlmixed",
					lineNumbers : false,
					tabSize : 2
				});
			    const mode = localStorage.getItem("mode") || "light";  
			    const newTheme = mode === "dark" ? "material" : "default";
			    editor.setOption("theme", newTheme);
			    
				codeMirrorMap.set("DiMva", editor);

				let editor1 = CodeMirror.fromTextArea(document.getElementById("DiMva_Textarea"), {
					mode : "htmlmixed",
					lineNumbers : false,
					tabSize : 2
				});
			    editor1.setOption("theme", newTheme);				
				
				codeMirrorMap.set("DiMva_Textarea", editor1);
			}
		    function openDialog(id) {
		        closeAll();
		        document.getElementById(id).style.display = 'flex';
		        setTimeout(() => {
		        	 codeMirrorMap.get("DiMva_Textarea").refresh();
		        }, 100); // 100ms 
		      }

		      function closeAll() {
		        document.querySelectorAll('.dialog-backdrop').forEach(el => {
		          el.style.display = 'none';
		        });
		      }			
		</script>
 </div>
</div><h3 id="status-indicators">Status Indicators</h3><p>Add colored badges or icons near coins indicating price movement:</p><ul>
 <li>Green up-arrow for price increase</li>
 <li>Red down-arrow for price decrease</li>
 <li>Grey dash for no change</li>
</ul><p>Example (pseudo-HTML):</p><div class="code-block"><button class="copy-button" onclick="copyCode(this)">▯</button>
 <pre><code class="language-html">&lt;span class="status up"&gt;▲ +2.5%&lt;/span&gt;
&lt;span class="status down"&gt;▼ -1.3%&lt;/span&gt;
&lt;span class="status neutral"&gt;– 0%&lt;/span&gt;</code></pre>
</div><h3 id="summary">Summary</h3><p>You now know how to:</p><ul>
 <li>Add detailed <strong>tooltips</strong> with price, volume, and date info</li>
 <li>Build <strong>dropdown filters</strong> for coins, time ranges, and currencies to dynamically update charts</li>
 <li>Enhance UX with <strong>smooth animations</strong> and <strong>dark mode theming</strong></li>
 <li>Ensure your visualizer is fully <strong>responsive</strong></li>
 <li>Include <strong>sparklines</strong> and <strong>status indicators</strong> for additional polish</li>
</ul><p>These interactive and polished features make your cryptocurrency visualizer both powerful and delightful to use.</p><div class = "chapter-navi-section">
<a href="javascript-data-visualization-covid-19-trend-tracker.htm" class="nav-button prev">←</a>
<a href='javascript-data-visualization.htm#cryptocurrency-price-visualizer' class="nav-button toc-link">Index</a>
<a href="javascript-data-visualization-performance-and-optimization.htm" class="nav-button next">→</a>
</div>
<section class="download-section">
  <div class="book-cover" style="background-color: #f9f6f1;border: 1px solid #ccc;"> 
    <div class="book-cover-title" style="font-size: 16px;color: #333;top: 20px;">JavaScript Data Visualization</div>
    <div class="book-cover-author">readbytes</div>
    <div class="book-cover-bottom-stripe" style="background-color: #333;"></div>
    <img class="book-cover-icon" style="width: 90px;height: 90px;top: 60px;" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFoAAABaCAYAAAA4qEECAAAC0UlEQVR4Xu3dMWsUURSG4fwr2U6zJI0WKZSAaa0EG7tU2giWimLETrQQQRCxUDsbK3+IYOWCiFU06IQz356ZuffOvXdm4A28ze585OxDsLDZnR3zs1pf+rHavXhKWdpY2/Mf50HKEMgV+4cs/1z8/v6OMiTYm9Zfsz5M42r9VQNdLqArBXSlgK4U0JUCulKLgrb39aW7ObQY6PXl/S3Qrs6e1f3ULQZaMYfS/dTZ2xYDvff6g9tS7ge6YEBXCuhKAV0poCsFdKWArtQk0G9e3Tt9dnLc2+dPD1sboCOzv2Ool8/vujsFBtpJMYfydgoMtFMqWOpuLtnbgC6YvQ3ogtnbgC6YvQ3ogtnbgC6YvQ3ogtnbgC6YvQ3ogtnboqCvHR20xn11/UKF6gNL3Y1JP0dXV68fbG01+3wUtP6yvp4+OXZ3CtUHlrpL7ew/tvRz9KV7zT4LtGmW0O+/fnRr3l86tH4u/Xwhv88+C7QJ6MhdakBH7lIDOnKXGtCRu9SAjtylBnTkLjWgI3e67evnt7fnG6BH7EJqdkCP2IXU7IAesft169DN2wE9YqfAQDt35NgpMNDOHTl2Cgy0c0eOnQID7dxhXwvJ2ykw0M4d9rWQvJ0CA+3cYV8LydspMNDOHfa1C/cfuQ3tFBho5w77mgID/f99oCeGDsnbKXBp6JDUR7PPAm12QO8CvVXzfhe0QoWC6fOhOwUOhX7w4rGbt+vKPgu02QE9YqfAi4Meai7QITU7oEfsQmp2s4S+cfumW/P+XKDvXFm7ebtZQusBeshcoL8c7rt5O6BH7BQYaOeOHDsFBtq5I8dOgYF27sixU2CgnTty7BQYaOeOHDsFBtq5I8dOgRcHPVQXdEhT7Wb536RDAQ30Vs1uNtAUF9CVArpSQFcK6EoBXSmgK9WG5qtQi2RNV803KsuLlDn7RcpgF6qF3Pz8fWOjD1JyrS9g/wOlHj3Oru4PcQAAAABJRU5ErkJggg=="/>
  </div>
  <div class="download-info">
    <h2 id='bottom'>Download This Ebook</h2>
    <p class="format-label">Available formats:</p>
    <div class="download-buttons">
      <a href="javascript-data-visualization.pdf" class="download-button">📄 PDF</a>
      <a href="javascript-data-visualization.epub" class="download-button">📘 EPUB</a>
    </div>
  </div>
</section><div class='related-books'>
<h2>Java Introduction Books</h2>
<div class='related-book-list'>
<a href="javascript-data-visualization.htm">
<div class="book-cover" style="background-color: #f9f6f1;border: 1px solid #ccc;"> 
    <div class="book-cover-title" style="font-size: 16px;color: #333;top: 20px;">JavaScript Data Visualization</div>
    <div class="book-cover-author">readbytes</div>
    <div class="book-cover-bottom-stripe" style="background-color: #333;"></div>
    <img class="book-cover-icon" style="width: 90px;height: 90px;top: 60px;" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFoAAABaCAYAAAA4qEECAAAC0UlEQVR4Xu3dMWsUURSG4fwr2U6zJI0WKZSAaa0EG7tU2giWimLETrQQQRCxUDsbK3+IYOWCiFU06IQz356ZuffOvXdm4A28ze585OxDsLDZnR3zs1pf+rHavXhKWdpY2/Mf50HKEMgV+4cs/1z8/v6OMiTYm9Zfsz5M42r9VQNdLqArBXSlgK4U0JUCulKLgrb39aW7ObQY6PXl/S3Qrs6e1f3ULQZaMYfS/dTZ2xYDvff6g9tS7ge6YEBXCuhKAV0poCsFdKWArtQk0G9e3Tt9dnLc2+dPD1sboCOzv2Ool8/vujsFBtpJMYfydgoMtFMqWOpuLtnbgC6YvQ3ogtnbgC6YvQ3ogtnbgC6YvQ3ogtnbgC6YvQ3ogtnboqCvHR20xn11/UKF6gNL3Y1JP0dXV68fbG01+3wUtP6yvp4+OXZ3CtUHlrpL7ew/tvRz9KV7zT4LtGmW0O+/fnRr3l86tH4u/Xwhv88+C7QJ6MhdakBH7lIDOnKXGtCRu9SAjtylBnTkLjWgI3e67evnt7fnG6BH7EJqdkCP2IXU7IAesft169DN2wE9YqfAQDt35NgpMNDOHTl2Cgy0c0eOnQID7dxhXwvJ2ykw0M4d9rWQvJ0CA+3cYV8LydspMNDOHfa1C/cfuQ3tFBho5w77mgID/f99oCeGDsnbKXBp6JDUR7PPAm12QO8CvVXzfhe0QoWC6fOhOwUOhX7w4rGbt+vKPgu02QE9YqfAi4Meai7QITU7oEfsQmp2s4S+cfumW/P+XKDvXFm7ebtZQusBeshcoL8c7rt5O6BH7BQYaOeOHDsFBtq5I8dOgYF27sixU2CgnTty7BQYaOeOHDsFBtq5I8dOgRcHPVQXdEhT7Wb536RDAQ30Vs1uNtAUF9CVArpSQFcK6EoBXSmgK9WG5qtQi2RNV803KsuLlDn7RcpgF6qF3Pz8fWOjD1JyrS9g/wOlHj3Oru4PcQAAAABJRU5ErkJggg=="/>
  </div>
</a>



<a href='java.htm'><div class='book-cover' style='background-color: #f9f6f1;color: #111111;border: 1px solid #ccc;display: flex;justify-content: center;align-items: center;text-align: center;'>More Java Books</div></a>
</div>
</div>
  </div>
  <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/prism.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
  
  <script>
    function copyCode(button) {
      const code = button.nextElementSibling.innerText;
      navigator.clipboard.writeText(code).then(() => {
        button.textContent = 'Copied!';
        setTimeout(() => { button.textContent = 'Copy'; }, 1500);
      });
    }
  </script>  
<div id="floatingLog" aria-live="polite" role="alert"></div>
<footer class="page-footer">
    <nav>
      <a href="https://readbytes.github.io">Home</a> | 
      Email:<script language="JavaScript" type="text/javascript">
var part1 = 'yinpeng';var part6 = '263';var part2 = Math.pow(2,6);var part3 = String.fromCharCode(part2);var part4 = 'hotmail dot com';var part5 = part1 + String.fromCharCode(part2) + part4;document.write(part1 + part6 + part3 + part4);
</script>
    </nav>
  <p>© 2025 — All rights reserved.</p>    
  </footer>

</body>
</html>