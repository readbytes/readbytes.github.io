<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Java Streams Parallel Streams Basics</title>
<link rel='shortcut icon' href='https://java2s.com/style/favicon.ico'>
<link href="https://fonts.googleapis.com/css2?family=Merriweather&display=swap" rel="stylesheet" />
<link href="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet" />


  <script>
  const mode = localStorage.getItem('mode') || 'light';
  document.documentElement.classList.add(`${mode}-mode`);
  </script>   
<style> 
html {
  scroll-behavior: smooth;
}

body {
  font-family: 'Merriweather', serif;
  margin: 0;
  padding: 2rem 1rem;
  font-size: 15px;
  line-height: 1.5;
  transition: background-color 0.3s, color 0.3s;
}

.container {
  max-width: 700px;
  margin: 0 auto;
  padding: 1rem 2rem;
  box-shadow: 0 0 15px rgba(0,0,0,0.1);
}

h1, h2, h3 {
  font-weight: 600;
  margin-top: 2.5rem;
  margin-bottom: 1rem;
  line-height: 1.2;
}

h1 { font-size: 1.8rem; }
h2 { font-size: 1.4rem; }
h3 { font-size: 1.2rem; }

table {
  width: 100%;
  border-collapse: collapse;
  font-family: sans-serif;
  font-size: 1em;
  margin: 1em 0;
}

th, td {
  padding: 0.6em 1em;
  text-align: left;
  border: 1px solid;
}

tr:nth-child(even) {
  background-color: inherit;
}

tr:hover {
  background-color: inherit;
}

a {
  text-decoration: none;
  transition: color 0.2s;
}

a:hover {
  text-decoration: underline;
}

code {
  color: #d35400;
}

.book-title-chapter {
  font-family: 'Merriweather', serif;
  font-size: 2rem;
  font-weight: bold;
  text-align: center;
  margin-bottom: 2rem;
  border-bottom: 2px solid;
  padding-bottom: 0.5rem;
}

.book-subtitle-chapter {
  text-align: center;
  font-size: 1rem;
  margin-top: -1rem;
  margin-bottom: 2rem;
}

.related-books {
  margin-top: 40px;
}

.related-book-list {
  display: flex;
  flex-wrap: wrap;
  gap: 20px;
}

    .book-cover {
      width: 130px;
      height: 180px;
      font-family: Arial, sans-serif;
      position: relative;
      overflow: hidden;      
      line-height: normal;
      box-shadow: 2px 2px 4px rgba(0,0,0,0.1);
    }
    .book-cover-bottom-stripe {
      position: absolute;
      bottom: 0;
      left: 0;
      height: 5px;
      width: 100%;
    }
    .book-cover-title {
      position: absolute;
      width: 100%;
      text-align: center;
      font-weight: bold;
    }
     
    .book-cover-icon {
      position: absolute;
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      align-items: center;
      justify-content: center; 
    }

    .book-cover-author {
      position: absolute;
      bottom: 10px;
      width: 100%;
      text-align: center;
      font-size: 8px;
      color: #333;
    }

.page-footer {
  margin-top: 4rem;
  padding: 1rem 0;
  text-align: center;
  font-size: 0.85rem;
  border-top: 1px solid;
}

.chapter-navi-section {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding-bottom: 10px;
}

.nav-link {
  color: inherit;
  text-decoration: none;
  opacity: 0.5;
  transition: opacity 0.3s ease, text-decoration 0.3s ease;
}

.nav-link:hover {
  opacity: 0.9;
  text-decoration: underline;
}

.prev { text-align: left; }
.toc-link { text-align: center; }
.next { text-align: right; }

.download-section {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 2rem;
  padding: 2rem 1rem;
  max-width: 600px;
  margin: 3rem auto;
  border-radius: 12px;
  box-shadow: 0 4px 10px rgba(0,0,0,0.05);
}

.download-info h2 {
  margin: 0 0 0.5rem;
  font-size: 1.2rem;
}

.format-label {
  margin: 0 0 0.5rem;
  font-size: 0.95rem;
}

.download-buttons {
  display: flex;
  gap: 1rem;
}

.download-button {
  background-color: #4A90E2;
  color: white;
  padding: 0.5em 1.2em;
  border-radius: 25px;
  font-size: 0.95rem;
  text-decoration: none;
  transition: background-color 0.3s ease;
}

.download-button:hover {
  background-color: #357ABD;
}

.code-block {
  position: relative;
  margin-bottom: 1em;
}

.copy-button {
  background: transparent;
  color: white;
  position: absolute;
  top: 8px;
  right: 8px;
  border: none;
  padding: 4px 8px;
  font-size: 12px;
  border-radius: 4px;
  cursor: pointer;
  z-index: 1;
}

.copy-button:hover {
  background-color: #0056b3;
}

.snippet-container {
  overflow: hidden;
}

.snippet-header {
  padding: 0.75rem 1rem;
  cursor: pointer;
  font-size: 1rem;
    background-color: #eeeeee;
    color:  #111111; 
    border-radius: 8px;
    cursor: pointer;
    box-shadow: 0 4px 6px rgba(0,0,0,0.1);  
}

.snippet-body {
  display: none;
  font-family: monospace;
}

.snippet-container.open .snippet-body {
  display: block;
}

.CodeMirror {
  border: 2px solid #ccc;
  border-radius: 4px;
  resize: vertical;
}

/* === Light Mode === */
html.light-mode {
  background-color: #f8f7f5;
  color: #333;
}

html.light-mode .container {
  background: white;
}

html.light-mode .book-title-chapter {
  color: #2c3e50;
  border-color: #ccc;
}
html.light-mode .book-subtitle-chapter{
  color: #888;
}

html.light-mode .page-footer,
html.light-mode .series-name,
html.light-mode .book-subtitle,
html.light-mode .format-label {
  color: #888;
}

html.light-mode .related-books h2 {
  color: #333;
  border-bottom: 2px solid #eee;
}

html.light-mode .book-title {
  color: #fff;
}

html.light-mode .book-cover {
  border: 1px solid #ccc;
}

html.light-mode th {
  background-color: #f2f2f2;
}

html.light-mode tr:nth-child(even) {
  background-color: #fafafa;
}

html.light-mode tr:hover {
  background-color: #e6f7ff;
}

html.light-mode a,
html.light-mode .page-footer a {
  color: #000;
}

/* === Dark Mode === */
html.dark-mode {
  background-color: #181818;
  color: #e0e0e0;
}

html.dark-mode .container {
  background: #222;
}

html.dark-mode .book-title-chapter {
  color: #ddd;
  border-color: #444;
}

html.dark-mode .snippet-header {
    background-color: #333;
    color:  #ddd; 
}


html.dark-mode .book-subtitle-chapter,
html.dark-mode .page-footer,
html.dark-mode .series-name,
html.dark-mode .book-subtitle,
html.dark-mode .book-footer,
html.dark-mode .format-label {
  color: #aaa;
}

html.dark-mode .related-books h2 {
  color: #ddd;
  border-bottom: 2px solid #333;
}

html.dark-mode .book-title {
  color: #fff;
}

html.dark-mode .book-cover {
  border: 1px solid #555;
}

html.dark-mode th {
  background-color: #333;
  color: #fff;
}

html.dark-mode td {
  border-color: #444;
}

html.dark-mode tr:nth-child(even) {
  background-color: #2a2a2a;
}

html.dark-mode tr:hover {
  background-color: #2c3e50;
}

html.dark-mode a,
html.dark-mode .page-footer a {
  color: #eee;
}

    .dialog-backdrop {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      background: rgba(0,0,0,0.5);
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 10;
    }

    .dialog {
      background: white;
      padding: 20px;
      width: 90vw;
      height: 80vh;
      border-radius: 8px;
      box-shadow: 0 0 20px rgba(0,0,0,0.3);
      display: flex;
      flex-direction: column;
    }
    .dialog-content {
      display: flex;
      flex: 1;
      gap: 20px;
      margin-top: 10px;
    }
    .dialog h2 {
      margin-top: 0;
    }

    .textarea_dialog {
      width: 50%;
      height: 100%;
      resize: none;
      font-family: monospace;
      font-size: 14px;
      padding: 10px;
      box-sizing: border-box;
      border: 1px solid #ccc;
    }

    .iframe_dialog {
      width: 50%;
      height: 100%;
      border: 1px solid #ccc;
    }
    .controls_dialog {
      display: flex;
      justify-content: space-between;
      margin-top: 10px;
    }    
    button { padding: 0.5em 1em; background: green; color: white; border: none; cursor: pointer; }
    button:hover { background: #1e7e34; }
    .result_iframe { width:99%; height:200px; margin-top: 1em;  resize: both;border:1px solid #ccc;}        
</style>
</head>
<body> 
  <div class="container">
    <div class = "chapter-navi-section">
<a href="java-streams-optional-and-streams.htm" class="nav-button prev">←</a>
<a href='java-streams.htm#parallel-streams-basics' class="nav-button toc-link">Index</a>
<a href="java-streams-advanced-mapping-techniques.htm" class="nav-button next">→</a>
</div>

    <h1 class="book-title-chapter" id = 'top'>Parallel Streams Basics</h1>
    <h3 class="book-subtitle-chapter">Java Streams</h3>   
    <!-- <h1 class ="chapter-title"></h1> -->
    <h2 id='introduction-to-parallel-streams'>9.1 Introduction to Parallel Streams</h2><p>Parallel streams provide a <strong>simple and powerful way to perform concurrent data processing</strong> in Java. By splitting a stream’s workload across multiple threads, parallel streams can leverage multi-core processors to improve performance for large data sets or computationally intensive tasks — all without explicit thread management.</p><h4 id="how-to-create-parallel-streams">How to Create Parallel Streams</h4><p>You can create a parallel stream in two ways:</p><ul>
 <li><p>By calling <strong><code>parallelStream()</code></strong> on a collection:</p>
  <div class="code-block"><button class="copy-button" onclick="copyCode(this)">▯</button>
   <pre><code class="language-java">List&lt;String&gt; data = List.of("a", "b", "c");
data.parallelStream()...;</code></pre>
  </div></li>
 <li><p>By converting an existing sequential stream using <strong><code>.parallel()</code></strong>:</p>
  <div class="code-block"><button class="copy-button" onclick="copyCode(this)">▯</button>
   <pre><code class="language-java">Stream&lt;String&gt; stream = data.stream();
stream.parallel()...;</code></pre>
  </div></li>
</ul><p>Internally, the Java runtime uses the <strong>common ForkJoinPool</strong> to divide the stream elements into smaller chunks, processing them in parallel threads and combining results efficiently.</p><h4 id="benefits-of-parallel-streams">Benefits of Parallel Streams</h4><ul>
 <li><strong>Improved performance:</strong> Tasks that can be broken into independent units often run faster by utilizing multiple CPU cores.</li>
 <li><strong>Simple concurrency:</strong> Parallelism is achieved with minimal code changes—just switch from <code>stream()</code> to <code>parallelStream()</code> or <code>.parallel()</code>.</li>
 <li><strong>Better CPU utilization:</strong> Especially effective for CPU-bound operations on large collections or data sources.</li>
</ul><h4 id="example-sequential-vs-parallel-processing">Example: Sequential vs Parallel Processing</h4><p>The following example demonstrates summing the squares of numbers sequentially and in parallel, measuring the time taken for each.</p><div class="code-block"><button class="copy-button" onclick="copyCode(this)">📋</button>
 <pre><code class="language-java">import java.util.List;
import java.util.stream.IntStream;

public class ParallelStreamExample {
    public static void main(String[] args) {
        List&lt;Integer&gt; numbers = IntStream.rangeClosed(1, 10_000_000).boxed().toList();

        long startSeq = System.currentTimeMillis();
        long sumSeq = numbers.stream()
                            .mapToLong(n -&gt; n * n)
                            .sum();
        long durationSeq = System.currentTimeMillis() - startSeq;
        System.out.println("Sequential sum: " + sumSeq + ", Time: " + durationSeq + " ms");

        long startPar = System.currentTimeMillis();
        long sumPar = numbers.parallelStream()
                            .mapToLong(n -&gt; n * n)
                            .sum();
        long durationPar = System.currentTimeMillis() - startPar;
        System.out.println("Parallel sum: " + sumPar + ", Time: " + durationPar + " ms");
    }
}</code></pre>
</div><p>In this example, the parallel stream often completes faster by dividing the workload, but the actual speedup depends on hardware, data size, and task complexity.</p><h3 id="summary">Summary</h3><p>Parallel streams allow you to harness multicore CPUs for faster data processing with minimal coding effort. By understanding how to switch between sequential and parallel streams, you can optimize your applications for performance while maintaining readable, declarative code.</p><div class = "chapter-navi-section">
<a href="#top" class="nav-button prev">↑</a>
<a href='java-streams.htm#parallel-streams-basics' class="nav-button toc-link">Index</a>
<a href="#bottom" class="nav-button next">↓</a>
</div>
<h2 id='when-to-use-parallel-streams'>9.2 When to Use Parallel Streams</h2><p>Parallel streams can significantly speed up data processing by distributing work across multiple threads. However, <strong>not all tasks benefit from parallelization</strong>, so understanding when to use parallel streams is essential for writing efficient and correct code.</p><h4 id="guidelines-for-using-parallel-streams">Guidelines for Using Parallel Streams</h4><ol>
 <li><p><strong>Large Data Sets</strong> Parallel streams shine when processing large collections or data sources. Small or trivial data sets often incur more overhead in thread management than the performance gains they bring.</p></li>
 <li><p><strong>CPU-Bound Operations</strong> If the operation on each element requires significant computation (e.g., complex calculations, transformations), parallel processing can reduce overall time by leveraging multiple cores.</p></li>
 <li><p><strong>Independence of Elements</strong> Operations should be <strong>stateless and independent</strong> per element, meaning the processing of one item does not depend on or affect others. This avoids race conditions and synchronization bottlenecks.</p></li>
 <li><p><strong>Cost Per Element</strong> The work done per element must be sufficiently expensive to justify the overhead of parallel execution. Simple, fast operations like incrementing integers or light filtering may not benefit.</p></li>
</ol><h4 id="when-to-avoid-parallel-streams">When to Avoid Parallel Streams</h4><ul>
 <li><strong>I/O-bound tasks:</strong> Tasks blocked by I/O (file, network) might not gain much from parallel streams.</li>
 <li><strong>Small or ordered data:</strong> Parallelizing small streams or streams with strict ordering requirements might degrade performance.</li>
 <li><strong>Shared mutable state:</strong> If the operation involves shared mutable objects, thread safety becomes complex.</li>
</ul><h4 id="comparison-to-other-concurrency-tools">Comparison to Other Concurrency Tools</h4><p>While parallel streams abstract away thread management, traditional frameworks like <strong>ForkJoinPool</strong> and <strong>ExecutorService</strong> provide finer control over thread creation, task scheduling, and exception handling. Parallel streams are easier to use but less flexible.</p><ul>
 <li>Use <strong>parallel streams</strong> for straightforward data-parallel computations.</li>
 <li>Use <strong>ForkJoinPool</strong> or <strong>ExecutorService</strong> when you need custom thread pools, more control, or complex concurrency patterns.</li>
</ul><h3 id="example-when-parallel-streams-help">Example: When Parallel Streams Help</h3><div class="code-block"><button class="copy-button" onclick="copyCode(this)">📋</button>
 <pre><code class="language-java">import java.util.List;
import java.util.stream.IntStream;

public class ParallelStreamGuidelineExample {
    public static void main(String[] args) {
        List&lt;Integer&gt; largeNumbers = IntStream.rangeClosed(1, 1_000_000).boxed().toList();

        // CPU-intensive operation: compute sum of squares
        long sumParallel = largeNumbers.parallelStream()
                                       .mapToLong(n -&gt; heavyComputation(n))
                                       .sum();

        System.out.println("Sum with parallel stream: " + sumParallel);
    }

    private static long heavyComputation(int n) {
        // Simulate expensive operation
        long result = 0;
        for (int i = 0; i &lt; 1000; i++) {
            result += Math.sqrt(n * i);
        }
        return result;
    }
}</code></pre>
</div><h3 id="example-when-not-to-use-parallel-streams">Example: When Not to Use Parallel Streams</h3><div class="code-block"><button class="copy-button" onclick="copyCode(this)">📋</button>
 <pre><code class="language-java">import java.util.List;

public class SmallDatasetExample {
    public static void main(String[] args) {
        List&lt;String&gt; smallList = List.of("a", "b", "c");

        // Parallel overhead may outweigh benefits here
        long count = smallList.parallelStream()
                              .filter(s -&gt; s.startsWith("a"))
                              .count();

        System.out.println("Count: " + count);
    }
}</code></pre>
</div><h3 id="summary">Summary</h3><p>Parallel streams are best suited for <strong>large, CPU-bound, independent data processing tasks</strong> with non-trivial per-element costs. For smaller, I/O-bound, or stateful operations, sequential streams or other concurrency mechanisms may be more appropriate. Understanding these trade-offs helps you choose the right tool for efficient and safe parallelism.</p><div class = "chapter-navi-section">
<a href="#top" class="nav-button prev">↑</a>
<a href='java-streams.htm#parallel-streams-basics' class="nav-button toc-link">Index</a>
<a href="#bottom" class="nav-button next">↓</a>
</div>
<h2 id='example-parallel-vs-sequential-performance'>9.3 Example: Parallel vs Sequential Performance</h2><p>To understand the real benefits of parallel streams, it helps to compare their performance with sequential streams on a sufficiently large dataset. This example processes a large list of numbers, applying a moderately expensive transformation, and measures the execution time of both approaches.</p><h4 id="setup-squaring-numbers-with-a-simulated-workload">Setup: Squaring Numbers with a Simulated Workload</h4><p>We'll square numbers from 1 to 10 million, simulating some CPU work with a small delay, then compare sequential and parallel execution times.</p><div class="code-block"><button class="copy-button" onclick="copyCode(this)">📋</button>
 <pre><code class="language-java">import java.util.List;
import java.util.stream.IntStream;

public class ParallelVsSequentialPerformance {
    public static void main(String[] args) {
        List&lt;Integer&gt; numbers = IntStream.rangeClosed(1, 10_000_000).boxed().toList();

        // Sequential processing
        long startSeq = System.currentTimeMillis();
        long sumSeq = numbers.stream()
                            .mapToLong(ParallelVsSequentialPerformance::simulateWork)
                            .sum();
        long durationSeq = System.currentTimeMillis() - startSeq;
        System.out.println("Sequential sum: " + sumSeq + ", Time: " + durationSeq + " ms");

        // Parallel processing
        long startPar = System.currentTimeMillis();
        long sumPar = numbers.parallelStream()
                            .mapToLong(ParallelVsSequentialPerformance::simulateWork)
                            .sum();
        long durationPar = System.currentTimeMillis() - startPar;
        System.out.println("Parallel sum: " + sumPar + ", Time: " + durationPar + " ms");
    }

    private static long simulateWork(int n) {
        // Simulate moderate CPU workload
        double result = 0;
        for (int i = 0; i &lt; 50; i++) {
            result += Math.sqrt(n + i);
        }
        return (long) result;
    }
}</code></pre>
</div><h4 id="sample-output">Sample Output</h4><div class="code-block"><button class="copy-button" onclick="copyCode(this)">▯</button>
 <pre><code class="language-bash">Sequential sum: 670962544, Time: 2300 ms
Parallel sum: 670962544, Time: 800 ms</code></pre>
</div><h3 id="analysis">Analysis</h3><ul>
 <li><p>The <strong>parallel stream</strong> typically runs faster, using multiple CPU cores to divide the workload.</p></li>
 <li><p>The <strong>sequential stream</strong> processes each element one by one on a single thread.</p></li>
 <li><p>The speedup depends on:</p>
  <ul>
   <li><strong>Number of CPU cores:</strong> More cores mean more parallelism.</li>
   <li><strong>Task complexity:</strong> Heavier computations per element justify parallel overhead.</li>
   <li><strong>Data size:</strong> Smaller datasets may see no benefit or even slower execution due to overhead.</li>
  </ul></li>
</ul><h3 id="when-parallelism-may-hurt-performance">When Parallelism May Hurt Performance</h3><ul>
 <li><p>Overhead of thread management and task splitting can outweigh benefits for:</p>
  <ul>
   <li>Small datasets.</li>
   <li>Simple, fast operations.</li>
   <li>Streams requiring strict ordering.</li>
  </ul></li>
 <li><p>I/O-bound operations may not improve since bottleneck is external resource, not CPU.</p></li>
</ul><h3 id="summary">Summary</h3><p>This example highlights how parallel streams can significantly reduce processing time for CPU-intensive, large-scale tasks. Benchmarking with your own data and operations is essential to decide if parallel streams are appropriate for your use case.</p><div class = "chapter-navi-section">
<a href="#top" class="nav-button prev">↑</a>
<a href='java-streams.htm#parallel-streams-basics' class="nav-button toc-link">Index</a>
<a href="#bottom" class="nav-button next">↓</a>
</div>
<h2 id='pitfalls-and-thread-safety'>9.4 Pitfalls and Thread Safety</h2><p>While parallel streams simplify concurrent data processing, they also introduce <strong>risks related to thread safety and correctness</strong>. Understanding these pitfalls is crucial to avoid subtle bugs and unpredictable behavior.</p><h4 id="common-pitfalls-with-parallel-streams">Common Pitfalls with Parallel Streams</h4><ol>
 <li><p><strong>Non-Associative Operations</strong> Operations like <code>reduce()</code> require the accumulator to be <strong>associative</strong> and <strong>stateless</strong>. Non-associative or stateful reductions can produce incorrect results or exceptions in parallel execution.</p></li>
 <li><p><strong>Shared Mutable State</strong> Modifying shared objects (like collections or counters) inside stream operations—especially intermediate or terminal ones—can cause race conditions and data corruption when streams run in parallel.</p></li>
 <li><p><strong>Side-Effects in Intermediate Operations</strong> Intermediate operations like <code>map()</code>, <code>filter()</code>, or <code>peek()</code> should be <strong>stateless</strong> and without side effects, as they might be invoked multiple times or out of order in parallel.</p></li>
</ol><h3 id="example-1-unsafe-shared-mutable-state">Example 1: Unsafe Shared Mutable State</h3><p>This example demonstrates a common mistake—updating a non-thread-safe collection inside a parallel stream, leading to unpredictable output:</p><div class="code-block"><button class="copy-button" onclick="copyCode(this)">📋</button>
 <pre><code class="language-java">import java.util.ArrayList;
import java.util.List;

public class UnsafeParallelExample {
    public static void main(String[] args) {
        List&lt;Integer&gt; numbers = List.of(1, 2, 3, 4, 5);
        List&lt;Integer&gt; results = new ArrayList&lt;&gt;();

        // Parallel stream modifying shared list — NOT thread-safe!
        numbers.parallelStream()
               .map(n -&gt; n * 2)
               .forEach(results::add);

        System.out.println("Results: " + results);
    }
}</code></pre>
</div><p><strong>Problem:</strong> <code>ArrayList</code> is not thread-safe. Concurrent <code>add()</code> calls cause data races and may miss elements or throw exceptions.</p><h3 id="example-2-safe-alternative-using-thread-safe-collector">Example 2: Safe Alternative Using Thread-Safe Collector</h3><p>Use built-in thread-safe collectors like <code>Collectors.toList()</code> to safely gather results in parallel streams:</p><div class="code-block"><button class="copy-button" onclick="copyCode(this)">📋</button>
 <pre><code class="language-java">import java.util.List;
import java.util.stream.Collectors;

public class SafeParallelExample {
    public static void main(String[] args) {
        List&lt;Integer&gt; numbers = List.of(1, 2, 3, 4, 5);

        List&lt;Integer&gt; results = numbers.parallelStream()
                                       .map(n -&gt; n * 2)
                                       .collect(Collectors.toList()); // thread-safe

        System.out.println("Results: " + results);
    }
}</code></pre>
</div><p>Here, <code>collect()</code> handles thread-safe accumulation internally, avoiding shared mutable state issues.</p><h3 id="additional-tips-for-thread-safety">Additional Tips for Thread Safety</h3><ul>
 <li>Prefer <strong>stateless</strong> operations without side effects.</li>
 <li>Avoid modifying external state inside streams.</li>
 <li>Use <strong>immutable data structures</strong> or <strong>thread-safe collectors</strong>.</li>
 <li>For custom reduction, ensure accumulator and combiner are associative and stateless.</li>
</ul><h3 id="summary">Summary</h3><p>Parallel streams can introduce concurrency bugs when shared mutable state or non-associative operations are involved. Avoid side-effects in stream pipelines and rely on thread-safe collectors and stateless functions to ensure correct, predictable parallel processing.</p><div class = "chapter-navi-section">
<a href="java-streams-optional-and-streams.htm" class="nav-button prev">←</a>
<a href='java-streams.htm#parallel-streams-basics' class="nav-button toc-link">Index</a>
<a href="java-streams-advanced-mapping-techniques.htm" class="nav-button next">→</a>
</div>
<section class="download-section">
  <div class="book-cover" style="background-color: #f9f6f1;border: 1px solid #ccc;"> 
    <div class="book-cover-title" style="font-size: 18px;color: #333;top: 20px;">Java Streams</div>
    <div class="book-cover-author">readbytes</div>
    <div class="book-cover-bottom-stripe" style="background-color: #333;"></div>
    <img class="book-cover-icon" style="width: 80px;height: 80px;top: 60px;" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFoAAABaCAYAAAA4qEECAAACbklEQVR4Xu3cP4oUQRiG8S8xEzESDI1MPIRHEQQPYTK9iCyewMxrGIiCoaFnWFkMTIwUxD894KI8VbNdVdNfzdR87w+eRKa2ul+WVZM1G8+3ud+d+mhBvbZ0DO/uWEAcoVfhcIBehcQRvAvt1dz7gjjaVfxcrhcmxTiwvkudcGAN7YQDa2gnHFhDO+HAGtoJB24ZmmdzhcdBWobh2VzhcZCWYXg2V3gcpGUYns0VHgdpGYZnc4XHQVqG4dlc4XGQlmF4Nld4HKRlGJ7NFR4HaRmGZ3MN48Hcu7lLS19ihI7SPUsfdPSOCh/ulDoKfKhT7KC2P3P5QKfawfBBTr2D4ENEqDs+QJS64uWR6ubc0ssj1Q0vjlYXvLS1X3Mv5x7NPTyi+Jy5uuClNY2Az5zL3RtLLy1pJHz2XO544VLbHw+j4TvkcscLlxoR3yGXO154XaPie+Ry9djSC69rVHyPXK62/xTjhbu6+HtmRHyXXK6iDH1wGroTDd2Jhu5EQ3eioTvR0J1o6E40tAMOt1YCHGitBDjQWglwoLUS4EBrJcCB1kqAA62VwFOnREREROSIPbP7/CNZ28Y+2KT/hPjbjnyVOPl/ZA3tZLLzZGiN7YAD/+smPyqt0nH1Xe2Cw7LndpdHpBZH3ZXs4YndSAbdleyBYy4ljTjkUtKAI5a0sS/8MrKEI5YmFTZ2mQxYmlTgeDVt7DO/nOzC8WqTApPdSoarTQpM9ikZrjYpMNmPZLjapMDZ/JcZh6tNCkx2OxmuNinE4WraDPnbZw5ksp/JgKVJJQ5YmjTgiEvJHib7mgyaS1Yy2dtk3DP7zo9F9wfJyGVFhM8g5gAAAABJRU5ErkJggg=="/>
  </div>
  <div class="download-info">
    <h2 id='bottom'>Download This Ebook</h2>
    <p class="format-label">Available formats:</p>
    <div class="download-buttons">
      <a href="java-streams.pdf" class="download-button">📄 PDF</a>
      <a href="java-streams.epub" class="download-button">📘 EPUB</a>
    </div>
  </div>
</section><div class='related-books'>
<h2>Java In-Depth Books</h2>
<div class='related-book-list'>
<a href="java-io-and-nio.htm">
<div class="book-cover" style="background-color: #f9f6f1;border: 1px solid #ccc;"> 
    <div class="book-cover-title" style="font-size: 18px;color: #333;top: 20px;">Java IO and NIO</div>
    <div class="book-cover-author">readbytes</div>
    <div class="book-cover-bottom-stripe" style="background-color: #333;"></div>
    <img class="book-cover-icon" style="width: 80px;height: 90px;top: 60px;" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFoAAABaCAYAAAA4qEECAAADAElEQVR4Xu2Zu6oTURSGjze0UfANtLAUzgOI4DOItc+VKk1uJ12aadNa21vbCpYK4wQmcPiYzL5k7eXM2f8HP0JYa/3ZX2PEmxshxAPi7u6uLRH2VA3lWId9VdK27WOKsQ47q6RpmucUYx12VolEOyHRToyJ5mwI7ufeeZBItBMS7YREOyHRTki0ExLthEQ7IdFOSLQTEu2ERDsxJtoq7KwSiXZCop04Ho9PKcY67KwWirEO+6qGcqzCHhGBJDoh0U5ItAP7/f6bRDtAyV3+ckYYQNHr9fo1Z8SVtG37iKI5Mzv4IKuwJwXeuvbef4ePsQ77YuGdLp85MysGHmQa9sXAG7l3JgUfZB32heh+0t3yRvfZD87NDj7KOuwLwf2cG5OEj7IO+8bg7imr1eoV55Lh0VC4bwE7cru4n3Jns9l85d7YPmdCSV8oADtyu7gfe4fzMbucCyV9oQDsyO3i/tid7i+395xjuHMfzoaSvlAAduR2cf/+ne7PT/x8JL94mwzsjCZ5wTN8XAjuTynT/nKJcH9KmfaXS4T7U8q0v1wi3J9Skr8cH3cJ7l3I98Ph8HLg86SuM9zPvRMDO0JJXwjQ/Wx6yx3kI3cGZqK6CPdz78TAjlDSF0ZYLpcvOH9O0zQX/xnL2ZiuIbifeycGdoSSvjACZ2N2TnA+do9wP/dODOwIhfvZ8HCfn5wbYmDPNOybLXxYn9+cu8TArmnYN1v4sNTHcdc67JslfFTOw7hvHfbNEj6q+3n3gTMheMM67JsdfNA1j+Idq7BnlvBR2+32DWfElazX63cUzRlhACVLdCEk2QmJdmC3232RaAcoucsfzogAAxJNwp6qoRzrsK9aKMY6i8XiGTurhGKsc/ofGHZWCcVYR6J7KMY6Et1DMedwLgT3JRpQjEQXgmIkuhAUI9GFoBiJLgTFSHQhKEaiC0ExEl0IipHoQlCMRBeCYiS6EBQj0YWgGOtIdA/FWEeieyjGOhLdQzHW2e/3T9hZJRRjHfZVDeVYhT1CiDnzD27IzgFe/xOvAAAAAElFTkSuQmCC"/>
  </div>
</a>


<a href="java-collections.htm">
<div class="book-cover" style="background-color: #f9f6f1;border: 1px solid #ccc;"> 
    <div class="book-cover-title" style="font-size: 18px;color: #333;top: 20px;">Java Collections</div>
    <div class="book-cover-author">readbytes</div>
    <div class="book-cover-bottom-stripe" style="background-color: #333;"></div>
    <img class="book-cover-icon" style="width: 80px;height: 90px;top: 60px;" src='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFoAAABaCAYAAAA4qEECAAADAElEQVR4Xu2dQYrUUBRFIw50JI7FrYgrcAPOXYPORHci7sah4EAQFyA6dNKosZK2Ee8/dOclP7/+i/fAmaR+Xr17KehJV2oYjDHGGGM6YRxzmgZdPKvdMt4vl03vLU15ZsYnsORB7Apd7mh2gS51VM/K+LVc6LA+0/QNKZax9RnvlG+C/tI7+6PYuYLV0MHoc72rX8ZvsP9Gq6BDyWzo/jXcjA4sfKN39E+RoYaf9F2CFAPFjGiG3b0Y5r9111LcJGZEM7QW0UNqRjTDWXwQXCojmoEk9MxmHwWGZ0QzkMT4ujy31b/D4UU8uITp/J4uRDOQxPiyPFfDy+HwQnFoCdPZFi5AM5BE/0VP51r5brgRzUASexU9/piG60VxEdO5lt6AZiCJ3Yoep+Fw8Z8DS5gHNfLncCOagSSWFE2M38tzanFBXcS9k/OwBi5AM5DE2qIn9JxaXFAXM33S5oE7+nFYhGYgiRxFX7FH4V+GEJqBJHIV3QGagSRcdBDNQBIuOohmIAkXHUQzkISLDqIZSMJFB9EMJOGig2gGknDRQTQDSbjoIJqBJHIUfffkPLCC74dNaAaSyFH0PKyiL4bVaAaS6L/oedAOrkQzkISLDqIZSMJFB9EMJNF/0bdPzsMquxLNQBL9Fz3x4eQ8sJIb0AwkkaPoK56efLvSV0MVNANJ5Cq6AzQDSbjoIJqBJFx0EM1AEi46iGYgCRcdRDOQhIsOohlIwkUH0Qwk4aKDaAaScNFBNANJuOggmoEkXHQQzUASLjqIZiAJFx1EM5CEiw6iGUjCRQfRDCSxtuh2X63oDM1AEkuKXmtxQc2IZiCJ3Yqu9vW3ztAMJLFX0ZfD4YXiUDI0A0m46CCagSTyfOm+EzQDSeiZzT4ODM+IZjiLD4NLZUQztBbRQ2pGNMPu1nh4lR/H9sfP+i5BioFgNnT/Gm5GB6Ib/im8Nf0+MtMPgb3Wquhwqw1Vwg/qbkix0EHtAl3qaHaDfx6kIf7Bm8YUyyY1Dbp4Fo0xxhhj/kd+A/PkOH57kF8HAAAAAElFTkSuQmCC'/>
  </div>
</a>


<a href="java-regex.htm">
<div class="book-cover" style="background-color: #f9f6f1;border: 1px solid #ccc;"> 
    <div class="book-cover-title" style="font-size: 18px;color: #333;top: 20px;">Java Regex</div>
    <div class="book-cover-author">readbytes</div>
    <div class="book-cover-bottom-stripe" style="background-color: #333;"></div>
    <img class="book-cover-icon" style="width: 80px;height: 90px;top: 60px;" src="data:image/png;base64,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"/>
  </div>
</a>


<a href="java-functional-programming.htm">
<div class="book-cover" style="background-color: #f9f6f1;border: 1px solid #ccc;"> 
    <div class="book-cover-title" style="font-size: 18px;color: #333;top: 20px;">Java Functional Programming</div>
    <div class="book-cover-author">readbytes</div>
    <div class="book-cover-bottom-stripe" style="background-color: #333;"></div>
    <img class="book-cover-icon" style="width: 80px;height: 80px;top: 80px;" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFoAAABaCAYAAAA4qEECAAADzUlEQVR4Xu2bO4sUURCFlxVBzfwLJkb+A1MxEgMRDBQDRTBRwchARk00MRFBAwNBzEQwMBfEBz7wbWIkiIGJoInio9wZdmZ7T1V3V91bPVhaH3xJ973n3jk2vdO968JCkiRJkiRRIYphWOgI/zB/uyHBDxHFUODmIxkK3HwkQ4Gbj2QY6BDffCTDgBuPZhhw49EMA248miGgW3zj0QwBbjqiIcBNRzQEuOlohoA+8Y1HMgy4cauJEizO5EZMS0RoUSjPYKIEi7OaKMHirCZKsDiTi5iWiNAmoTyDiRIszmqiBIsz+QXTklZYeQYTJXSUl2cxUYLFWU2UYHEmb2Na0gorz2CihJ7w8iwmSrA4q4kSLM7kYUxLWmHlGUyU0C9ensVECRZnNQS4abPPMNEOy7S4BdN00L5GxmU8q4cuNXL24tll2KYrLIXW8yyLJdAJnkP3cFQ/9FzIGeEgHOBgCZhh1Qod5xkzH+PoduiVMH/qqDkQT3q4trGAEpZh1AId4/OZb3EWh14K89DRdDCecNIKzjdp+IelHcL8Nj/g7BU6r2R0+3gCHvRyN26tHdoszDdoAef2KpQt3pN7ZAc81YLzrFrAuSrfNOY/Es4rZAdcfbCywS7YPIvfMa0buiBkaFz6ATn+POy4xmvjhfGgsxpwjsUSigsr8el0UTzh7c9Vn5FBe4Q5BkuZXKFCnqsPmwviyQHsAsdarWF8tWGem/dxMRwwkG3gOJMvMM1O7S8aRJtX8hQ2aCDbwHEWvXAte3pPlmCDBxKhK3yMRU9cbiOKp0k+aQg3+K7pTdUPyHeYVgELL9At7/zqLA9KH0YmNh5qqqHPwgJWLzby8JxBb1y+Wxve+vXCwguc5Lzmxy164lLy1IL32SJ0Qwi3+k04ZtSLqttFm3dxlUJY8Lzdijsqo+QtnFqPK5u2CcFz1APT++RSPe7ZLHSO1qL6zYiXmu/WXdAaIXRO1lD8mnSpsOKHmpu4CyMscB5W/m8rlqex8TBS+lBTDQYObS2Y16vwxFfydbAaDBzaWmgXz2y14/46fg3Kxre5E2cXwoKH8geuXIb4hzNo11u4ZVRX9kmcVQELH0hP6BTPnym9T26h8559Gkc7wBYZQG/oLF+D/WZEgfht5AyOcoLeC4s5OwR0oLHGVTyrh643cvbjWWewGFc/4mr/MXRQKMjJBMCCvEwAWsdL8jARwJKqvYMrJDNYWRUmHWBZNSY9YGGlJj1gYUWew9REhBVnNFFCX3l5FhMDWJ7WpAAssc+kAiyzzcQJLHbibxyVJEmSJMk/xB+4wdarC+OVAQAAAABJRU5ErkJggg=="/>
  </div>
</a>


<a href="java-streams.htm">
<div class="book-cover" style="background-color: #f9f6f1;border: 1px solid #ccc;"> 
    <div class="book-cover-title" style="font-size: 18px;color: #333;top: 20px;">Java Streams</div>
    <div class="book-cover-author">readbytes</div>
    <div class="book-cover-bottom-stripe" style="background-color: #333;"></div>
    <img class="book-cover-icon" style="width: 80px;height: 80px;top: 60px;" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFoAAABaCAYAAAA4qEECAAACbklEQVR4Xu3cP4oUQRiG8S8xEzESDI1MPIRHEQQPYTK9iCyewMxrGIiCoaFnWFkMTIwUxD894KI8VbNdVdNfzdR87w+eRKa2ul+WVZM1G8+3ud+d+mhBvbZ0DO/uWEAcoVfhcIBehcQRvAvt1dz7gjjaVfxcrhcmxTiwvkudcGAN7YQDa2gnHFhDO+HAGtoJB24ZmmdzhcdBWobh2VzhcZCWYXg2V3gcpGUYns0VHgdpGYZnc4XHQVqG4dlc4XGQlmF4Nld4HKRlGJ7NFR4HaRmGZ3MN48Hcu7lLS19ihI7SPUsfdPSOCh/ulDoKfKhT7KC2P3P5QKfawfBBTr2D4ENEqDs+QJS64uWR6ubc0ssj1Q0vjlYXvLS1X3Mv5x7NPTyi+Jy5uuClNY2Az5zL3RtLLy1pJHz2XO544VLbHw+j4TvkcscLlxoR3yGXO154XaPie+Ry9djSC69rVHyPXK62/xTjhbu6+HtmRHyXXK6iDH1wGroTDd2Jhu5EQ3eioTvR0J1o6E40tAMOt1YCHGitBDjQWglwoLUS4EBrJcCB1kqAA62VwFOnREREROSIPbP7/CNZ28Y+2KT/hPjbjnyVOPl/ZA3tZLLzZGiN7YAD/+smPyqt0nH1Xe2Cw7LndpdHpBZH3ZXs4YndSAbdleyBYy4ljTjkUtKAI5a0sS/8MrKEI5YmFTZ2mQxYmlTgeDVt7DO/nOzC8WqTApPdSoarTQpM9ikZrjYpMNmPZLjapMDZ/JcZh6tNCkx2OxmuNinE4WraDPnbZw5ksp/JgKVJJQ5YmjTgiEvJHib7mgyaS1Yy2dtk3DP7zo9F9wfJyGVFhM8g5gAAAABJRU5ErkJggg=="/>
  </div>
</a>



<a href='java.htm'><div class='book-cover' style='background-color: #f9f6f1;color: #111111;border: 1px solid #ccc;display: flex;justify-content: center;align-items: center;text-align: center;'>More Java Books</div></a>
</div>
</div>
  </div>
  <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/prism.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
  
  <script>
    function copyCode(button) {
      const code = button.nextElementSibling.innerText;
      navigator.clipboard.writeText(code).then(() => {
        button.textContent = 'Copied!';
        setTimeout(() => { button.textContent = 'Copy'; }, 1500);
      });
    }
  </script>  
<div id="floatingLog" aria-live="polite" role="alert"></div>
<footer class="page-footer">
    <nav>
      <a href="https://readbytes.github.io">Home</a> | 
      Email:<script language="JavaScript" type="text/javascript">
var part1 = 'yinpeng';var part6 = '263';var part2 = Math.pow(2,6);var part3 = String.fromCharCode(part2);var part4 = 'hotmail dot com';var part5 = part1 + String.fromCharCode(part2) + part4;document.write(part1 + part6 + part3 + part4);
</script>
    </nav>
  <p>© 2025 — All rights reserved.</p>    
  </footer>

</body>
</html>